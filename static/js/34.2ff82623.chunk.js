(this["webpackJsonpmatx-react"]=this["webpackJsonpmatx-react"]||[]).push([[34],{643:function(e,t,a){"use strict";a(2);var n=a(332),r=a(50),o=a(331),i=a(334),c=a(205),l=a(25),s=a(1),d={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:400,bgcolor:"background.paper",border:"2px solid #fff",boxShadow:24,p:4};Object(r.a)(n.a)((function(){return{display:"block",color:"#fff",marginTop:"20px",width:"86px",backgroundColor:"#e15260","&:hover":{backgroundColor:"#cc2333",color:"#fff"}}}));t.a=function(e){var t=e.open,a=e.onConfirmDialogClose,r=e.text,u=(e.onYesClick,Object(l.f)()),m=function(){a(),localStorage.removeItem("accessToken"),u("/session/signin")};return Object(s.jsx)("div",{children:Object(s.jsx)(o.a,{keepMounted:!0,open:t,onClose:function(){return m()},"aria-labelledby":"keep-mounted-modal-title","aria-describedby":"keep-mounted-modal-description",children:Object(s.jsxs)(c.a,{sx:d,children:[Object(s.jsx)(i.a,{id:"keep-mounted-modal-title",variant:"h6",component:"h2",sx:{color:"#333"},children:r}),Object(s.jsx)("div",{style:{display:"flex",justifyContent:"flex-end",alignItems:"center",gap:"1rem"},children:Object(s.jsx)(c.a,{position:"relative",sx:{display:"block",marginTop:"20px"},children:Object(s.jsx)(n.a,{color:"primary",variant:"contained",onClick:function(){return m()},children:"Ok"})})})]})})})}},644:function(e,t,a){"use strict";a(2);var n=a(42),r=a(1);t.a=Object(n.a)(Object(r.jsx)("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close")},659:function(e,t,a){},660:function(e,t,a){"use strict";var n=a(8),r=a(7),o=a(3),i=a(2),c=a(9),l=a(92),s=a(536),d=a(5),u=a(12),m=a(15),b=a(208),j=a(57),p=a(60);function f(e){return Object(j.a)("MuiAlert",e)}var h,g=Object(p.a)("MuiAlert",["root","action","icon","message","filled","filledSuccess","filledInfo","filledWarning","filledError","outlined","outlinedSuccess","outlinedInfo","outlinedWarning","outlinedError","standard","standardSuccess","standardInfo","standardWarning","standardError"]),O=a(557),x=a(42),v=a(1),y=Object(x.a)(Object(v.jsx)("path",{d:"M20,12A8,8 0 0,1 12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4C12.76,4 13.5,4.11 14.2, 4.31L15.77,2.74C14.61,2.26 13.34,2 12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0, 0 22,12M7.91,10.08L6.5,11.5L11,16L21,6L19.59,4.58L11,13.17L7.91,10.08Z"}),"SuccessOutlined"),C=Object(x.a)(Object(v.jsx)("path",{d:"M12 5.99L19.53 19H4.47L12 5.99M12 2L1 21h22L12 2zm1 14h-2v2h2v-2zm0-6h-2v4h2v-4z"}),"ReportProblemOutlined"),_=Object(x.a)(Object(v.jsx)("path",{d:"M11 15h2v2h-2zm0-8h2v6h-2zm.99-5C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}),"ErrorOutline"),w=Object(x.a)(Object(v.jsx)("path",{d:"M11,9H13V7H11M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20, 12C20,16.41 16.41,20 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10, 10 0 0,0 12,2M11,17H13V11H11V17Z"}),"InfoOutlined"),S=a(644),k=["action","children","className","closeText","color","icon","iconMapping","onClose","role","severity","variant"],E=Object(d.a)(b.a,{name:"MuiAlert",slot:"Root",overridesResolver:function(e,t){var a=e.ownerState;return[t.root,t[a.variant],t["".concat(a.variant).concat(Object(m.a)(a.color||a.severity))]]}})((function(e){var t=e.theme,a=e.ownerState,r="light"===t.palette.mode?s.b:s.e,i="light"===t.palette.mode?s.e:s.b,c=a.color||a.severity;return Object(o.a)({},t.typography.body2,{backgroundColor:"transparent",display:"flex",padding:"6px 16px"},c&&"standard"===a.variant&&Object(n.a)({color:r(t.palette[c].light,.6),backgroundColor:i(t.palette[c].light,.9)},"& .".concat(g.icon),{color:"dark"===t.palette.mode?t.palette[c].main:t.palette[c].light}),c&&"outlined"===a.variant&&Object(n.a)({color:r(t.palette[c].light,.6),border:"1px solid ".concat(t.palette[c].light)},"& .".concat(g.icon),{color:"dark"===t.palette.mode?t.palette[c].main:t.palette[c].light}),c&&"filled"===a.variant&&{color:"#fff",fontWeight:t.typography.fontWeightMedium,backgroundColor:"dark"===t.palette.mode?t.palette[c].dark:t.palette[c].main})})),N=Object(d.a)("div",{name:"MuiAlert",slot:"Icon",overridesResolver:function(e,t){return t.icon}})({marginRight:12,padding:"7px 0",display:"flex",fontSize:22,opacity:.9}),R=Object(d.a)("div",{name:"MuiAlert",slot:"Message",overridesResolver:function(e,t){return t.message}})({padding:"8px 0"}),T=Object(d.a)("div",{name:"MuiAlert",slot:"Action",overridesResolver:function(e,t){return t.action}})({display:"flex",alignItems:"flex-start",padding:"4px 0 0 16px",marginLeft:"auto",marginRight:-8}),A={success:Object(v.jsx)(y,{fontSize:"inherit"}),warning:Object(v.jsx)(C,{fontSize:"inherit"}),error:Object(v.jsx)(_,{fontSize:"inherit"}),info:Object(v.jsx)(w,{fontSize:"inherit"})},M=i.forwardRef((function(e,t){var a=Object(u.a)({props:e,name:"MuiAlert"}),n=a.action,i=a.children,s=a.className,d=a.closeText,b=void 0===d?"Close":d,j=a.color,p=a.icon,g=a.iconMapping,x=void 0===g?A:g,y=a.onClose,C=a.role,_=void 0===C?"alert":C,w=a.severity,M=void 0===w?"success":w,L=a.variant,V=void 0===L?"standard":L,I=Object(r.a)(a,k),D=Object(o.a)({},a,{color:j,severity:M,variant:V}),z=function(e){var t=e.variant,a=e.color,n=e.severity,r=e.classes,o={root:["root","".concat(t).concat(Object(m.a)(a||n)),"".concat(t)],icon:["icon"],message:["message"],action:["action"]};return Object(l.a)(o,f,r)}(D);return Object(v.jsxs)(E,Object(o.a)({role:_,elevation:0,ownerState:D,className:Object(c.a)(z.root,s),ref:t},I,{children:[!1!==p?Object(v.jsx)(N,{ownerState:D,className:z.icon,children:p||x[M]||A[M]}):null,Object(v.jsx)(R,{ownerState:D,className:z.message,children:i}),null!=n?Object(v.jsx)(T,{className:z.action,children:n}):null,null==n&&y?Object(v.jsx)(T,{ownerState:D,className:z.action,children:Object(v.jsx)(O.a,{size:"small","aria-label":b,title:b,color:"inherit",onClick:y,children:h||(h=Object(v.jsx)(S.a,{fontSize:"small"}))})}):null]}))}));t.a=M},727:function(e,t,a){},794:function(e,t,a){"use strict";a.r(t);var n=a(6),r=a(45),o=a(13),i=a(8),c=a(33),l=a.n(c),s=a(555),d=a(332),u=a(558),m=a(207),b=a(560),j=a(561),p=a(551),f=a(559),h=a(636),g=a(333),O=a(633),x=a(660),v=a(50),y=a(205),C=a(2),_=a(25),w=a(112),S=(a(94),a(51)),k=a.n(S),E=a(212),N=a(643),R=a(653),T=(a(655),a(727),a(659),a(1)),A=Object(v.a)(y.a)((function(){return{display:"flex",alignItems:"center"}})),M=Object(v.a)("div")((function(e){var t,a=e.theme;return t={margin:"30px"},Object(i.a)(t,a.breakpoints.down("sm"),{margin:"16px"}),Object(i.a)(t,"& .breadcrumb",Object(i.a)({marginBottom:"30px"},a.breakpoints.down("sm"),{marginBottom:"16px"})),t})),L=Object(v.a)(s.a)((function(){return{width:"120px !important",height:"120px !important",border:"2px"}})),V=Object(v.a)(w.TextValidator)((function(){return{width:"100%",marginBottom:"16px"}})),I=(Object(v.a)(w.SelectValidator)((function(){return{width:"100%",marginBottom:"16px",marginTop:"8px"}})),Object(v.a)(d.a)((function(){return{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",width:120,height:120,borderRadius:"50%",borderColor:"#3498db"}}))),D=Object(v.a)(u.a)((function(){return{position:"absolute",top:"6px",left:"25px"}})),z=Object(v.a)(d.a)((function(){return{display:"block",color:"#fff",marginTop:"20px",width:"86px",backgroundColor:"#e15260","&:hover":{backgroundColor:"#cc2333",color:"#fff"}}}));t.default=function(e){var t=Object(_.f)(),a=Object(C.useState)({firstName:"",lastName:"",email:"",area_code:"",phone_number:"",traumas:[],logo:null,logo_image:""}),c=Object(o.a)(a,2),s=c[0],u=c[1],v=Object(C.useState)([]),S=Object(o.a)(v,2),F=S[0],H=S[1],P=Object(C.useState)(!1),U=Object(o.a)(P,2),W=U[0],B=U[1],q=Object(C.useState)(null),X=Object(o.a)(q,2),Q=X[0],G=X[1],Y=Object(C.useState)(""),J=Object(o.a)(Y,2),Z=J[0],K=J[1],$=Object(C.useState)(!1),ee=Object(o.a)($,2),te=ee[0],ae=ee[1],ne=Object(C.useState)(!1),re=Object(o.a)(ne,2),oe=re[0],ie=re[1],ce=Object(C.useState)({status:"success",message:""}),le=Object(o.a)(ce,2),se=le[0],de=le[1],ue=Object(C.useState)(!1),me=Object(o.a)(ue,2),be=me[0],je=me[1],pe=Object(C.useState)(""),fe=Object(o.a)(pe,2),he=fe[0],ge=fe[1],Oe=Object(C.useRef)();function xe(e){e.persist(),u(Object(n.a)(Object(n.a)({},s),{},Object(i.a)({},e.target.name,e.target.value)))}Object(C.useEffect)((function(){return w.ValidatorForm.addValidationRule("REQUIRED",(function(e){return 0!==e.length})),w.ValidatorForm.addValidationRule("MAX_CODE_LENGTH",(function(e){return!e||3===e.length})),w.ValidatorForm.addValidationRule("VALID_INPUT",(function(e){return!e||!isNaN(e)})),w.ValidatorForm.addValidationRule("MAX_PHONE_LENGTH",(function(e){return!e||7===e.length})),w.ValidatorForm.addValidationRule("MAX_POSTAL_CODE",(function(e){return!e||5===e.length})),Object(r.a)(l.a.mark((function e(){var t,a,n,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(E.w)();case 3:return"UnauthorizedError"===(null===(a=e.sent)||void 0===a||null===(t=a.error)||void 0===t?void 0:t.name)?(je(!0),ge("Your session has expired. You will be logged out.")):a&&a.data&&H(a.data),e.next=7,Object(E.o)();case 7:n=e.sent,r=n.roles,console.log("ROLES",r),r&&r.length>0&&r.map((function(e){"provider"!==e.type&&"counsellor"!==e.type||G(e)})),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),console.log("err",e.t0);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})))(),function(){w.ValidatorForm.removeValidationRule("REQUIRED"),w.ValidatorForm.removeValidationRule("MAX_CODE_LENGTH"),w.ValidatorForm.removeValidationRule("VALID_INPUT"),w.ValidatorForm.removeValidationRule("MAX_PHONE_LENGTH"),w.ValidatorForm.removeValidationRule("MAX_POSTAL_CODE")}}),[]);var ve=function(e){return new Promise((function(t){var a=new FileReader;a.readAsDataURL(e),a.onload=function(e){t(e.target.result)},a.onerror=function(e){console.log("Error: ",e)}}))},ye=function(){var e=Object(r.a)(l.a.mark((function e(t){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.target.files[0],!["image/jpeg","image/jpg","image/png","image/svg","image/svg+xml"].includes(a.type)){e.next=9;break}return e.next=5,ve(a);case 5:a.base64=e.sent,u(Object(n.a)(Object(n.a)({},s),{},{logo:a})),e.next=10;break;case 9:R.b.error("Only files with following extensions are allowed: jpeg, jpg, png, svg",{theme:"colored"});case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ce=function(){var e=Object(r.a)(l.a.mark((function e(t){var a,n,r,o;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(a=new FormData).append("files",t),n="",localStorage.accessToken&&(n=localStorage.accessToken),e.next=6,fetch("http://localhost:1337/api/upload",{method:"post",headers:{authorization:"Bearer "+n},body:a});case 6:return r=e.sent,e.next=9,r.text();case 9:return o=e.sent,e.abrupt("return",JSON.parse(o));case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),_e=function(){var e=Object(r.a)(l.a.mark((function e(t){var a,r,o,i,c,d,u,m,b,j;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=s.firstName,r=s.lastName,o=s.email,i=s.area_code,c=s.phone_number,d=s.traumas,u=s.logo,0!==d.length){e.next=3;break}return e.abrupt("return");case 3:if(B(!0),!u){e.next=8;break}return e.next=7,Ce(u);case 7:m=e.sent;case 8:b=d.map((function(e){return F.find((function(t){if(t&&t.attributes&&t.attributes.trauma_code===e)return t.id}))})),j={counsellor:{data:{name:a+" "+r,first_name:a,last_name:r,email:o,area_code:i,phone_number:c,status:"Approved",traumas:b,publishedAt:k()().format().split("T")[0]+" "+k()().format().split("T")[1].slice(0,8)}},traumas:b,user:{data:{email:o,confirmed:!0,blocked:!1,role:Q.id}}},u&&(j.counsellor.data.logo_image=m[0].url||""),Object(E.c)(j).then((function(e){var t;B(!1),"UnauthorizedError"===(null===e||void 0===e||null===(t=e.error)||void 0===t?void 0:t.name)?(je(!0),ge("Your session has expired. You will be logged out.")):(ie(!0),de(Object(n.a)(Object(n.a)({},se),{},{status:e&&"success"===e.status?"success":"error",message:e&&e.message||""})))})).catch((function(e){B(!1),ie(!0),de(Object(n.a)(Object(n.a)({},se),{},{status:"error",message:"Something went wrong"}))}));case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),we=function(){te||ae(!0);var e="";0===s.traumas.length&&(e="This field is required!"),K(e)},Se=s.firstName,ke=s.lastName,Ee=s.email,Ne=s.area_code,Re=s.phone_number,Te=s.traumas,Ae=s.logo;return Object(T.jsx)(T.Fragment,{children:Object(T.jsxs)(M,{children:[Object(T.jsx)("h1",{style:{marginTop:"0px",marginBottom:"10px",padding:"0px"},children:"Add Provider"}),Object(T.jsxs)("div",{className:"center-card",children:[Object(T.jsxs)(w.ValidatorForm,{ref:Oe,onSubmit:_e,onError:function(){return null},children:[Object(T.jsxs)(m.a,{container:!0,rowSpacing:2,columnSpacing:6,children:[Object(T.jsx)(m.a,{item:!0,lg:6,md:6,sm:12,xs:12,children:Object(T.jsx)(V,{autoFocus:!0,margin:"dense",id:"first_name",name:"firstName",label:"First Name*",type:"text",value:Se,onChange:xe,fullWidth:!0,validators:["REQUIRED"],errorMessages:["This field is required"]})}),Object(T.jsx)(m.a,{item:!0,lg:6,md:6,sm:12,xs:12,children:Object(T.jsx)(V,{margin:"dense",id:"last_name",name:"lastName",label:"Last Name*",type:"text",value:ke,onChange:xe,fullWidth:!0,validators:["REQUIRED"],errorMessages:["This field is required"]})})]}),Object(T.jsxs)(m.a,{container:!0,rowSpacing:2,columnSpacing:6,children:[Object(T.jsx)(m.a,{item:!0,lg:6,md:6,sm:12,xs:12,children:Object(T.jsx)(V,{margin:"dense",id:"email",name:"email",label:"Email*",type:"email",value:Ee,onChange:xe,fullWidth:!0,validators:["REQUIRED","isEmail"],errorMessages:["This field is required","email is not valid"]})}),Object(T.jsx)(m.a,{item:!0,lg:6,md:6,sm:12,xs:12,children:Object(T.jsxs)(m.a,{container:!0,children:[Object(T.jsx)(m.a,{item:!0,xs:3,sm:3,md:3,lg:3,children:Object(T.jsx)(V,{margin:"dense",id:"area_code",name:"area_code",label:"Area Code*",type:"text",value:Ne,onChange:xe,fullWidth:!0,validators:["REQUIRED","VALID_INPUT","MAX_CODE_LENGTH"],errorMessages:["This field is required","Invalid area code","Area code should have 3 digits"]})}),Object(T.jsx)(m.a,{item:!0,xs:1,sm:1,md:1,lg:1,children:Object(T.jsx)("div",{className:"phone_line",children:"\xa0"})}),Object(T.jsx)(m.a,{item:!0,xs:8,sm:8,md:8,lg:8,children:Object(T.jsx)(V,{margin:"dense",id:"phone_number",name:"phone_number",label:"Phone Number*",type:"text",value:Re,onChange:xe,fullWidth:!0,validators:["REQUIRED","VALID_INPUT","MAX_PHONE_LENGTH"],errorMessages:["This field is required","Invalid phone number","Phone number must be of 7 digits"]})})]})})]}),Object(T.jsx)(m.a,{container:!0,rowSpacing:2,columnSpacing:6,children:Object(T.jsx)(m.a,{item:!0,lg:6,md:6,sm:12,xs:12,children:Object(T.jsxs)(b.a,{sx:{mt:2,width:250},error:!Te.length&&!!te,children:[Object(T.jsx)(j.a,{id:0===Te.length&&te?"demo-simple-select-error-label":"open-select-label",children:"Trauma Type*"}),Object(T.jsxs)(p.a,{labelId:"open-select-label",margin:"dense",id:"center_type",name:"traumas",multiple:!0,value:Te,input:Object(T.jsx)(f.a,{label:"Trauma Type"}),style:{borderColor:"#FF3D57"},onChange:function(e){var t=e.target.value;K(0===t.length?"This field is required!":""),u(Object(n.a)(Object(n.a)({},s),{},{traumas:t})),ae(!0)},onBlur:function(){return we()},fullWidth:!0,validators:["required"],children:[Object(T.jsx)(h.a,{disabled:!0,value:"",children:Object(T.jsx)("em",{children:"Trauma Type"})}),F&&F.map((function(e,t){return Object(T.jsx)(h.a,{value:e.attributes.trauma_code,children:e.attributes.trauma_name},t)}))]}),Z&&Object(T.jsx)("p",{className:"form-err",children:Z})]})})}),Object(T.jsx)(m.a,{container:!0,spacing:6,children:Object(T.jsxs)(m.a,{item:!0,lg:12,style:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},children:[Ae?Object(T.jsx)(L,{src:Ae.base64}):Object(T.jsxs)(I,{variant:"contained",component:"label",children:[Object(T.jsx)(g.a,{children:"file_upload_outlined"}),"Upload Logo",Object(T.jsx)("input",{type:"file",hidden:!0,accept:"image/*",multiple:!0,onChange:ye})]}),Object(T.jsx)(m.a,{item:!0,style:{flexDirection:"column"},children:Object(T.jsx)(d.a,{variant:"contained",component:"label",color:"inherit",sx:{marginLeft:"15px",marginTop:"15px",height:"35px",marginBottom:"16px"},onClick:function(){return u(Object(n.a)(Object(n.a)({},s),{},{logo:null,logo_image:""}))},children:"Reset Logo"})})]})}),Object(T.jsx)("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:Object(T.jsxs)(A,{flexWrap:"wrap",children:[Object(T.jsxs)(y.a,{mr:2,position:"relative",children:[Object(T.jsx)(d.a,{variant:"contained",color:"primary",disabled:W,type:"submit",onClick:function(){return we()},children:"Submit"}),W&&Object(T.jsx)(D,{size:24,className:"buttonProgress"})]}),Object(T.jsx)(z,{sx:{marginBottom:2},onClick:function(){return Oe.current.resetValidations(),u(Object(n.a)(Object(n.a)({},s),{},{firstName:"",lastName:"",email:"",area_code:Ne,phone_number:"",traumas:[],logo:null,logo_image:""})),void t(-1)},children:"Cancel"})]})})]}),Object(T.jsx)(O.a,{open:oe,anchorOrigin:{vertical:"top",horizontal:"center"},autoHideDuration:3e3,onClose:function(){ie(!1),t("/counsellors")},children:Object(T.jsx)(x.a,{onClose:function(){ie(!1),t("/counsellors")},variant:"filled",severity:se.status,sx:{width:"100%"},children:se.message})}),Object(T.jsx)(N.a,{open:be,text:he,onConfirmDialogClose:function(){ge(""),je(!1)},onYesClick:function(){ge(""),je(!1)}})]})]})})}}}]);
//# sourceMappingURL=34.2ff82623.chunk.js.map