(this["webpackJsonpmatx-react"]=this["webpackJsonpmatx-react"]||[]).push([[26],{643:function(e,n,t){"use strict";t(2);var a=t(332),i=t(50),r=t(331),l=t(334),c=t(205),s=t(25),o=t(1),d={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:400,bgcolor:"background.paper",border:"2px solid #fff",boxShadow:24,p:4};Object(i.a)(a.a)((function(){return{display:"block",color:"#fff",marginTop:"20px",width:"86px",backgroundColor:"#e15260","&:hover":{backgroundColor:"#cc2333",color:"#fff"}}}));n.a=function(e){var n=e.open,t=e.onConfirmDialogClose,i=e.text,u=(e.onYesClick,Object(s.f)()),b=function(){t(),localStorage.removeItem("accessToken"),u("/session/signin")};return Object(o.jsx)("div",{children:Object(o.jsx)(r.a,{keepMounted:!0,open:n,onClose:function(){return b()},"aria-labelledby":"keep-mounted-modal-title","aria-describedby":"keep-mounted-modal-description",children:Object(o.jsxs)(c.a,{sx:d,children:[Object(o.jsx)(l.a,{id:"keep-mounted-modal-title",variant:"h6",component:"h2",sx:{color:"#333"},children:i}),Object(o.jsx)("div",{style:{display:"flex",justifyContent:"flex-end",alignItems:"center",gap:"1rem"},children:Object(o.jsx)(c.a,{position:"relative",sx:{display:"block",marginTop:"20px"},children:Object(o.jsx)(a.a,{color:"primary",variant:"contained",onClick:function(){return b()},children:"Ok"})})})]})})})}},646:function(e,n,t){"use strict";var a=t(13),i=(t(2),t(566)),r=t(568),l=t(640),c=t(565),s=t(567),o=t(336),d=t(208),u=t(25),b=(t(650),t(557)),h=t(692),m=t(552),v=t(571),p=t.n(v),j=t(572),f=t.n(j),g=t(573),O=t.n(g),x=t(95),y=t(332),C=t(1),A={new:"New",inProcess:"In Process",successful:"Successful",unsuccessful:"Unsuccessful",pending:"Pending",scheduled:"Scheduled",rescheduled:"Rescheduled",cancelled:"Cancelled",completed:"Completed"};n.a=function(e){var n=Object(u.f)(),t=Object(x.a)().user,v=function(e){var n=e.meta,t=[];if(n)for(var i=Object.entries(n),r=0,c=Object.entries(i);r<c.length;r++){var s=Object(a.a)(c[r],2),o=s[0],d=Object(a.a)(s[1],2),u=d[0],b=d[1];"deviceId"!==u&&"counsellor_user_id"!==u&&t.push(Object(C.jsx)(l.a,{width:"scheduledAt"===u?140:60,variant:"head",align:"center",className:"text-style",children:b},o))}return t},j=function(n,t){return Object(C.jsx)(y.a,{variant:"contained",color:"primary",onClick:function(a){a.stopPropagation(),n.disabled?e.handleEnable("center"===t?n.center_id:n.provider_id):e.handleDisable("center"===t?n.center_id:n.provider_id)},children:n.disabled?"Enable":"Disable"})},g=function(a,i,r){var l=null;switch(a){case"edit_action":l=Object(C.jsx)(y.a,{variant:"contained",color:"primary",onClick:function(){return n(i)},children:"Edit"});break;case"return":l=Object(C.jsx)(y.a,{variant:"contained",color:"primary",onClick:function(n){n.stopPropagation(),e.handleReturn(r)},disabled:!i,children:"Return"});break;case"expire":l=Object(C.jsx)(y.a,{variant:"contained",color:"primary",onClick:function(n){n.stopPropagation(),e.handleExpire(r)},disabled:!i,children:"Expire"});break;case"device_action":l=function(n){return n.isAssigned?Object(C.jsx)("div",{style:{marginLeft:"1rem"},children:n.center_name}):t&&t.role&&"admin"===t.role.type&&"bmc"===n.owned_by?Object(C.jsx)(y.a,{variant:"contained",color:"primary",onClick:function(){return e.handleOpen(n.deviceID,!0)},children:"Assign"}):null}(i);break;case"view_notes":l=function(n){return Object(C.jsxs)("div",{style:{display:"flex",flexDirection:"row",justifyContent:"center"},children:[Object(C.jsx)(b.a,{"aria-label":"view",color:"primary",onClick:function(){return e.handleOpen(n,!0)},children:Object(C.jsx)(h.a,{badgeContent:n.notes?n.notes.length:0,color:"secondary",children:Object(C.jsx)(p.a,{})})}),Object(C.jsx)(b.a,{"aria-label":"view",color:"primary",onClick:function(){return e.handleOpenNewNotes(n,!0)},children:Object(C.jsx)(f.a,{})})]})}(i);break;case"clinician_status":l=function(n,a){return"Not Assigned"!==n?Object(C.jsx)("div",{children:n}):t&&t.role&&"admin"===t.role.type?Object(C.jsx)("div",{children:"Not Assigned"}):t&&t.role&&"center"===t.role.type?Object(C.jsx)(y.a,{variant:"contained",color:"primary",onClick:function(n){n.stopPropagation(),e.assignClinician(a)},children:"Assign"}):void 0}(i,r);break;case"device_status":l=function(n,a){return"Not Assigned"!==n?Object(C.jsx)("div",{children:n}):t&&t.role&&"admin"===t.role.type?Object(C.jsx)("div",{children:"Not Assigned"}):t&&t.role&&"center"===t.role.type?Object(C.jsx)(y.a,{variant:"contained",color:"primary",onClick:function(n){n.stopPropagation(),e.issueDevices(a)},disabled:"Not Issued"===a.license,children:"Assign"}):void 0}(i,r);break;case"license":l=function(n,a){return"Issued"===n?Object(C.jsx)("div",{children:"Issued"}):t&&t.role&&"admin"===t.role.type?Object(C.jsx)("div",{children:"Not Issued"}):t&&t.role&&"center"===t.role.type?Object(C.jsx)(y.a,{variant:"contained",color:"primary",onClick:function(n){n.stopPropagation(),e.issueLisence(a)},children:"Issue"}):void 0}(i,r);break;case"scheduledAt":l=function(n){return"scheduled"==n.status?Object(C.jsxs)("div",{style:{marginLeft:"1rem"},children:[n.scheduledAt,Object(C.jsx)(b.a,{"aria-label":"view",color:"primary",children:"counsellor"===t.role.type&&Object(C.jsx)(O.a,{})})]}):"pending"==n.status?Object(C.jsxs)("div",{style:{display:"flex",flexDirection:"row",justifyContent:"center"},children:[Object(C.jsx)(y.a,{variant:"contained",color:"success",style:{marginRight:5},onClick:function(){return e.handleAcceptModal(n,!0)},children:Object(C.jsx)("div",{style:{fontSize:".8rem"},children:"Accept"})}),Object(C.jsx)(y.a,{variant:"contained",color:"error",onClick:function(){return e.handleRejectModal(n,!0)},children:Object(C.jsx)("div",{style:{fontSize:".8rem"},children:"Reject"})})]}):"cancelled"==n.status?Object(C.jsx)("div",{style:{marginLeft:"1rem"},children:"".concat(n.scheduledAt," - Cancelled")}):Object(C.jsxs)("div",{style:{marginLeft:"1rem"},children:[n,Object(C.jsx)(b.a,{"aria-label":"view",color:"primary",children:"counsellor"===t.role.type&&Object(C.jsx)(O.a,{})})]})}(i);break;case"appointment":l=function(n,a){return"Scheduled"===n?Object(C.jsx)("div",{children:"Scheduled"}):t&&t.role&&"admin"===t.role.type?Object(C.jsx)("div",{children:"Not Scheduled"}):t&&t.role&&"center"===t.role.type?Object(C.jsx)(y.a,{variant:"contained",color:"primary",onClick:function(n){n.stopPropagation(),e.scheduleSession(a)},children:"Schedule"}):void 0}(i,r);break;case"status":l=A[i]||i;break;case"disable_center":l=j(i,"center");break;case"disable_provider":l=j(i,"provider");break;default:l=i}return l},_=function(e){for(var n=e.row,t=[],i=Object.entries(n),r=0,c=Object.entries(i);r<c.length;r++){var s=Object(a.a)(c[r],2),o=s[0],d=Object(a.a)(s[1],2),u=d[0],b=d[1];"centerId"!==u&&"clientID"!==u&&"clinicId"!==u&&"deviceId"!==u&&"counsellor_user_id"!==u&&t.push(Object(C.jsx)(l.a,{className:"text-style",component:"th",scope:"row",align:"center",children:g(u,b,n)},o))}return t};return Object(C.jsx)(C.Fragment,{children:Object(C.jsxs)(d.a,{sx:{width:"100%",overflow:"hidden"},children:[Object(C.jsx)(c.a,{className:"main-table",children:Object(C.jsxs)(i.a,{sx:{minWidth:650},size:"small","aria-label":"simple table",className:"user-table",children:[Object(C.jsx)(s.a,{children:Object(C.jsx)(o.a,{children:Object(C.jsx)(v,{meta:e.rows.meta})})}),e.rows&&e.rows.length>0?Object(C.jsx)(r.a,{children:(e.rowsPerPage>0?e.rows.slice(e.page*e.rowsPerPage,e.page*e.rowsPerPage+e.rowsPerPage):e.rows).map((function(n,t){return Object(C.jsx)(o.a,{sx:{"&:last-child td, &:last-child th":{border:0}},onClick:function(){e.onClick&&e.onClick("device"===e.view?n.deviceId:"center"===e.view?n.centerId:"client"===e.view||"counselor"===e.view?n.clientID:"counsellor"===e.view?n.counsellor_user_id:"clinician"===e.view?n.clinicId:n.id)},children:Object(C.jsx)(_,{row:n})},t)}))}):Object(C.jsx)(C.Fragment,{children:Object(C.jsx)("caption",{children:"No records found"})})]})}),!e.view||"center"!==e.view&&"device"!==e.view&&"client"!==e.view&&"counsellor"!==e.view&&"clinician"!==e.view?Object(C.jsx)(m.a,{rowsPerPageOptions:[],component:"div",count:e.rows.length,rowsPerPage:e.rowsPerPage||10,page:e.page||0,onPageChange:e.handleChangePage,onRowsPerPageChange:e.handleChangeRowsPerPage,className:"table-page"}):Object(C.jsx)(m.a,{rowsPerPageOptions:[],component:"div",count:e.pageDetails.total||0,rowsPerPage:10,page:e.pageDetails.page-1||0,onPageChange:e.handlePageChange,onRowsPerPageChange:e.handleChangeRowsPerPage,className:"table-page"})]})})}},647:function(e,n,t){"use strict";t.d(n,"b",(function(){return a})),t.d(n,"a",(function(){return i}));var a={admin:[{id:1,name:"Details"},{id:2,name:"Centers"},{id:3,name:"Providers"},{id:4,name:"Clients"}],center:[{id:1,name:"Details"},{id:3,name:"Providers"},{id:4,name:"Clients"}],counsellor:[{id:1,name:"Details"},{id:2,name:"Centers"},{id:4,name:"Clients"}],clinician:[{id:1,name:"Details"},{id:2,name:"Clients"},{id:3,name:"Appointments"}],client:[{id:1,name:"Details"},{id:2,name:"Providers"},{id:3,name:"Appointments"}],device:{admin:[{id:1,name:"Managed"},{id:2,name:"Unmanaged"}],center:[{id:1,name:"Managed"},{id:2,name:"Unmanaged"}]},deviceDetail:[{id:1,name:"Details"},{id:2,name:"Usage"}],deviceUsageFilters:[{id:1,type:"search",label:"Search Device Usage",placeholder:"Search Device Usage"},{id:2,type:"filter",label:"Status",name:"status",items:[{id:1,name:"All",value:"All"},{id:2,name:"Active",value:"Active"},{id:3,name:"Inactive",value:"Inactive"}]}],usersListing:[{id:1,type:"search",label:"Search User",placeholder:"Search User"},{id:2,type:"filter",label:"Role",name:"role",items:[{id:1,name:"All",value:"All"},{id:2,name:"Center",value:"Center"},{id:3,name:"Counsellor",value:"Counsellor"},{id:4,name:"Client",value:"Client"}]}],counsellorListing:[{id:1,type:"search",label:"Search Provider",placeholder:"Search Provider"},{id:2,type:"searchAutoComplete",label:"Search Center",name:"Search Center"}],deviceListing:{admin:{managed:[{id:1,type:"search",label:"Search Device",placeholder:"Search Device"},{id:2,type:"filter",label:"Status",name:"status",items:[{id:1,name:"All",value:"All"},{id:2,name:"Available",value:"Available"},{id:3,name:"Assigned",value:"Assigned"},{id:4,name:"Repair",value:"Repair"}]},{id:3,type:"filter",label:"Device Type",name:"device_type",items:[{id:1,name:"All",value:"All"},{id:2,name:"iPad",value:"iPad"},{id:3,name:"iPhone",value:"iPhone"},{id:4,name:"Android Phone",value:"Android Phone"},{id:5,name:"Android Tablet",value:"Android Tablet"},{id:6,name:"Other",value:"Other"}]},{id:4,type:"searchAutoComplete",label:"Search Center",name:"Search Center"}],unmanaged:[{id:1,type:"search",label:"Search Device",placeholder:"Search Device"},{id:2,type:"filter",label:"Status",name:"status",items:[{id:1,name:"All",value:"All"},{id:2,name:"Active",value:"active"},{id:3,name:"Inactive",value:"inactive"}]}]},center:{bmc:[{id:1,type:"search",label:"Search Device",placeholder:"Search Device"},{id:2,type:"filter",label:"Status",name:"status",items:[{id:1,name:"All",value:"All"},{id:2,name:"Available",value:"Available"},{id:3,name:"Assigned",value:"Assigned"},{id:4,name:"Repair",value:"Repair"}]},{id:3,type:"filter",label:"Device Type",name:"device_type",items:[{id:1,name:"All",value:"All"},{id:2,name:"iPad",value:"iPad"},{id:3,name:"iPhone",value:"iPhone"},{id:4,name:"Android Phone",value:"Android Phone"},{id:5,name:"Android Tablet",value:"Android Tablet"},{id:6,name:"Other",value:"Other"}]}],centerOrClient:[{id:1,type:"search",label:"Search Device",placeholder:"Search Device"},{id:2,type:"filter",label:"Status",name:"status",items:[{id:1,name:"All",value:"All"},{id:2,name:"Active",value:"active"},{id:3,name:"Inactive",value:"inactive"}]}]}},adminProfile:{profileInfo:{username:"",email:"",created_at:"",logo:null,logo_image:"",domain:""},fields:[]},centerProfile:{profileInfo:{center_id:"",name:"",email:"",phone_number:"",address:"",logo:null,logo_image:"",domain:""},fields:[{id:"center_id",type:"text",name:"center_id",label:"Center ID",disabled:!0},{id:"name",type:"text",name:"name",label:"Name",disabled:!1,validators:["REQUIRED"],errorMessages:["This field is required!"]},{id:"email",type:"email",name:"email",label:"Email",disabled:!1,validators:["REQUIRED","isEmail"],errorMessages:["This field is required!","email is not valid"]},{id:"phone_number",type:"text",name:"phone_number",label:"Phone Number",disabled:!1,validators:["REQUIRED","MAX_PHONE_LENGTH"],errorMessages:["This field is required!","Phone number must be of 7 digits"]},{id:"address",type:"text",name:"address",label:"Address",disabled:!1,validators:["REQUIRED"],errorMessages:["This field is required!"]}],validationRules:{REQUIRED:function(e){return 0!==e.length},MAX_PHONE_LENGTH:function(e){return!e||7===e.length}}},counsellorProfile:{profileInfo:{first_name:"",last_name:"",email:"",phone:{area_code:"",phone_number:""},logo:null,logo_image:"",domain:""},fields:[{id:"first_name",type:"text",name:"first_name",label:"First Name",disabled:!1,validators:["REQUIRED"],errorMessages:["This field is required!"]},{id:"last_name",type:"text",name:"last_name",label:"Last Name",disabled:!1,validators:["REQUIRED"],errorMessages:["This field is required!"]},{id:"email",type:"email",name:"email",label:"Email",disabled:!1,validators:["REQUIRED","isEmail"],errorMessages:["This field is required!","email is not valid"]},{type:"phone",area_code:{id:"area_code",type:"text",name:"area_code",label:"Area Code",disabled:!1,validators:["REQUIRED","VALID_INPUT","MAX_CODE_LENGTH"],errorMessages:["This field is required","Invalid area code","Area code should have 3 digits"]},phone_number:{id:"phone_number",type:"text",name:"phone_number",label:"Phone Number",disabled:!1,validators:["REQUIRED","MAX_PHONE_LENGTH"],errorMessages:["This field is required!","Phone number must be of 7 digits"]}}],validationRules:{REQUIRED:function(e){return 0!==e.length},MAX_CODE_LENGTH:function(e){return!e||3===e.length},VALID_INPUT:function(e){return!e||!isNaN(e)},MAX_PHONE_LENGTH:function(e){return!e||7===e.length}}},centerSearchFilters:[{id:1,type:"search",name:"search",label:"Search Center",placeholder:"Search Center"},{id:2,type:"filter",label:"Center Type",name:"center_type",items:[{id:1,name:"All",value:"All"},{id:2,name:"CAC",value:"CAC"},{id:3,name:"Clinic",value:"Clinic"},{id:4,name:"Hospital",value:"Hospital"},{id:5,name:"Private",value:"Private"}]}],appointmentsListing:[{id:1,type:"search",name:"search",label:"Search Appointment",placeholder:"Search Appointment"},{id:2,type:"filter",label:"Status",name:"status",items:[{id:1,name:"All",value:"All"},{id:2,name:"Pending",value:"pending"},{id:3,name:"Scheduled",value:"scheduled"},{id:4,name:"Rescheduled",value:"rescheduled"},{id:5,name:"Cancelled",value:"cancelled"},{id:6,name:"Completed",value:"completed"}]}]},i={client:[{id:1,name:"Details"},{id:5,name:"Appointments"}],center:[{id:1,name:"Details"},{id:4,name:"Clients"},{id:5,name:"Appointments"}]}},650:function(e,n,t){},664:function(e,n,t){"use strict";t(2);var a=t(560),i=t(330),r=t(561),l=t(551),c=t(636),s=t(207),o=t(332),d=t(309),u=t(213),b=t.n(u),h=t(6),m=t(930),v=(t(671),t(1)),p=function(e){var n=e.name,t=e.label,a=e.value,i=e.onChange,r=e.options,l=e.selectValue,c=e.handleSelect;return Object(v.jsx)(m.a,{disablePortal:!0,id:"combo-box-demo",options:r,name:n,value:l,onChange:function(e,n){c(n)},inputValue:a,onInputChange:function(e,n){i(n)},renderInput:function(e){return Object(v.jsx)(d.a,Object(h.a)(Object(h.a)({},e),{},{fullWidth:!0,label:t}))}})};n.a=function(e){var n=e.data,t=e.searchValue,u=e.handleSearch,h=e.multipleFilters,m=e.filterValue,j=e.handleFilter,f=e.autoCompleteValue,g=e.handleAutoComplete,O=e.options,x=e.selectValue,y=e.handleSelect,C=e.handleReset,A=function(e){var n=null;return"search"===e.type?n=Object(v.jsx)(a.a,{fullWidth:!0,children:Object(v.jsx)(d.a,{autoFocus:!0,label:e.label,variant:"outlined",onChange:u,value:t,name:e.name,placeholder:e.placeholder,type:"text",fullWidth:!0,InputProps:{startAdornment:Object(v.jsx)(b.a,{})}})}):"filter"===e.type?n=Object(v.jsx)(i.a,{children:Object(v.jsxs)(a.a,{fullWidth:!0,children:[Object(v.jsx)(r.a,{sx:{backgroundColor:"#fafafa",padding:"0.25rem"},children:e.label}),Object(v.jsx)(l.a,{id:"demo-simple-select",value:h?m[e.name]:m,label:e.label,name:e.name,onChange:j,children:e.items.map((function(e,n){return Object(v.jsx)(c.a,{value:e.value,children:e.name},n)}))})]})}):"searchAutoComplete"===e.type&&(n=Object(v.jsx)(p,{name:e.name,label:e.label,value:f,onChange:function(e){return g(e)},options:O,selectValue:x,handleSelect:function(e){return y(e)}})),n};return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(s.a,{sx:{marginBottom:"20px"},container:!0,rowSpacing:3,columnSpacing:6,children:n.map((function(e,n){return Object(v.jsx)(s.a,{item:!0,lg:6,md:6,sm:12,xs:12,children:A(e)},n)}))}),Object(v.jsx)(a.a,{sx:{marginBottom:"20px",display:"flex",width:"100%"},children:Object(v.jsx)(o.a,{color:"primary",variant:"contained",onClick:C,sx:{alignSelf:"flex-end"},children:"Reset"})})]})}},671:function(e,n,t){},675:function(e,n,t){"use strict";t.d(n,"d",(function(){return r})),t.d(n,"g",(function(){return l})),t.d(n,"a",(function(){return c})),t.d(n,"b",(function(){return s})),t.d(n,"f",(function(){return o})),t.d(n,"c",(function(){return d})),t.d(n,"e",(function(){return u})),t.d(n,"h",(function(){return b}));var a=t(13),i=t(26),r=function(e,n){var t="/api/devices?pagination[page]=".concat(e,"&tab=").concat(n);return Object(i.b)("GET",t).then((function(e){return e})).then((function(e){return e}))},l=function(e){var n="/api/devices/"+e;return Object(i.b)("GET",n).then((function(e){return e})).then((function(e){return e}))},c=function(e){return Object(i.b)("POST","/api/devices",e).then((function(e){return e})).then((function(e){return e}))},s=function(e,n){var t="/api/devices/"+n;return Object(i.b)("PUT",t,e).then((function(e){return e})).then((function(e){return e}))},o=function(e){var n=e&&e.search||"",t=e&&e.type||null,r=e&&e.page||1,l=e&&e.activeTab||1,c=e&&e.centerName,s="/api/devices?search=".concat(n,"&tab=").concat(l,"&pagination[page]=").concat(r);if(t)for(var o=0,d=Object.entries(t);o<d.length;o++){var u=Object(a.a)(d[o],2),b=u[0],h=u[1];s+="&filter[".concat(b,"]=").concat(h)}return c&&(s+="&centerName=".concat(c)),Object(i.b)("GET",s).then((function(e){return e})).catch((function(e){return e}))},d=function(e,n){var t="/api/device-usages?pagination[page]=".concat(e);return n&&(t+="&deviceId=".concat(n)),Object(i.b)("GET",t).then((function(e){return e})).catch((function(e){return e}))},u=function(e){var n=(null===e||void 0===e?void 0:e.page)||1,t=(null===e||void 0===e?void 0:e.search)||"",a=(null===e||void 0===e?void 0:e.type)||"All",r=null===e||void 0===e?void 0:e.deviceId,l="/api/device-usages?pagination[page]=".concat(n);return t&&(l+="&search=".concat(t)),a&&"All"!==a&&(l+="&filter=".concat(a)),r&&(l+="&deviceId=".concat(r)),Object(i.b)("GET",l).then((function(e){return e})).catch((function(e){return e}))},b=function(e){var n="/api/passphrases/"+e;return Object(i.b)("PUT",n).then((function(e){return e})).catch((function(e){return e}))}},766:function(e,n,t){},956:function(e,n,t){"use strict";t.r(n);var a=t(6),i=t(13),r=t(2),l=t(563),c=t(330),s=t(557),o=t(333),d=t(325),u=t(636),b=t(94),h=t(25),m=t(50),v=t(945),p=t(698),j=t(699),f=t(712),g=t(647),O=t(95),x=t(564),y=t(646),C=t(664),A=t(73),_=t(675),P=(t(51),t(332)),S=(t(735),t(558)),w=t(331),D=t(334),k=t(633),E=t(660),I=t(205),R=t(1),N={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:400,bgcolor:"background.paper",border:"2px solid #fff",boxShadow:24,p:4},T=Object(m.a)(S.a)((function(){return{position:"absolute",top:"6px",left:"25px"}})),U=Object(m.a)(P.a)((function(){return{display:"block",color:"#fff",marginTop:"20px",width:"86px",backgroundColor:"#e15260","&:hover":{backgroundColor:"#cc2333",color:"#fff"}}})),M=function(e){var n=e.open,t=e.handleClose,l=e.passphraseId,c=e.handleRefresh,s=Object(r.useState)(!1),o=Object(i.a)(s,2),d=o[0],u=o[1],b=Object(r.useState)(!1),h=Object(i.a)(b,2),m=h[0],v=h[1],p=Object(r.useState)({status:"",message:""}),j=Object(i.a)(p,2),f=j[0],g=j[1],O=function(){v(!1),g(Object(a.a)(Object(a.a)({},f),{},{status:"",message:""}))};return Object(R.jsxs)("div",{children:[Object(R.jsx)(w.a,{keepMounted:!0,open:n,onClose:t,"aria-labelledby":"keep-mounted-modal-title","aria-describedby":"keep-mounted-modal-description",children:Object(R.jsxs)(I.a,{sx:N,children:[Object(R.jsx)(D.a,{id:"keep-mounted-modal-title",variant:"h6",component:"h2",sx:{color:"#333"},children:"Do you want to regenerate the passphrase?"}),Object(R.jsxs)("div",{style:{display:"flex",justifyContent:"flex-end",alignItems:"center",gap:"1rem"},children:[Object(R.jsx)(U,{onClick:t,children:"Cancel"}),Object(R.jsxs)(I.a,{position:"relative",sx:{display:"block",marginTop:"20px"},children:[Object(R.jsx)(P.a,{disabled:d,color:"primary",variant:"contained",onClick:function(){u(!0),Object(_.h)(l).then((function(e){e&&"success"===e.status&&(u(!1),v(!0),g(Object(a.a)(Object(a.a)({},f),{},{status:"success",message:e.message})),c())}))},children:"Yes"}),d&&Object(R.jsx)(T,{size:24,className:"buttonProgress"})]})]})]})}),Object(R.jsx)(k.a,{open:m,anchorOrigin:{vertical:"top",horizontal:"center"},autoHideDuration:3e3,onClose:function(){O()},children:Object(R.jsx)(E.a,{onClose:function(){O()},variant:"filled",severity:f.status,sx:{width:"100%"},children:f.message})})]})},L=t(135),H=t(643),F=(t(766),Object(m.a)(l.a)((function(){return{height:"100%",padding:"20px 24px"}})));n.default=function(){Object(O.a)().user,Object(h.f)();var e=Object(r.useState)("1"),n=Object(i.a)(e,2),t=n[0],l=n[1],m=Object(r.useState)(!1),P=Object(i.a)(m,2),S=P[0],w=P[1],D=Object(r.useState)(""),k=Object(i.a)(D,2),E=(k[0],k[1],Object(r.useState)(null)),I=Object(i.a)(E,2),N=I[0],T=I[1],U=Object(r.useState)({device_id:"",device_type:"",device_serial:"",mac_address:"",is_assigned:"",status:"",passphrase:""}),G=Object(i.a)(U,2),Q=G[0],V=G[1],q=Object(r.useState)(""),Y=Object(i.a)(q,2),z=Y[0],B=Y[1],X=Object(r.useState)([]),W=Object(i.a)(X,2),J=W[0],K=W[1],Z=Object(r.useState)({}),$=Object(i.a)(Z,2),ee=$[0],ne=$[1],te=Object(r.useState)((function(){return g.b.deviceUsageFilters})),ae=Object(i.a)(te,2),ie=ae[0],re=(ae[1],Object(r.useState)("")),le=Object(i.a)(re,2),ce=le[0],se=le[1],oe=Object(r.useState)("All"),de=Object(i.a)(oe,2),ue=de[0],be=de[1],he=Object(r.useState)(!1),me=Object(i.a)(he,2),ve=me[0],pe=me[1],je=Object(r.useState)(""),fe=Object(i.a)(je,2),ge=fe[0],Oe=fe[1],xe=Object(r.useState)(!1),ye=Object(i.a)(xe,2),Ce=ye[0],Ae=ye[1],_e=Object(r.useState)(!1),Pe=Object(i.a)(_e,2),Se=Pe[0],we=Pe[1],De=Object(r.useState)(""),ke=Object(i.a)(De,2),Ee=ke[0],Ie=ke[1],Re=g.b.deviceDetail,Ne=Boolean(N);function Te(e){Object(_.g)(e).then((function(e){var n,t,i,r,l;"UnauthorizedError"===(null===e||void 0===e||null===(n=e.error)||void 0===n?void 0:n.name)?(we(!0),Ie("Your session has expired. You will be logged out.")):e&&(V(Object(a.a)(Object(a.a)({},Q),{},{device_id:e.device_id,device_type:e.device_type,device_serial:e.device_serial,mac_address:e.mac_address,is_assigned:String(e.is_assigned),status:"bmc"===e.owned_by?e.status:Fe(e),passphrase:null===e||void 0===e||null===(t=e.license)||void 0===t||null===(i=t.passphrase)||void 0===i?void 0:i.name})),B(null===e||void 0===e?void 0:e.id),Oe(null===e||void 0===e||null===(r=e.license)||void 0===r||null===(l=r.passphrase)||void 0===l?void 0:l.id))}))}function Ue(e){w(!0),Object(_.c)(e,z).then((function(e){var n;w(!1),"UnauthorizedError"===(null===e||void 0===e||null===(n=e.error)||void 0===n?void 0:n.name)?(we(!0),Ie("Your session has expired. You will be logged out.")):(K(Le(e.data)),ne(He(e.meta)))})).catch((function(e){console.log("error",e)}))}function Me(e,n,t){w(!0),pe(!0);var a={search:e,type:n,page:t,deviceId:z};Object(_.e)(a).then((function(e){var n;w(!1),"UnauthorizedError"===(null===e||void 0===e||null===(n=e.error)||void 0===n?void 0:n.name)?(we(!0),Ie("Your session has expired. You will be logged out.")):(K(Le(e.data)),ne(He(e.meta)))})).catch((function(e){console.log("error",e)}))}function Le(e){var n,t=[];return n={client_id:"Record ID",client_name:"Record Name",passphrase:"Passphrase",assigned_date:"Assigned Date",returned_date:"Returned Date",status:"Status"},e.forEach((function(e){var n,a,i,r,l,c,s,o,d,u,b,h,m,v,p,j,f={client_id:null===e||void 0===e||null===(n=e.attributes)||void 0===n||null===(a=n.client)||void 0===a||null===(i=a.data)||void 0===i||null===(r=i.attributes)||void 0===r?void 0:r.client_id,client_name:null===e||void 0===e||null===(l=e.attributes)||void 0===l||null===(c=l.client)||void 0===c||null===(s=c.data)||void 0===s||null===(o=s.attributes)||void 0===o?void 0:o.name,passphrase:null===e||void 0===e||null===(d=e.attributes)||void 0===d||null===(u=d.passphrase)||void 0===u||null===(b=u.data)||void 0===b||null===(h=b.attributes)||void 0===h?void 0:h.name,assigned_date:Object(A.d)(null===e||void 0===e||null===(m=e.attributes)||void 0===m?void 0:m.createdAt),returned_date:"Active"===(null===e||void 0===e||null===(v=e.attributes)||void 0===v?void 0:v.status)?"-":Object(A.d)(null===e||void 0===e||null===(p=e.attributes)||void 0===p?void 0:p.updatedAt),status:null===e||void 0===e||null===(j=e.attributes)||void 0===j?void 0:j.status};t.push(f)})),t.meta=n,t}function He(e){return e.pagination}function Fe(e){var n;return["New","Used"].includes(null===e||void 0===e||null===(n=e.license)||void 0===n?void 0:n.status)?"Active":"Inactive"}Object(r.useEffect)((function(){var e=window.location.href.split("/").at(-1);e&&Te(e)}),[]);function Ge(e){T(e.currentTarget)}function Qe(){T(null)}var Ve=function(e,n){ve?Me(ce,ue,Number(n)+1):Ue(Number(n)+1)},qe=function(e){var n=e.target.value;se(n),n&&n.length>2?Me(n,ue,1):""===n&&("All"!==ue?Me("",ue,1):(pe(!1),Ue(1)))},Ye=function(e){var n=e.target.value;be(n),"All"===n?ce?Me(ce,"All",1):(pe(!1),Ue(1)):Me(ce,n,1)},ze=function(){pe(!1),be("All"),se(""),Ue(1)};return Object(R.jsxs)("div",{className:"DeviceList-container",children:[Object(R.jsx)("div",{className:"Breadcrumb-box",children:Object(R.jsx)(b.b,{routeSegments:[{name:"Devices",path:"/devices"},{name:"Device Details"}]})}),Object(R.jsxs)(p.a,{value:t,children:[Object(R.jsx)(c.a,{sx:{borderBottom:1,borderColor:"divider",marginBottom:"20px"},children:Object(R.jsx)(j.a,{onChange:function(e,n){l(n),2===Number(n)&&Ue(1)},"aria-label":"Device Details Segment",children:Re.map((function(e,n){return Object(R.jsx)(v.a,{label:e.name,value:e.id.toString()},n)}))})}),Re&&Re.map((function(e,n){return Object(R.jsx)(f.a,{value:e.id.toString(),children:1===e.id?Object(R.jsxs)(F,{elevation:6,children:[Object(R.jsx)(x.a,{title:"Device Details",action:Object(R.jsxs)("div",{children:[Object(R.jsx)(s.a,{"aria-label":"More","aria-owns":Ne?"long-menu":void 0,"aria-haspopup":"true",onClick:Ge,children:Object(R.jsx)(o.a,{children:"more_vert"})}),Object(R.jsx)(d.a,{id:"long-menu",anchorEl:N,open:Ne,onClose:Qe,PaperProps:{style:{maxHeight:216,width:200}},children:Object(R.jsx)(u.a,{selected:!1,onClick:function(){Ae(!0),Qe()},children:"Regenerate Passphrase"})})]})}),Object(R.jsx)(b.o,{data:Q})]}):Object(R.jsxs)(R.Fragment,{children:[Object(R.jsx)(C.a,{data:ie,searchValue:ce,handleSearch:qe,multipleFilters:!1,filterValue:ue,handleFilter:Ye,handleReset:ze}),!S&&J.meta&&Object(R.jsx)(y.a,{page:1,pageDetails:ee,handlePageChange:Ve,rows:J,view:"device"})]})},n)}))]}),S&&Object(R.jsx)(L.a,{}),Object(R.jsx)(M,{open:Ce,handleClose:function(){return Ae(!1)},passphraseId:ge,handleRefresh:function(){Ae(!Ce),Te(z)}}),Object(R.jsx)(H.a,{open:Se,text:Ee,onConfirmDialogClose:function(){Ie(""),we(!1)},onYesClick:function(){Ie(""),we(!1)}})]})}}}]);
//# sourceMappingURL=26.9f0e0d46.chunk.js.map