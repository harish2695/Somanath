(this["webpackJsonpmatx-react"]=this["webpackJsonpmatx-react"]||[]).push([[45],{643:function(e,n,t){"use strict";t(2);var i=t(332),o=t(50),l=t(331),c=t(334),a=t(205),s=t(25),r=t(1),d={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:400,bgcolor:"background.paper",border:"2px solid #fff",boxShadow:24,p:4};Object(o.a)(i.a)((function(){return{display:"block",color:"#fff",marginTop:"20px",width:"86px",backgroundColor:"#e15260","&:hover":{backgroundColor:"#cc2333",color:"#fff"}}}));n.a=function(e){var n=e.open,t=e.onConfirmDialogClose,o=e.text,u=(e.onYesClick,Object(s.f)()),v=function(){t(),localStorage.removeItem("accessToken"),u("/session/signin")};return Object(r.jsx)("div",{children:Object(r.jsx)(l.a,{keepMounted:!0,open:n,onClose:function(){return v()},"aria-labelledby":"keep-mounted-modal-title","aria-describedby":"keep-mounted-modal-description",children:Object(r.jsxs)(a.a,{sx:d,children:[Object(r.jsx)(c.a,{id:"keep-mounted-modal-title",variant:"h6",component:"h2",sx:{color:"#333"},children:o}),Object(r.jsx)("div",{style:{display:"flex",justifyContent:"flex-end",alignItems:"center",gap:"1rem"},children:Object(r.jsx)(a.a,{position:"relative",sx:{display:"block",marginTop:"20px"},children:Object(r.jsx)(i.a,{color:"primary",variant:"contained",onClick:function(){return v()},children:"Ok"})})})]})})})}},645:function(e,n,t){"use strict";t.d(n,"c",(function(){return o})),t.d(n,"a",(function(){return l})),t.d(n,"b",(function(){return c})),t.d(n,"e",(function(){return a})),t.d(n,"h",(function(){return s})),t.d(n,"l",(function(){return r})),t.d(n,"n",(function(){return d})),t.d(n,"j",(function(){return u})),t.d(n,"m",(function(){return v})),t.d(n,"d",(function(){return b})),t.d(n,"g",(function(){return f})),t.d(n,"i",(function(){return h})),t.d(n,"f",(function(){return p})),t.d(n,"k",(function(){return j}));var i=t(26),o=function(e,n){var t="/api/clients?pagination[page]=".concat(e,"&counsellor=").concat(n);return Object(i.b)("GET",t).then((function(e){return e})).then((function(e){return e}))},l=function(e,n){var t="/api/centers?pagination[page]=".concat(e,"&counsellor=").concat(n);return Object(i.b)("GET",t).then((function(e){return e})).then((function(e){return e}))},c=function(e){var n="/api/counsellors?pagination[page]=".concat(e);return Object(i.b)("GET",n).then((function(e){return e})).catch((function(e){return e}))},a=function(e,n){var t="/api/sessions?pagination[page]=".concat(e,"&counsellor=").concat(n);return Object(i.b)("GET",t).then((function(e){return e})).then((function(e){return e}))},s=function(e,n,t,o){console.log(o);var l="/api/sessions?filter=".concat(e,"&counsellor=").concat(t,"&filterType=").concat(o);return console.log(e),Object(i.b)("GET",l).then((function(e){return e})).catch((function(e){return e}))},r=function(e,n){var t="/api/sessions?find=".concat(e);return Object(i.b)("GET",t).then((function(e){return e})).catch((function(e){return e}))},d=function(e,n){var t="/api/sessions/".concat(e);return Object(i.b)("PUT",t,n).then((function(e){return e})).then((function(e){return e}))},u=function(e,n){var t="/api/clients?find=".concat(e);return Object(i.b)("GET",t).then((function(e){return e})).catch((function(e){return e}))},v=function(e,n){var t="/api/counsellors?pagination[page]=".concat(n,"&search=").concat(e);return Object(i.b)("GET",t).then((function(e){return e})).catch((function(e){return e}))},b=function(e){var n="/api/counsellors/".concat(e);return Object(i.b)("GET",n).then((function(e){return e})).catch((function(e){return e}))},f=function(e,n,t,o){console.log(o);var l="/api/clients?filter=".concat(e,"&counsellor=").concat(t,"&filterType=").concat(o);return console.log(e),Object(i.b)("GET",l).then((function(e){return e})).catch((function(e){return e}))},h=function(e,n,t){var o="/api/centers?search=".concat(e,"&counsellor=").concat(t);return console.log(e),Object(i.b)("GET",o).then((function(e){return e})).catch((function(e){return e}))},p=function(e,n,t){var o="/api/centers?filter=".concat(e,"&counsellor=").concat(t);return console.log(e),Object(i.b)("GET",o).then((function(e){return e})).catch((function(e){return e}))},j=function(e){var n=e&&e.search||"",t=e&&e.page||1,o=e&&e.centerName,l="/api/counsellors?search=".concat(n,"&pagination[page]=").concat(t);return o&&(l+="&centerName=".concat(o)),Object(i.b)("GET",l).then((function(e){return e})).catch((function(e){return e}))}},679:function(e,n,t){"use strict";t.d(n,"b",(function(){return a})),t.d(n,"a",(function(){return r})),t.d(n,"c",(function(){return u}));var i=t(51),o=t.n(i);function l(e){return e.map((function(e){return e.trauma_code})).join(", ")}var c=function(e,n,t,i){var l=e||null;return i&&"upcoming"===i?{id:e.id,status:"scheduled"===l.status&&o()(o()(l.scheduled_at).format("x"),"x").isBefore(o()().startOf("second"))?"missed":l.status,scheduledAt:"".concat(o()(l.scheduled_at).format("DD MMMM, YYYY hh:mm A")),sessionId:l.session_id,clientId:n,center:t,disabled:e.disabled}:{id:e.id,status:"scheduled"===l.status||"pending"===l.status?"missed":l.status,scheduledAt:"".concat(o()(l.scheduled_at).format("DD MMMM, YYYY hh:mm A")),sessionId:l.session_id,clientId:n,center:t,disabled:e.disabled}};function a(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,t=[],i={clientId:"Client ID",name:"Record Name",center:"Center",gender:"Birth Gender",traumas:"Trauma Codes",ethnicity:"Ethnicity",scheduledAt:"Scheduled",view_notes:"Notes"};return e.forEach((function(e){var i,o,a,s,r,d,u,v,b,f,h,p,j,m={clientId:null===e||void 0===e||null===(i=e.client)||void 0===i?void 0:i.client_id,name:null===e||void 0===e||null===(o=e.client)||void 0===o?void 0:o.name,center:null===e||void 0===e||null===(a=e.center)||void 0===a?void 0:a.name,gender:null===e||void 0===e||null===(s=e.client)||void 0===s?void 0:s.gender_bio,traumas:null!==e&&void 0!==e&&null!==(r=e.client)&&void 0!==r&&r.traumas?l(null===e||void 0===e||null===(d=e.client)||void 0===d?void 0:d.traumas):"",ethnicity:null!==e&&void 0!==e&&null!==(u=e.client)&&void 0!==u&&u.ethnicity?null===e||void 0===e||null===(v=e.client)||void 0===v?void 0:v.ethnicity:"",scheduledAt:c(e,null===e||void 0===e||null===(b=e.client)||void 0===b?void 0:b.client_id,null===e||void 0===e||null===(f=e.center)||void 0===f?void 0:f.name,n),view_notes:{clientId:null===e||void 0===e||null===(h=e.client)||void 0===h?void 0:h.client_id,clientName:null===e||void 0===e||null===(p=e.client)||void 0===p?void 0:p.name,sessionId:null===e||void 0===e?void 0:e.id,center_id:null===e||void 0===e||null===(j=e.center)||void 0===j?void 0:j.id,notes:null===e||void 0===e?void 0:e.notes}};t.push(m)})),t.meta=i,t}var s={clininicain_id:"Provider ID",profesional_name:"Professional Name",first_name:"First Name",last_name:"Last Name",traumas:"Trauma Codes",status:"Status",clients:"Clients",sessions:"Sessions",disable_provider:"Disable Provider"};function r(e){var n=[];return Array.isArray(e)?(e.forEach((function(e){n.push(d(e))})),n.meta=s):n.push(d(e)),n}function d(e){var n,t,i,o,l,c,a,s,r,d,u,v,b,f;return{clinicId:(null===e||void 0===e?void 0:e.id)||"-",clininicain_id:e&&(null===(n=e.attributes)||void 0===n||null===(t=n.user)||void 0===t||null===(i=t.data)||void 0===i||null===(o=i.attributes)||void 0===o?void 0:o.username)||"-",profesional_name:e&&e.attributes&&e.attributes.name||"-",first_name:e&&e.attributes&&e.attributes.first_name||"-",last_name:e&&e.attributes&&e.attributes.last_name||"-",traumas:e&&e.attributes&&e.attributes.traumas&&(f=null===(l=e.attributes.traumas)||void 0===l?void 0:l.data,f.map((function(e){return e.attributes.trauma_code})).join(", "))||"-",status:(null===e||void 0===e||null===(c=e.attributes)||void 0===c?void 0:c.status)||"-",clients:e&&e.attributes&&e.attributes.clients&&e.attributes.clients.data&&(null===(a=e.attributes.clients.data)||void 0===a?void 0:a.length)||"-",sessions:e&&e.attributes&&e.attributes.sessions&&e.attributes.sessions.data&&(null===(s=e.attributes.sessions)||void 0===s||null===(r=s.data)||void 0===r?void 0:r.length)||"-",disable_provider:{provider_id:null===e||void 0===e?void 0:e.id,disabled:(null===e||void 0===e||null===(d=e.attributes)||void 0===d||null===(u=d.user)||void 0===u||null===(v=u.data)||void 0===v||null===(b=v.attributes)||void 0===b?void 0:b.blocked)||!1}}}function u(e){var n=[];return Array.isArray(e)?e.forEach((function(e){n.push(v(e))})):n.push(v(e)),n}function v(e){var n,t;return{title:(null===e||void 0===e||null===(n=e.client)||void 0===n?void 0:n.name)+"-"+(null===e||void 0===e||null===(t=e.client)||void 0===t?void 0:t.client_id)||"Anonymous",start:o()(null===e||void 0===e?void 0:e.scheduled_at).toDate(),end:o()(null===e||void 0===e?void 0:e.scheduled_at).add(50,"minutes").toDate(),session:e}}},846:function(e,n,t){},957:function(e,n,t){"use strict";t.r(n);var i=t(13),o=t(2),l=t.n(o),c=t(645),a=t(95),s=t(851),r=(t(846),t(51)),d=t.n(r),u=(t(847),t(679)),v=t(331),b=t(330),f=t(332),h=t(697),p=t.n(h),j=t(848),m=t.n(j),x=t(850),O=t.n(x),g=t(849),y=t.n(g),k=t(50),_=t(558),C=t(334),E=t(207),S=t(309),w=t(112),A=t(1),D=Object(k.a)(_.a)((function(){return{position:"absolute",bottom:"38px",right:"60px"}})),T={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",bgcolor:"background.paper",border:"2px solid #fff",boxShadow:24,p:4,borderRadius:"15px"},I={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:400,bgcolor:"background.paper",boxShadow:24},R={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",bgcolor:"background.paper",border:"2px solid #fff",boxShadow:24,p:4,borderRadius:"15px"},G={display:"flex",padding:"10px",flexWrap:"wrap",justifyContent:"end"},Y={cursor:"default",fontSize:"20px",fontWeight:"500",lineHeight:1.5,maxHeight:"87px",color:"#fff"},N=function(e){var n,t,o,a,s,r,u,h,j,x,g,k,_,N,P,M,U,L,W,z,F,V,B,H,Q,J,q,K,X=l.a.useState(!1),Z=Object(i.a)(X,2),$=Z[0],ee=Z[1],ne=l.a.useState(""),te=Object(i.a)(ne,2),ie=te[0],oe=te[1],le=l.a.useState(!1),ce=Object(i.a)(le,2),ae=ce[0],se=ce[1],re=l.a.useState(!1),de=Object(i.a)(re,2),ue=de[0],ve=de[1],be=l.a.useState(!1),fe=Object(i.a)(be,2),he=fe[0],pe=fe[1];return l.a.useEffect((function(){return w.ValidatorForm.addValidationRule("REQUIRED",(function(e){return 0!==e.length})),function(){w.ValidatorForm.removeValidationRule("REQUIRED")}}),[e]),Object(A.jsx)("div",{children:Object(A.jsx)(v.a,{keepMounted:!0,open:e.open,onClose:function(){ve(!1),pe(!1),e.handleClose()},"aria-labelledby":"keep-mounted-modal-title","aria-describedby":"keep-mounted-modal-description",children:ue?Object(A.jsx)(A.Fragment,{children:he?Object(A.jsx)(b.a,{sx:R,children:Object(A.jsxs)(w.ValidatorForm,{onSubmit:function(){var n,t;ee(!0);Object(c.n)(null===(n=e.event)||void 0===n||null===(t=n.session)||void 0===t?void 0:t.id,{data:{status:"scheduled"}}).then((function(n){ee(!1),pe(!1),ve(!1),e.handleSubmit("Appointment successfully scheduled")})).catch((function(e){return console.log(e)}))},onError:function(){return null},children:[Object(A.jsx)(C.a,{id:"keep-mounted-modal-title",variant:"h6",component:"h2",children:"Confirm this appointment"}),Object(A.jsxs)(C.a,{id:"keep-mounted-modal-title",variant:"body2",component:"h6",children:["Appointment ID :"," ",(null===(F=e.event)||void 0===F||null===(V=F.session)||void 0===V?void 0:V.session_id)||"Unknown"]}),Object(A.jsxs)(C.a,{id:"keep-mounted-modal-title",variant:"body2",component:"h6",children:["Client ID :"," ",(null===(B=e.event)||void 0===B||null===(H=B.session)||void 0===H||null===(Q=H.client)||void 0===Q?void 0:Q.client_id)||"Unknown"]}),Object(A.jsxs)(C.a,{id:"keep-mounted-modal-title",variant:"body2",component:"h6",children:["Center :"," ",null===(J=e.event)||void 0===J||null===(q=J.session)||void 0===q||null===(K=q.center)||void 0===K?void 0:K.name]}),Object(A.jsx)(b.a,{sx:{minWidth:500,mb:2},children:Object(A.jsx)(E.a,{container:!0,spacing:3,children:Object(A.jsx)(E.a,{item:!0,lg:12,md:6,sm:12,xs:12,sx:{mt:2},children:Object(A.jsx)(S.a,{fullWidth:!0,label:"Scheduled At",inputProps:{readOnly:!0},value:d()(e.event.session.scheduled_at).format("lll")})})})}),Object(A.jsxs)(b.a,{sx:{display:"table",marginLeft:"auto",marginRight:"0px"},children:[Object(A.jsx)(f.a,{color:"error",variant:"contained",onClick:function(){ve(!1),pe(!1),e.handleClose()},children:"Cancel"}),Object(A.jsx)(f.a,{disabled:$,sx:{ml:2},type:"submit",variant:"contained",children:"Accept"}),$&&Object(A.jsx)(D,{size:24,className:"buttonProgress"})]})]})}):Object(A.jsx)(b.a,{sx:T,children:Object(A.jsxs)(w.ValidatorForm,{onSubmit:function(){var n,t;if(console.log(ie),0!==ie.length){se(!1),ee(!0);var i={data:{status:"cancelled",cancell_reason:ie}};Object(c.n)(null===(n=e.event)||void 0===n||null===(t=n.session)||void 0===t?void 0:t.id,i).then((function(n){n&&(ee(!1),pe(!1),ve(!1),e.handleSubmit("Appointment successfully canceled"))})).catch((function(e){return console.log(e)}))}else se(!0)},onError:function(){return null},children:[Object(A.jsx)(C.a,{id:"keep-mounted-modal-title",variant:"h6",component:"h2",children:"Reject this appointment"}),Object(A.jsxs)(C.a,{id:"keep-mounted-modal-title",variant:"body2",component:"h6",children:["Appointment ID :"," ",(null===(_=e.event)||void 0===_||null===(N=_.session)||void 0===N?void 0:N.session_id)||"Unknown"]}),Object(A.jsxs)(C.a,{id:"keep-mounted-modal-title",variant:"body2",component:"h6",children:["Client ID :"," ",(null===(P=e.event)||void 0===P||null===(M=P.session)||void 0===M||null===(U=M.client)||void 0===U?void 0:U.client_id)||"Unknown"]}),Object(A.jsxs)(C.a,{id:"keep-mounted-modal-title",variant:"body2",component:"h6",children:["Center :"," ",null===(L=e.event)||void 0===L||null===(W=L.session)||void 0===W||null===(z=W.center)||void 0===z?void 0:z.name]}),Object(A.jsx)(b.a,{sx:{minWidth:500,mb:2},children:Object(A.jsxs)(E.a,{container:!0,spacing:3,children:[Object(A.jsx)(E.a,{item:!0,lg:12,md:6,sm:12,xs:12,sx:{mt:2},children:Object(A.jsx)(S.a,{fullWidth:!0,label:"Scheduled At",inputProps:{readOnly:!0},value:d()(e.event.session.scheduled_at).format("lll")})}),Object(A.jsx)(E.a,{item:!0,lg:12,md:6,sm:12,xs:12,children:Object(A.jsx)(S.a,{fullWidth:!0,label:"Reason",multiline:!0,rows:4,value:ie,onChange:function(e){return oe(e.target.value)},validators:["REQUIRED"]})}),ae&&Object(A.jsx)("span",{style:{marginLeft:20,color:"red"},children:"Error: Please add the reason of cancelation"})]})}),Object(A.jsxs)(b.a,{sx:{display:"table",marginLeft:"auto",marginRight:"0px"},children:[Object(A.jsx)(f.a,{color:"error",variant:"contained",onClick:function(){ve(!1),e.handleClose()},children:"Cancel"}),Object(A.jsx)(f.a,{disabled:$,sx:{ml:2},type:"submit",variant:"contained",children:"Reject"}),$&&Object(A.jsx)(D,{size:24,className:"buttonProgress"})]})]})})}):Object(A.jsxs)(b.a,{sx:I,children:[Object(A.jsxs)("div",{style:{backgroundColor:"rgba(34,42,69, 0.96)"},children:[Object(A.jsx)("div",{style:G,children:Object(A.jsx)(f.a,{style:{minWidth:"0"},onClick:e.handleClose,children:Object(A.jsx)(p.a,{style:{color:"white"}})})}),Object(A.jsxs)("div",{style:{padding:"0 24px 16px"},children:[Object(A.jsx)("div",{style:Y,children:(null===(n=e.event)||void 0===n||null===(t=n.session)||void 0===t||null===(o=t.client)||void 0===o?void 0:o.name)+"-"+(null===(a=e.event)||void 0===a||null===(s=a.session)||void 0===s||null===(r=s.client)||void 0===r?void 0:r.client_id)}),Object(A.jsx)("p",{style:{color:"white",margin:"0"},children:e.event.session.center.name})]})]}),Object(A.jsxs)("div",{style:{padding:"8px 18px 26px 26px"},children:[Object(A.jsxs)("div",{style:{display:"flex"},children:[Object(A.jsx)(m.a,{style:{margin:"12px"}})," ",Object(A.jsx)("p",{children:d()(null===(u=e.event)||void 0===u||null===(h=u.session)||void 0===h?void 0:h.scheduled_at).format("LLLL")})]}),Object(A.jsxs)("div",{style:{display:"flex"},children:[Object(A.jsx)(y.a,{style:{margin:"12px"}})," ",Object(A.jsx)("p",{children:"50 minutes"})]}),Object(A.jsxs)("div",{style:{display:"flex"},children:[Object(A.jsx)(O.a,{style:{margin:"12px"}})," ",function(){var n,t,i,o,l,c,a,s;return"completed"===e.event.session.status?Object(A.jsx)("p",{style:{color:"#efa80d"},children:"Completed"}):"cancelled"===e.event.session.status?Object(A.jsx)("p",{style:{color:"#f60a0a"},children:"Canceled"}):d()(null===e||void 0===e||null===(n=e.event)||void 0===n||null===(t=n.session)||void 0===t?void 0:t.scheduled_at)<d()()?Object(A.jsx)("p",{style:{color:"orange"},children:"Expired"}):d()(null===(i=e.event)||void 0===i||null===(o=i.session)||void 0===o?void 0:o.scheduled_at)>d()()&&"pending"===(null===(l=e.event)||void 0===l||null===(c=l.session)||void 0===c?void 0:c.status)?Object(A.jsx)("p",{style:{color:"#3f51b5"},children:"Pending approval"}):d()((null===(a=e.event)||void 0===a||null===(s=a.session)||void 0===s?void 0:s.scheduled_at)>=d()().add(1,"day"))?Object(A.jsx)("p",{style:{color:"#3f51b5"},children:"Upcoming session"}):Object(A.jsx)("p",{children:"unknown"})}()]})]}),d()(null===(j=e.event)||void 0===j||null===(x=j.session)||void 0===x?void 0:x.scheduled_at)>d()()&&"pending"===(null===(g=e.event)||void 0===g||null===(k=g.session)||void 0===k?void 0:k.status)&&Object(A.jsxs)("div",{style:{textAlign:"center",marginBottom:"10px"},children:[Object(A.jsx)(f.a,{variant:"contained",color:"success",style:{marginRight:5},onClick:function(){ve(!0),pe(!0)},children:"Accept"}),Object(A.jsx)(f.a,{variant:"contained",color:"error",onClick:function(){return ve(!0)},children:"Reject"})]})]})})})},P=t(633),M=t(660),U=t(643),L=Object(s.b)(d.a);n.default=function(){var e=Object(a.a)().user,n=l.a.useState([]),t=Object(i.a)(n,2),r=t[0],v=t[1],b=l.a.useState(!1),f=Object(i.a)(b,2),h=f[0],p=f[1],j=l.a.useState(!1),m=Object(i.a)(j,2),x=m[0],O=m[1],g=l.a.useState(!1),y=Object(i.a)(g,2),k=y[0],_=y[1],C=l.a.useState(""),E=Object(i.a)(C,2),S=E[0],w=E[1],D=l.a.useState(!1),T=Object(i.a)(D,2),I=T[0],R=T[1],G=l.a.useState(""),Y=Object(i.a)(G,2),W=Y[0],z=Y[1];return Object(o.useEffect)((function(){!function(n){var t;Object(c.d)(null===e||void 0===e||null===(t=e.counsellor)||void 0===t?void 0:t.id).then((function(e){var n;"UnauthorizedError"===(null===e||void 0===e||null===(n=e.error)||void 0===n?void 0:n.name)&&(R(!0),z("Your session has expired. You will be logged out."));var t=Object(u.c)(e.sessions);v(t)})).catch((function(e){console.log("error",e)}))}()}),[]),Object(A.jsxs)("div",{className:"App",children:[Object(A.jsx)("div",{style:{height:700,margin:"10px 4px 0px 7px"},children:Object(A.jsx)(s.a,{localizer:L,views:{day:!0,week:!0,month:!0},events:r,step:60,defaultDate:new Date,onSelectEvent:function(e){w(e),p(!0)},popup:!0,eventPropGetter:function(e,n,t,i){return{style:{backgroundColor:"completed"===e.session.status?"#efa80d":"cancelled"===e.session.status?"#f60a0a":d()(n)<d()()?"orange":d()(n)>=d()().add(1,"day")?"#3f51b5":"#08ab08"}}}})}),S&&""!==S&&Object(A.jsx)(N,{handleSubmit:function(n){p(!1),_(n),O(!0),function(n){var t;Object(c.d)(null===e||void 0===e||null===(t=e.counsellor)||void 0===t?void 0:t.id).then((function(e){var n=Object(u.c)(e.sessions);v(n)})).catch((function(e){console.log("error",e)}))}()},open:h,event:S,handleClose:function(){return p(!1)}}),Object(A.jsx)(P.a,{open:x,anchorOrigin:{vertical:"top",horizontal:"center"},autoHideDuration:3e3,onClose:function(){O(!1)},children:Object(A.jsx)(M.a,{onClose:function(){O(!1)},variant:"filled",severity:"success",sx:{width:"100%"},children:k})}),Object(A.jsx)(U.a,{open:I,text:W,onConfirmDialogClose:function(){z(""),R(!1)},onYesClick:function(){z(""),R(!1)}})]})}}}]);
//# sourceMappingURL=45.3a0b8d54.chunk.js.map