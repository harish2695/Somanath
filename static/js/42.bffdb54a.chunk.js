(this["webpackJsonpmatx-react"]=this["webpackJsonpmatx-react"]||[]).push([[42],{644:function(e,t,a){"use strict";a(2);var r=a(42),n=a(1);t.a=Object(r.a)(Object(n.jsx)("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close")},659:function(e,t,a){},660:function(e,t,a){"use strict";var r=a(8),n=a(7),i=a(3),o=a(2),s=a(9),c=a(92),l=a(536),u=a(5),d=a(12),m=a(15),b=a(208),j=a(57),p=a(60);function f(e){return Object(j.a)("MuiAlert",e)}var h,g=Object(p.a)("MuiAlert",["root","action","icon","message","filled","filledSuccess","filledInfo","filledWarning","filledError","outlined","outlinedSuccess","outlinedInfo","outlinedWarning","outlinedError","standard","standardSuccess","standardInfo","standardWarning","standardError"]),x=a(557),O=a(42),v=a(1),y=Object(O.a)(Object(v.jsx)("path",{d:"M20,12A8,8 0 0,1 12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4C12.76,4 13.5,4.11 14.2, 4.31L15.77,2.74C14.61,2.26 13.34,2 12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0, 0 22,12M7.91,10.08L6.5,11.5L11,16L21,6L19.59,4.58L11,13.17L7.91,10.08Z"}),"SuccessOutlined"),_=Object(O.a)(Object(v.jsx)("path",{d:"M12 5.99L19.53 19H4.47L12 5.99M12 2L1 21h22L12 2zm1 14h-2v2h2v-2zm0-6h-2v4h2v-4z"}),"ReportProblemOutlined"),w=Object(O.a)(Object(v.jsx)("path",{d:"M11 15h2v2h-2zm0-8h2v6h-2zm.99-5C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}),"ErrorOutline"),C=Object(O.a)(Object(v.jsx)("path",{d:"M11,9H13V7H11M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20, 12C20,16.41 16.41,20 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10, 10 0 0,0 12,2M11,17H13V11H11V17Z"}),"InfoOutlined"),k=a(644),R=["action","children","className","closeText","color","icon","iconMapping","onClose","role","severity","variant"],S=Object(u.a)(b.a,{name:"MuiAlert",slot:"Root",overridesResolver:function(e,t){var a=e.ownerState;return[t.root,t[a.variant],t["".concat(a.variant).concat(Object(m.a)(a.color||a.severity))]]}})((function(e){var t=e.theme,a=e.ownerState,n="light"===t.palette.mode?l.b:l.e,o="light"===t.palette.mode?l.e:l.b,s=a.color||a.severity;return Object(i.a)({},t.typography.body2,{backgroundColor:"transparent",display:"flex",padding:"6px 16px"},s&&"standard"===a.variant&&Object(r.a)({color:n(t.palette[s].light,.6),backgroundColor:o(t.palette[s].light,.9)},"& .".concat(g.icon),{color:"dark"===t.palette.mode?t.palette[s].main:t.palette[s].light}),s&&"outlined"===a.variant&&Object(r.a)({color:n(t.palette[s].light,.6),border:"1px solid ".concat(t.palette[s].light)},"& .".concat(g.icon),{color:"dark"===t.palette.mode?t.palette[s].main:t.palette[s].light}),s&&"filled"===a.variant&&{color:"#fff",fontWeight:t.typography.fontWeightMedium,backgroundColor:"dark"===t.palette.mode?t.palette[s].dark:t.palette[s].main})})),M=Object(u.a)("div",{name:"MuiAlert",slot:"Icon",overridesResolver:function(e,t){return t.icon}})({marginRight:12,padding:"7px 0",display:"flex",fontSize:22,opacity:.9}),E=Object(u.a)("div",{name:"MuiAlert",slot:"Message",overridesResolver:function(e,t){return t.message}})({padding:"8px 0"}),N=Object(u.a)("div",{name:"MuiAlert",slot:"Action",overridesResolver:function(e,t){return t.action}})({display:"flex",alignItems:"flex-start",padding:"4px 0 0 16px",marginLeft:"auto",marginRight:-8}),T={success:Object(v.jsx)(y,{fontSize:"inherit"}),warning:Object(v.jsx)(_,{fontSize:"inherit"}),error:Object(v.jsx)(w,{fontSize:"inherit"}),info:Object(v.jsx)(C,{fontSize:"inherit"})},A=o.forwardRef((function(e,t){var a=Object(d.a)({props:e,name:"MuiAlert"}),r=a.action,o=a.children,l=a.className,u=a.closeText,b=void 0===u?"Close":u,j=a.color,p=a.icon,g=a.iconMapping,O=void 0===g?T:g,y=a.onClose,_=a.role,w=void 0===_?"alert":_,C=a.severity,A=void 0===C?"success":C,z=a.variant,I=void 0===z?"standard":z,L=Object(n.a)(a,R),D=Object(i.a)({},a,{color:j,severity:A,variant:I}),W=function(e){var t=e.variant,a=e.color,r=e.severity,n=e.classes,i={root:["root","".concat(t).concat(Object(m.a)(a||r)),"".concat(t)],icon:["icon"],message:["message"],action:["action"]};return Object(c.a)(i,f,n)}(D);return Object(v.jsxs)(S,Object(i.a)({role:w,elevation:0,ownerState:D,className:Object(s.a)(W.root,l),ref:t},L,{children:[!1!==p?Object(v.jsx)(M,{ownerState:D,className:W.icon,children:p||O[A]||T[A]}):null,Object(v.jsx)(E,{ownerState:D,className:W.message,children:o}),null!=r?Object(v.jsx)(N,{className:W.action,children:r}):null,null==r&&y?Object(v.jsx)(N,{ownerState:D,className:W.action,children:Object(v.jsx)(x.a,{size:"small","aria-label":b,title:b,color:"inherit",onClick:y,children:h||(h=Object(v.jsx)(k.a,{fontSize:"small"}))})}):null]}))}));t.a=A},727:function(e,t,a){},902:function(e,t,a){"use strict";a.r(t);var r=a(6),n=a(45),i=a(13),o=a(8),s=a(33),c=a.n(s),l=a(558),u=a(555),d=a(332),m=a(207),b=a(560),j=a(561),p=a(551),f=a(559),h=a(636),g=a(333),x=a(633),O=a(660),v=a(50),y=a(205),_=a(2),w=a(25),C=a(112),k=(a(94),a(51)),R=a.n(k),S=a(212),M=a(653),E=(a(655),a(659),a(727),a(1)),N=Object(v.a)(y.a)((function(){return{display:"flex",alignItems:"center"}})),T=Object(v.a)(l.a)((function(){return{position:"absolute",top:"6px",left:"25px"}})),A=Object(v.a)("div")((function(e){var t,a=e.theme;return t={margin:"30px"},Object(o.a)(t,a.breakpoints.down("sm"),{margin:"16px"}),Object(o.a)(t,"& .breadcrumb",Object(o.a)({marginBottom:"30px"},a.breakpoints.down("sm"),{marginBottom:"16px"})),t})),z=Object(v.a)(u.a)((function(){return{width:"120px !important",height:"120px !important",border:"2px"}})),I=Object(v.a)(C.TextValidator)((function(){return{width:"100%",marginBottom:"16px"}})),L=Object(v.a)(d.a)((function(){return{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",width:120,height:120,borderRadius:"50%",borderColor:"#3498db"}})),D=Object(v.a)(d.a)((function(){return{display:"block",color:"#fff",marginTop:"20px",width:"86px",backgroundColor:"#e15260","&:hover":{backgroundColor:"#cc2333",color:"#fff"}}}));t.default=function(e){var t=Object(w.f)(),a=Object(_.useState)({firstName:"",lastName:"",email:"",area_code:"",phone_number:"",traumas:[],logo:null,logo_image:"",counsellor_id:"",user_id:"",domain:""}),s=Object(i.a)(a,2),l=s[0],u=s[1],v=Object(_.useState)([]),k=Object(i.a)(v,2),W=k[0],F=k[1],U=Object(_.useState)(!1),V=Object(i.a)(U,2),q=V[0],B=V[1],Q=Object(_.useState)(""),H=Object(i.a)(Q,2),P=H[0],J=H[1],Z=Object(_.useState)(!1),G=Object(i.a)(Z,2),K=G[0],X=G[1],Y=Object(_.useState)(!1),$=Object(i.a)(Y,2),ee=$[0],te=$[1],ae=Object(_.useState)(null),re=Object(i.a)(ae,2),ne=re[0],ie=re[1],oe=Object(_.useState)({status:"success",message:""}),se=Object(i.a)(oe,2),ce=se[0],le=se[1],ue=Object(_.useRef)();function de(e){e.persist(),u(Object(r.a)(Object(r.a)({},l),{},Object(o.a)({},e.target.name,e.target.value)))}Object(_.useEffect)((function(){C.ValidatorForm.addValidationRule("REQUIRED",(function(e){return 0!==e.length}));var e=window.location.href.split("=")[1];return Object(n.a)(c.a.mark((function t(){var a,r;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(S.w)();case 3:if((a=t.sent)&&a.data&&F(a.data),!e){t.next=13;break}return B(!0),t.next=9,Object(S.r)(e);case 9:r=t.sent,console.log("counsellorRest",r),r&&u({firstName:r.first_name,lastName:r.last_name,email:r.email,area_code:r.area_code,phone_number:r.phone_number,username:r.user&&r.user.username||"",logo_image:r.logo_image?(n=r.logo_image,"http://localhost:1337"+n):"",counsellor_id:r.id,user_id:r.user&&r.user.id,traumas:r.traumas.map((function(e){return e.trauma_code})),domain:r.domain}),B(!1);case 13:t.next=19;break;case 15:t.prev=15,t.t0=t.catch(0),B(!1),console.log("err",t.t0);case 19:case"end":return t.stop()}var n}),t,null,[[0,15]])})))(),Object(n.a)(c.a.mark((function e(){var t,a,r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(S.w)();case 3:return(t=e.sent)&&t.data&&F(t.data),e.next=7,Object(S.o)();case 7:a=e.sent,(r=a.roles)&&r.length>0&&r.forEach((function(e){"counsellor"===e.type&&ie(e)})),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),console.log("err",e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})))(),function(){C.ValidatorForm.removeValidationRule("REQUIRED")}}),[]);var me=function(e){return new Promise((function(t){var a=new FileReader;a.readAsDataURL(e),a.onload=function(e){t(e.target.result)},a.onerror=function(e){console.log("Error: ",e)}}))},be=function(){var e=Object(n.a)(c.a.mark((function e(t){var a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.target.files[0],!["image/jpeg","image/jpg","image/png","image/svg","image/svg+xml"].includes(a.type)){e.next=9;break}return e.next=5,me(a);case 5:a.base64=e.sent,u(Object(r.a)(Object(r.a)({},l),{},{logo:a,logo_image:""})),e.next=10;break;case 9:M.b.error("Only files with following extensions are allowed: jpeg, jpg, png, svg",{theme:"colored"});case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),je=function(){var e=Object(n.a)(c.a.mark((function e(t){var a,r,n,i;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(a=new FormData).append("files",t),r="",localStorage.accessToken&&(r=localStorage.accessToken),e.next=6,fetch("http://localhost:1337/api/upload",{method:"post",headers:{authorization:"Bearer "+r},body:a});case 6:return n=e.sent,e.next=9,n.text();case 9:return i=e.sent,e.abrupt("return",JSON.parse(i));case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),pe=function(){var e=Object(n.a)(c.a.mark((function e(t){var a,n,i,o,s,u,d,m,b,j,p;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=l.firstName,n=l.lastName,i=l.email,o=l.area_code,s=l.phone_number,u=l.traumas,d=l.logo,m=l.counsellor_id,0!==u.length){e.next=3;break}return e.abrupt("return");case 3:if(B(!0),!d){e.next=8;break}return e.next=7,je(d);case 7:b=e.sent;case 8:j=u.map((function(e){return W.find((function(t){if(t.attributes.trauma_code===e)return t.id}))})),p={counsellor:{data:{id:m,name:a+" "+n,first_name:a,last_name:n,email:i,area_code:o,phone_number:s,traumas:j,publishedAt:R()().format().split("T")[0]+" "+R()().format().split("T")[1].slice(0,8)}},traumas:j,user:{data:{email:i,confirmed:!0,blocked:!1,role:ne.id}}},d&&(p.counsellor.data.logo_image=b[0].url||""),Object(S.f)(p).then((function(e){B(!1),te(!0),le(Object(r.a)(Object(r.a)({},ce),{},{status:e&&"success"===e.status?"success":"error",message:null===e||void 0===e?void 0:e.message}))})).catch((function(e){B(!1),te(!0),le(Object(r.a)(Object(r.a)({},ce),{},{status:"error",message:"Something went wrong"}))}));case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),fe=l.firstName,he=l.lastName,ge=l.email,xe=l.area_code,Oe=l.phone_number,ve=l.traumas,ye=l.logo,_e=l.logo_image;return Object(E.jsx)(E.Fragment,{children:Object(E.jsxs)(A,{children:[Object(E.jsx)("h1",{style:{marginTop:"0px",marginBottom:"10px",padding:"0px"},children:"Edit Provider"}),Object(E.jsxs)("div",{className:"center-card",children:[Object(E.jsxs)(C.ValidatorForm,{ref:ue,onSubmit:pe,onError:function(){return null},children:[Object(E.jsxs)(m.a,{container:!0,spacing:6,children:[Object(E.jsxs)(m.a,{item:!0,lg:6,md:6,sm:12,xs:12,sx:{mt:2},children:[Object(E.jsx)(I,{autoFocus:!0,margin:"dense",id:"first_name",name:"firstName",label:"First Name*",type:"text",value:fe,onChange:de,fullWidth:!0,validators:["REQUIRED"],errorMessages:["This field is required"]}),Object(E.jsx)(I,{margin:"dense",id:"email",name:"email",label:"Email*",type:"email",value:ge,onChange:de,fullWidth:!0,validators:["REQUIRED","isEmail"],errorMessages:["This field is required","email is not valid"]}),Object(E.jsxs)(b.a,{sx:{mt:2,width:250},error:!ve.length&&!!K,children:[Object(E.jsx)(j.a,{id:0===ve.length&&K?"demo-simple-select-error-label":"open-select-label",children:"Trauma Type*"}),Object(E.jsxs)(p.a,{labelId:"open-select-label",margin:"dense",id:"center_type",name:"traumas",multiple:!0,value:ve,input:Object(E.jsx)(f.a,{label:"Trauma Type"}),style:{borderColor:"#FF3D57"},onChange:function(e){var t=e.target.value;J(0===t.length?"This field is required!":""),u(Object(r.a)(Object(r.a)({},l),{},{traumas:t})),X(!0)},onBlur:function(){return function(){K||X(!0);var e="";0===l.traumas.length&&(e="This field is required!"),J(e)}()},fullWidth:!0,validators:["required"],children:[Object(E.jsx)(h.a,{disabled:!0,value:"",children:Object(E.jsx)("em",{children:"Trauma Type"})}),W&&W.map((function(e,t){return Object(E.jsx)(h.a,{value:e.attributes.trauma_code,children:e.attributes.trauma_name},t)}))]}),P&&Object(E.jsx)("p",{className:"form-err",children:P})]})]}),Object(E.jsxs)(m.a,{item:!0,lg:6,md:6,sm:12,xs:12,sx:{mt:2},children:[Object(E.jsx)(I,{margin:"dense",id:"last_name",name:"lastName",label:"Last Name*",type:"text",value:he,onChange:de,fullWidth:!0,validators:["REQUIRED"],errorMessages:["This field is required"]}),Object(E.jsxs)(m.a,{container:!0,children:[Object(E.jsx)(m.a,{item:!0,xs:3,sm:3,md:3,lg:3,children:Object(E.jsx)(I,{margin:"dense",id:"area_code",name:"area_code",label:"Area Code",type:"text",value:xe,onChange:de,fullWidth:!0,validators:["REQUIRED"],errorMessages:["This field is required"]})}),Object(E.jsx)(m.a,{item:!0,xs:1,sm:1,md:1,lg:1,children:Object(E.jsx)("div",{className:"phone_line",children:"\xa0"})}),Object(E.jsx)(m.a,{item:!0,xs:8,sm:8,md:8,lg:8,children:Object(E.jsx)(I,{margin:"dense",id:"phone_number",name:"phone_number",label:"Phone Number",type:"text",value:Oe,onChange:de,fullWidth:!0,validators:["REQUIRED"],errorMessages:["This field is required"]})})]})]}),Object(E.jsxs)(m.a,{item:!0,lg:12,style:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},children:[ye||_e?Object(E.jsx)(z,{src:ye?ye.base64:_e}):Object(E.jsxs)(L,{variant:"contained",component:"label",children:[Object(E.jsx)(g.a,{children:"file_upload_outlined"}),"Upload Logo",Object(E.jsx)("input",{type:"file",hidden:!0,accept:"image/*",multiple:!0,onChange:be})]}),Object(E.jsx)(m.a,{item:!0,style:{flexDirection:"column"},children:Object(E.jsx)(d.a,{variant:"contained",component:"label",color:"inherit",sx:{marginLeft:"15px",marginTop:"15px",height:"35px",marginBottom:"16px"},onClick:function(){return u(Object(r.a)(Object(r.a)({},l),{},{logo:null,logo_image:""}))},children:"Reset Logo"})})]})]}),Object(E.jsx)("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:Object(E.jsxs)(N,{flexWrap:"wrap",children:[Object(E.jsxs)(y.a,{mr:2,position:"relative",children:[Object(E.jsx)(d.a,{variant:"contained",color:"primary",disabled:q,type:"submit",children:"Submit"}),q&&Object(E.jsx)(T,{size:24,className:"buttonProgress"})]}),Object(E.jsx)(D,{sx:{marginBottom:2},onClick:function(){return t(-1)},children:"Cancel"})]})})]}),Object(E.jsx)(x.a,{open:ee,anchorOrigin:{vertical:"top",horizontal:"center"},autoHideDuration:3e3,onClose:function(){te(!1),t("/counsellors")},children:Object(E.jsx)(O.a,{onClose:function(){te(!1),t("/counsellors")},variant:"filled",severity:ce.status,sx:{width:"100%"},children:ce.message})})]})]})})}}}]);
//# sourceMappingURL=42.bffdb54a.chunk.js.map