(this["webpackJsonpmatx-react"]=this["webpackJsonpmatx-react"]||[]).push([[32],{643:function(e,t,n){"use strict";n(2);var a=n(332),c=n(50),r=n(331),i=n(334),o=n(205),l=n(25),s=n(1),u={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:400,bgcolor:"background.paper",border:"2px solid #fff",boxShadow:24,p:4};Object(c.a)(a.a)((function(){return{display:"block",color:"#fff",marginTop:"20px",width:"86px",backgroundColor:"#e15260","&:hover":{backgroundColor:"#cc2333",color:"#fff"}}}));t.a=function(e){var t=e.open,n=e.onConfirmDialogClose,c=e.text,d=(e.onYesClick,Object(l.f)()),b=function(){n(),localStorage.removeItem("accessToken"),d("/session/signin")};return Object(s.jsx)("div",{children:Object(s.jsx)(r.a,{keepMounted:!0,open:t,onClose:function(){return b()},"aria-labelledby":"keep-mounted-modal-title","aria-describedby":"keep-mounted-modal-description",children:Object(s.jsxs)(o.a,{sx:u,children:[Object(s.jsx)(i.a,{id:"keep-mounted-modal-title",variant:"h6",component:"h2",sx:{color:"#333"},children:c}),Object(s.jsx)("div",{style:{display:"flex",justifyContent:"flex-end",alignItems:"center",gap:"1rem"},children:Object(s.jsx)(o.a,{position:"relative",sx:{display:"block",marginTop:"20px"},children:Object(s.jsx)(a.a,{color:"primary",variant:"contained",onClick:function(){return b()},children:"Ok"})})})]})})})}},645:function(e,t,n){"use strict";n.d(t,"c",(function(){return c})),n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return i})),n.d(t,"e",(function(){return o})),n.d(t,"h",(function(){return l})),n.d(t,"l",(function(){return s})),n.d(t,"n",(function(){return u})),n.d(t,"j",(function(){return d})),n.d(t,"m",(function(){return b})),n.d(t,"d",(function(){return j})),n.d(t,"g",(function(){return h})),n.d(t,"i",(function(){return f})),n.d(t,"f",(function(){return O})),n.d(t,"k",(function(){return m}));var a=n(26),c=function(e,t){var n="/api/clients?pagination[page]=".concat(e,"&counsellor=").concat(t);return Object(a.b)("GET",n).then((function(e){return e})).then((function(e){return e}))},r=function(e,t){var n="/api/centers?pagination[page]=".concat(e,"&counsellor=").concat(t);return Object(a.b)("GET",n).then((function(e){return e})).then((function(e){return e}))},i=function(e){var t="/api/counsellors?pagination[page]=".concat(e);return Object(a.b)("GET",t).then((function(e){return e})).catch((function(e){return e}))},o=function(e,t){var n="/api/sessions?pagination[page]=".concat(e,"&counsellor=").concat(t);return Object(a.b)("GET",n).then((function(e){return e})).then((function(e){return e}))},l=function(e,t,n,c){console.log(c);var r="/api/sessions?filter=".concat(e,"&counsellor=").concat(n,"&filterType=").concat(c);return console.log(e),Object(a.b)("GET",r).then((function(e){return e})).catch((function(e){return e}))},s=function(e,t){var n="/api/sessions?find=".concat(e);return Object(a.b)("GET",n).then((function(e){return e})).catch((function(e){return e}))},u=function(e,t){var n="/api/sessions/".concat(e);return Object(a.b)("PUT",n,t).then((function(e){return e})).then((function(e){return e}))},d=function(e,t){var n="/api/clients?find=".concat(e);return Object(a.b)("GET",n).then((function(e){return e})).catch((function(e){return e}))},b=function(e,t){var n="/api/counsellors?pagination[page]=".concat(t,"&search=").concat(e);return Object(a.b)("GET",n).then((function(e){return e})).catch((function(e){return e}))},j=function(e){var t="/api/counsellors/".concat(e);return Object(a.b)("GET",t).then((function(e){return e})).catch((function(e){return e}))},h=function(e,t,n,c){console.log(c);var r="/api/clients?filter=".concat(e,"&counsellor=").concat(n,"&filterType=").concat(c);return console.log(e),Object(a.b)("GET",r).then((function(e){return e})).catch((function(e){return e}))},f=function(e,t,n){var c="/api/centers?search=".concat(e,"&counsellor=").concat(n);return console.log(e),Object(a.b)("GET",c).then((function(e){return e})).catch((function(e){return e}))},O=function(e,t,n){var c="/api/centers?filter=".concat(e,"&counsellor=").concat(n);return console.log(e),Object(a.b)("GET",c).then((function(e){return e})).catch((function(e){return e}))},m=function(e){var t=e&&e.search||"",n=e&&e.page||1,c=e&&e.centerName,r="/api/counsellors?search=".concat(t,"&pagination[page]=").concat(n);return c&&(r+="&centerName=".concat(c)),Object(a.b)("GET",r).then((function(e){return e})).catch((function(e){return e}))}},667:function(e,t,n){"use strict";var a=n(13),c=n(2),r=n.n(c),i=n(332),o=n(627),l=n(628),s=n(637),u=n(638),d=n(330),b=n(560),j=n(561),h=n(551),f=n(636),O=n(207),m=n(309),p=n(639),x=n(50),g=n(51),v=n.n(g),y=n(656),C=n.n(y),S=n(1);Object(x.a)(i.a)((function(){return{display:"block",color:"#fff",width:"86px",backgroundColor:"#e15260","&:hover":{backgroundColor:"#cc2333",color:"#fff"}}}));t.a=function(e){var t=Object(c.useState)(""),n=Object(a.a)(t,2),x=n[0],g=n[1],y=C()([]),A=Object(a.a)(y,3),k=A[0],w=A[1],E=A[2],D=Object(c.useState)(""),R=Object(a.a)(D,2),I=R[0],V=R[1],_=Object(c.useState)([]),T=Object(a.a)(_,2),N=T[0],Y=T[1],G=Object(c.useState)(""),P=Object(a.a)(G,2),F=(P[0],P[1]),M=function(){V(""),w([]),Y([]),e.handleClose()};Object(c.useEffect)((function(){e.data&&(g(e.data.clientId),F(e.data.sessionId),e.multipleSession&&e.data.notes&&Y(e.data.notes),e.multipleSession||(e.data.notes&&e.data.notes.sort((function(e,t){return new Date(t.updatedAt)-new Date(e.updatedAt)})),w(e.data.notes)))}),[e]);return Object(S.jsx)(r.a.Fragment,{children:Object(S.jsxs)(o.a,{fullWidth:!0,maxWidth:"sm",open:e.open,onClose:M,children:[Object(S.jsx)(l.a,{children:"Notes"}),Object(S.jsxs)(s.a,{children:[Object(S.jsxs)(u.a,{children:["Client : ",x]}),e.multipleSession&&Object(S.jsx)(d.a,{noValidate:!0,component:"form",lg:12,md:6,sm:12,xs:12,sx:{display:"flex",flexDirection:"column",justifyContent:"center",width:"50%"},children:Object(S.jsxs)(b.a,{sx:{mt:2,minWidth:120},children:[Object(S.jsx)(j.a,{htmlFor:"max-width",children:"Select Session"}),Object(S.jsx)(h.a,{autoFocus:!0,value:I,onChange:function(e){V(e.target.value);var t=N.filter((function(t){return t.attributes.session_id==e.target.value}));t&&(t[0].attributes.notes.data.sort((function(e,t){return new Date(t.updatedAt)-new Date(e.updatedAt)})),w(function(e){var t=[];return e&&e.map((function(e){t.push(e.attributes)})),t}(t[0].attributes.notes.data))),console.log(E.current)},label:"Select Session",inputProps:{name:"max-width",id:"max-width"},children:N&&N.map((function(e,t){return Object(S.jsx)(f.a,{value:e.attributes.session_id,children:"".concat(e.attributes.session_id," - ").concat(v()(e.attributes.scheduled_at).format("DD MMMM, YYYY"))},t)}))})]})}),Object(S.jsxs)(u.a,{children:[E.current&&E.current.map((function(e,t){return Object(S.jsxs)(O.a,{item:!0,lg:12,md:6,sm:12,xs:12,sx:{mt:2},children:[Object(S.jsx)(m.a,{fullWidth:!0,multiline:!0,rows:3,inputProps:{readOnly:!0},defaultValue:e.details},"".concat(t)),Object(S.jsxs)(O.a,{container:!0,style:{display:"flex",justifyContent:"space-between"},children:[Object(S.jsx)(O.a,{children:e.added_by}),Object(S.jsx)(O.a,{children:v()(e.updatedAt).format("DD/MM/YYYY hh:mm A")})]})]})})),!k&&N&&Object(S.jsx)(O.a,{mt:2,children:"No Record Found"})]})]}),Object(S.jsx)(p.a,{children:Object(S.jsx)(i.a,{variant:"contained",type:"submit",onClick:M,children:"Close"})})]})})}},669:function(e,t,n){"use strict";var a=n(13),c=(n(2),n(636)),r=n(207),i=n(330),o=n(560),l=n(561),s=n(551),u=n(332),d=n(309),b=n(213),j=n.n(b),h=(n(341),n(1));t.a=function(e){var t=function(t){return"Gender"==t?e.genderValue.map((function(e,t){return Object(h.jsx)(c.a,{value:e,children:e},t)})):e.filterValue.map((function(e,t){return Object(h.jsx)(c.a,{value:e,children:e},t)}))};return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsxs)(r.a,{sx:{marginTop:"0px",marginBottom:"20px"},container:!0,rowSpacing:3,columnSpacing:6,children:[Object(h.jsx)(r.a,{item:!0,lg:6,md:6,sm:12,xs:12,children:Object(h.jsx)(d.a,{sx:{width:"100%"},label:e.searchLabel,variant:"outlined",onChange:e.handleSearch,placeholder:e.searchLabel,type:"text",value:e.searchValue,autoFocus:!0,InputProps:{startAdornment:Object(h.jsx)(j.a,{})}})}),e.multiFilter?Object.entries(e.type).map((function(n,c){var u=Object(a.a)(n,2),d=u[0];return u[1],Object(h.jsx)(r.a,{item:!0,lg:6,md:6,sm:12,xs:12,children:Object(h.jsx)(i.a,{children:Object(h.jsxs)(o.a,{fullWidth:!0,children:[Object(h.jsx)(l.a,{sx:{backgroundColor:"#fafafa",padding:"0.25rem"},children:d}),Object(h.jsx)(s.a,{id:"demo-simple-select",value:"Gender"==d?e.genderSelectValue:e.selectValue,label:"Age",onChange:function(t){return e.handleChange(t,d)},placeholder:"Search Center",children:t(d)})]})})},"".concat(c))})):Object(h.jsx)(r.a,{item:!0,lg:6,md:6,sm:12,xs:12,children:Object(h.jsx)(i.a,{children:Object(h.jsxs)(o.a,{fullWidth:!0,children:[Object(h.jsx)(l.a,{sx:{backgroundColor:"#fafafa",padding:"0.25rem"},children:e.label}),Object(h.jsx)(s.a,{id:"demo-simple-select",value:e.selectValue,label:"Age",onChange:function(t){return e.handleChange(t)},placeholder:"Search Center",children:e.filterValue&&e.filterValue.map((function(e,t){return Object(h.jsx)(c.a,{value:e,children:e},t)}))})]})})})]}),Object(h.jsx)(o.a,{sx:{marginBottom:"20px",display:"flex",width:"100%"},children:Object(h.jsx)(u.a,{color:"primary",variant:"contained",onClick:e.handleReset,sx:{alignSelf:"flex-end"},children:"Reset"})})]})}},680:function(e,t,n){"use strict";var a=n(13),c=n(2),r=n.n(c),i=n(557),o=n(692),l=n(332),s=n(711),u=n(640),d=n(207),b=n(571),j=n.n(b),h=n(573),f=n.n(h),O=n(219),m=n(667),p=n(558),x=n(331),g=n(330),v=n(334),y=n(309),C=n(50),S=n(112),A=n(1),k=Object(C.a)(p.a)((function(){return{position:"absolute",bottom:"38px",right:"60px"}})),w={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",bgcolor:"background.paper",border:"2px solid #fff",boxShadow:24,p:4,borderRadius:"15px"},E=function(e){var t=Object(c.useState)(""),n=Object(a.a)(t,2),r=n[0],i=n[1],o=Object(c.useState)(""),s=Object(a.a)(o,2),u=s[0],b=s[1],j=Object(c.useState)(""),h=Object(a.a)(j,2),f=h[0],O=h[1],m=Object(c.useState)(),p=Object(a.a)(m,2),C=p[0],E=p[1];return Object(c.useEffect)((function(){return S.ValidatorForm.addValidationRule("REQUIRED",(function(e){return 0!==e.length})),e.data&&(console.log(e.data),i(e.data.sessionId),O(e.data.center),b(e.data.clientId),E(e.data)),function(){S.ValidatorForm.removeValidationRule("REQUIRED")}}),[e]),Object(A.jsx)("div",{children:Object(A.jsx)(x.a,{keepMounted:!0,open:e.open,onClose:e.handleClose,"aria-labelledby":"keep-mounted-modal-title","aria-describedby":"keep-mounted-modal-description",children:Object(A.jsx)(g.a,{sx:w,children:Object(A.jsxs)(S.ValidatorForm,{onSubmit:function(t){return function(t,n){e.handleSubmit(t,n)}(t,e)},onError:function(){return null},children:[Object(A.jsx)(v.a,{id:"keep-mounted-modal-title",variant:"h6",component:"h2",children:"Confirm this appointment"}),Object(A.jsxs)(v.a,{id:"keep-mounted-modal-title",variant:"body2",component:"h6",children:["Appointment ID : ",r]}),Object(A.jsxs)(v.a,{id:"keep-mounted-modal-title",variant:"body2",component:"h6",children:["Client ID : ",u]}),Object(A.jsxs)(v.a,{id:"keep-mounted-modal-title",variant:"body2",component:"h6",children:["Center : ",f]}),Object(A.jsx)(g.a,{sx:{minWidth:500,mb:2},children:C&&Object(A.jsx)(d.a,{container:!0,spacing:3,children:Object(A.jsx)(d.a,{item:!0,lg:12,md:6,sm:12,xs:12,sx:{mt:2},children:Object(A.jsx)(y.a,{fullWidth:!0,label:"Scheduled At",inputProps:{readOnly:!0},value:C.scheduledAt})})})}),Object(A.jsxs)(g.a,{sx:{display:"table",marginLeft:"auto",marginRight:"0px"},children:[Object(A.jsx)(l.a,{color:"error",variant:"contained",onClick:function(){e.handleClose()},children:"Cancel"}),Object(A.jsx)(l.a,{disabled:e.loading,sx:{ml:2},type:"submit",variant:"contained",children:"Accept"}),e.loading&&Object(A.jsx)(k,{size:24,className:"buttonProgress"})]})]})})})})},D=(n(51),Object(C.a)(p.a)((function(){return{position:"absolute",bottom:"38px",right:"60px"}}))),R={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",bgcolor:"background.paper",border:"2px solid #fff",boxShadow:24,p:4,borderRadius:"15px"},I=function(e){var t=Object(c.useState)(""),n=Object(a.a)(t,2),r=n[0],i=n[1],o=Object(c.useState)(""),s=Object(a.a)(o,2),u=s[0],b=s[1],j=Object(c.useState)(""),h=Object(a.a)(j,2),f=h[0],O=h[1],m=Object(c.useState)(!1),p=Object(a.a)(m,2),C=(p[0],p[1],Object(c.useState)()),k=Object(a.a)(C,2),w=k[0],E=k[1],I=Object(c.useState)(""),V=Object(a.a)(I,2),_=V[0],T=V[1],N=Object(c.useState)(!1),Y=Object(a.a)(N,2),G=Y[0],P=Y[1];return Object(c.useEffect)((function(){return S.ValidatorForm.addValidationRule("REQUIRED",(function(e){return 0!==e.length})),e.data&&(console.log(e.data),i(e.data.sessionId),O(e.data.center),b(e.data.clientId),E(e.data),e.data&&e.data.disabled&&T("Appointment cancelled, time slot not available.")),function(){S.ValidatorForm.removeValidationRule("REQUIRED")}}),[e]),Object(A.jsx)("div",{children:Object(A.jsx)(x.a,{keepMounted:!0,open:e.open,onClose:e.handleClose,"aria-labelledby":"keep-mounted-modal-title","aria-describedby":"keep-mounted-modal-description",children:Object(A.jsx)(g.a,{sx:R,children:Object(A.jsxs)(S.ValidatorForm,{onSubmit:function(t){return function(t,n){console.log(_),0!==_.length?(P(!1),e.handleSubmit(n,_)):P(!0)}(0,e)},onError:function(){return null},children:[Object(A.jsx)(v.a,{id:"keep-mounted-modal-title",variant:"h6",component:"h2",children:"Reject this appointment"}),Object(A.jsxs)(v.a,{id:"keep-mounted-modal-title",variant:"body2",component:"h6",children:["Appointment ID : ",r]}),Object(A.jsxs)(v.a,{id:"keep-mounted-modal-title",variant:"body2",component:"h6",children:["Client ID : ",u]}),Object(A.jsxs)(v.a,{id:"keep-mounted-modal-title",variant:"body2",component:"h6",children:["Center : ",f]}),Object(A.jsx)(g.a,{sx:{minWidth:500,mb:2},children:w&&Object(A.jsxs)(d.a,{container:!0,spacing:3,children:[Object(A.jsx)(d.a,{item:!0,lg:12,md:6,sm:12,xs:12,sx:{mt:2},children:Object(A.jsx)(y.a,{fullWidth:!0,label:"Scheduled At",inputProps:{readOnly:!0},value:w.scheduledAt})}),Object(A.jsx)(d.a,{item:!0,lg:12,md:6,sm:12,xs:12,children:Object(A.jsx)(y.a,{fullWidth:!0,label:"Reason",multiline:!0,rows:4,inputProps:{readOnly:w.disabled},value:_,onChange:function(e){return T(e.target.value)},validators:["REQUIRED"],errorMessages:["This field is required"]})}),G&&Object(A.jsx)("span",{style:{marginLeft:20,color:"red"},children:"Error: Please add the reason of cancellation"})]})}),Object(A.jsxs)(g.a,{sx:{display:"table",marginLeft:"auto",marginRight:"0px"},children:[Object(A.jsx)(l.a,{color:"error",variant:"contained",onClick:function(){T(""),P(""),e.handleClose()},children:"Cancel"}),Object(A.jsx)(l.a,{disabled:e.loading,sx:{ml:2},type:"submit",variant:"contained",children:"Reject"}),e.loading&&Object(A.jsx)(D,{size:24,className:"buttonProgress"})]})]})})})})},V=n(645),_=n(572),T=n.n(_);t.a=function(e){var t=Object(c.useState)([]),n=Object(a.a)(t,2),b=n[0],h=n[1],p=Object(c.useState)(),x=Object(a.a)(p,2),g=x[0],v=x[1],y=Object(c.useState)(),C=Object(a.a)(y,2),S=C[0],k=C[1],w=Object(c.useState)(!1),D=Object(a.a)(w,2),R=D[0],_=D[1],N=Object(c.useState)(!1),Y=Object(a.a)(N,2),G=Y[0],P=Y[1],F=Object(c.useState)(!1),M=Object(a.a)(F,2),L=M[0],W=M[1],U=Object(c.useState)(!1),z=Object(a.a)(U,2),B=z[0],H=z[1],Q=r.a.useState(10),J=Object(a.a)(Q,2),q=J[0],K=J[1],X=Object(c.useState)(0),Z=Object(a.a)(X,2),$=Z[0],ee=Z[1],te=function(e,t){h(e),_(t)},ne=function(e,t){v(e),P(t)},ae=function(e,t){k(e),W(t)},ce=function(t,n){var a=null;switch(t){case"view_notes":a=function(t){return Object(A.jsxs)("div",{style:{display:"flex",flexDirection:"row",justifyContent:"center"},children:[Object(A.jsx)(i.a,{"aria-label":"view",color:"primary",onClick:function(){return te(t,!0)},children:Object(A.jsx)(o.a,{badgeContent:t.notes?t.notes.length:0,color:"secondary",children:Object(A.jsx)(j.a,{})})}),e.addNotes&&Object(A.jsx)(i.a,{"aria-label":"view",color:"primary",onClick:function(){return e.handleOpenNewNotes(t,!0)},children:Object(A.jsx)(T.a,{})})]})}(n);break;case"scheduledAt":a=function(t){return"scheduled"===t.status?Object(A.jsxs)("div",{style:{marginLeft:"1rem"},children:[t.scheduledAt,Object(A.jsx)(i.a,{"aria-label":"view",color:"primary",children:"counsellor"===e.user.role.type&&Object(A.jsx)(f.a,{})})]}):"pending"===t.status?Object(A.jsxs)("div",{children:[Object(A.jsx)("div",{style:{marginBottom:10},children:"".concat(t.scheduledAt)}),Object(A.jsxs)("div",{style:{display:"flex",flexDirection:"row",justifyContent:"center"},children:[Object(A.jsx)(l.a,{disabled:t.disabled,variant:"contained",color:"success",style:{marginRight:5},onClick:function(){return ne(t,!0)},children:Object(A.jsx)("div",{style:{fontSize:".8rem"},children:"Accept"})}),Object(A.jsx)(l.a,{variant:"contained",color:"error",onClick:function(e){return ae(t,!0)},children:Object(A.jsx)("div",{style:{fontSize:".8rem"},children:"Reject"})})]})]}):"cancelled"===t.status?Object(A.jsxs)("div",{style:{marginLeft:"1rem"},children:["".concat(t.scheduledAt),Object(A.jsx)(s.a,{label:"Cancelled",size:"small",variant:"outlined",color:"error"})]}):"missed"===t.status?Object(A.jsxs)("div",{style:{marginLeft:"1rem"},children:["".concat(t.scheduledAt),Object(A.jsx)(s.a,{label:"Missed",size:"small",variant:"outlined",color:"error"})]}):Object(A.jsxs)("div",{style:{marginLeft:"1rem"},children:[t.scheduledAt,Object(A.jsx)(s.a,{label:"completed"===t.status?"Completed":t.status,size:"small",variant:"outlined",color:"success"})]})}(n);break;default:a=n}return a};return Object(A.jsx)(A.Fragment,{children:Object(A.jsxs)(d.a,{children:["Provider"===e.role?Object(A.jsx)(d.a,{children:Object(A.jsx)(O.a,{page:$,handleChangePage:function(e,t){ee(t)},rowsPerPage:q,handleChangeRowsPerPage:function(e){K(+e.target.value),ee(0)},rows:e.data,CustomHeadCell:function(e){for(var t=e.meta,n=[],c=Object.entries(t),r=0,i=Object.entries(c);r<i.length;r++){var o=Object(a.a)(i[r],2),l=o[0],s=Object(a.a)(o[1],2),d=s[0],b=s[1];"id"!==d&&n.push(Object(A.jsx)(u.a,{width:"scheduledAt"===d?140:60,align:"center",className:"text-style",children:b},l))}return n},CustomBodyCell:function(e){for(var t=e.row,n=[],c=Object.entries(t),r=0,i=Object.entries(c);r<i.length;r++){var o=Object(a.a)(i[r],2),l=o[0],s=Object(a.a)(o[1],2),d=s[0],b=s[1];"id"!==d&&n.push(Object(A.jsx)(u.a,{className:"text-style",component:"th",scope:"row",align:"center",children:ce(d,b)},l))}return n}})}):Object(A.jsx)(d.a,{}),Object(A.jsx)(m.a,{open:R,data:b,multipleSession:!1,handleClose:function(){te(null,!1)}}),Object(A.jsx)(E,{open:G,data:g,handleClose:function(){return ne(null,!1)},handleSubmit:function(t,n){H(!0);Object(V.n)(n.data.id,{data:{status:"scheduled"}}).then((function(t){H(!1),P(!1),e.fetchData($,e.user.counsellor.id)})).catch((function(e){return console.log(e)}))},loading:B}),Object(A.jsx)(I,{open:L,data:S,handleClose:function(){return ae(null,!1)},handleSubmit:function(t,n){H(!0);var a={data:{status:"cancelled",cancell_reason:n}};Object(V.n)(t.data.id,a).then((function(t){t&&(W(!1),e.fetchData($,e.user.counsellor.id)),H(!1)})).catch((function(e){return console.log(e)}))},loading:B})]})})}},700:function(e,t,n){"use strict";n.d(t,"a",(function(){return h}));var a=n(45),c=n(6),r=n(13),i=n(33),o=n.n(i),l=n(2),s=n(656),u=n.n(s),d=n(669),b=n(95),j=n(1),h=function(e){var t=e.searchClient,n=e.filterClient,i=e.fetchClientList,s=e.searchResult,h=e.page,f=Object(b.a)().user,O=Object(l.useState)({Gender:"All",Ethnicity:"All"}),m=Object(r.a)(O,2),p=m[0],x=m[1],g=u()({search:"",ethnicity:"All",gender:"All"}),v=Object(r.a)(g,3),y=v[0],C=v[1],S=v[2],A=Object(l.useState)(["All","American Indian","Alaska Native","Asian","Black or African American","Hispanic or Latino","Native Hawaiian","Pacific Islander","White","Unknown"]),k=Object(r.a)(A,2),w=k[0],E=(k[1],Object(l.useState)(["All","Male","Female","Other"])),D=Object(r.a)(E,2),R=D[0],I=(D[1],function(){var e=Object(a.a)(o.a.mark((function e(n){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=n.target.value,C(Object(c.a)(Object(c.a)({},y),{},{search:a})),a&&a.length>2?(t(a,p,h),s(!0)):""===a&&(i(h,f.counsellor.id),s(!1));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());return Object(j.jsx)(d.a,{handleSearch:I,handleChange:function(e,t){var a=e.target.value;"Gender"==t?C(Object(c.a)(Object(c.a)({},y),{},{gender:a})):"Ethnicity"==t&&C(Object(c.a)(Object(c.a)({},y),{},{ethnicity:a})),"All"!==a?(s(!0),n(a,h,t)):(s(!1),i(h,f.counsellor.id))},filterValue:w,genderValue:R,multiFilter:!0,selectValue:S.current.ethnicity,genderSelectValue:S.current.gender,searchValue:S.current.search,label:"Ethnicity",searchLabel:"Search Client",type:p,handleReset:function(){x({Gender:"All",Ethnicity:"All"}),C({search:"",ethnicity:"All",gender:"All"}),i(h,f.counsellor.id)}})}},701:function(e,t,n){},910:function(e,t,n){"use strict";n.r(t);var a=n(45),c=n(13),r=n(33),i=n.n(r),o=n(2),l=n(207),s=n(51),u=n.n(s),d=n(95),b=n(25),j=n(94),h=n(700),f=n(680),O=n(135),m=n(645),p=n(73),x=n(643),g=(n(701),n(1));t.default=function(){Object(b.f)();var e=Object(d.a)().user,t=Object(o.useState)(!1),n=Object(c.a)(t,2),r=n[0],s=n[1],v=Object(o.useState)(),y=Object(c.a)(v,2),C=y[0],S=y[1],A=Object(o.useState)(!1),k=Object(c.a)(A,2),w=(k[0],k[1]),E=Object(o.useState)(0),D=Object(c.a)(E,2),R=D[0],I=(D[1],Object(o.useState)(!1)),V=Object(c.a)(I,2),_=V[0],T=V[1],N=Object(o.useState)(""),Y=Object(c.a)(N,2),G=Y[0],P=Y[1],F=function(){var e=Object(a.a)(i.a.mark((function e(t,n){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s(!0),Object(m.e)(t,n).then((function(e){var t;if("UnauthorizedError"===(null===e||void 0===e||null===(t=e.error)||void 0===t?void 0:t.name)&&(s(!1),T(!0),P("Your session has expired. You will be logged out.")),e){s(!1),console.log(e);var n=[],a=u()().startOf("minute");e.data.map((function(t){if(u()(u()(t.attributes.scheduled_at).format("x"),"x").isAfter(a)){var c="pending"===t.attributes.status&&Object(p.a)(t,e.data)||!1;t.disabled=c.length>0,n.push(t)}})),n.sort((function(e,t){return new Date(e.updatedAt)-new Date(t.updatedAt)})),S(L(n))}})).catch((function(e){return console.log(e)}));case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),M=function(e,t,n){var a=e.attributes?e.attributes:null;return{id:e.id,status:a.status,scheduledAt:"".concat(u()(a.scheduled_at).format("DD MMMM, YYYY hh:mm A")),sessionId:a.session_id,clientId:t,center:n,disabled:e.disabled}},L=function(e){var t=[];return console.log(e),e.forEach((function(e){var n,a,c,r,i=null!==(n=e.attributes.client)&&void 0!==n&&n.data?null===(a=e.attributes.client)||void 0===a?void 0:a.data.attributes:null,o=null!==(c=e.attributes.center)&&void 0!==c&&c.data?e.attributes.center.data.attributes:null,l=e.attributes?e.attributes:null,s=e.attributes.notes?e.attributes.notes:null,u=i.traumas?function(e){return e.map((function(e){return e.attributes.trauma_code})).join(", ")}(i.traumas.data):"",d={id:e.id,clientId:i.client_id,clientName:i.name,center:o?o.name:"",gender:i.gender_bio,traumas:u,ethnicity:i.ethnicity?i.ethnicity:"",sessionHours:l.duration?Object(p.e)(l.duration):"0",scheduledAt:M(e,i.client_id,o.name),view_notes:{clientId:i.client_id,clientName:i.name,sessionId:l.session_id?l.session_id:"-",center_id:o?o.center_id:"-",notes:(null===s||void 0===s||null===(r=s.data)||void 0===r?void 0:r.length)>0?W(null===s||void 0===s?void 0:s.data):""}};t.push(d)})),t.meta={id:"ID",clientId:"Client ID",clientName:"Record Name",center:"Center",gender:"Birth Gender",traumas:"Trauma",ethnicity:"Ethnicity",sessionHours:"Duration",scheduledAt:"Scheduled",view_notes:"Notes"},t};function W(e){var t=[];return e&&e.map((function(e){t.push(e.attributes)})),t}return Object(o.useEffect)((function(){F(R,e.counsellor.id)}),[]),Object(g.jsxs)(l.a,{className:"client-container",children:[Object(g.jsx)(l.a,{className:"client-breadcrumb",children:Object(g.jsx)(j.b,{routeSegments:[{name:"Upcoming Appointments"}]})}),Object(g.jsx)(h.a,{filterClient:function(t,n,a){s(!0),Object(m.h)(t,n,e.counsellor.id,a).then((function(e){var t;s(!1),"UnauthorizedError"===(null===e||void 0===e||null===(t=e.error)||void 0===t?void 0:t.name)&&(T(!0),P("Your session has expired. You will be logged out."));var n=[],a=u()().startOf("hour");e.data.map((function(e){u()(u()(e.attributes.scheduled_at).format("x"),"x").isAfter(a)&&n.push(e)})),n.sort((function(e,t){return new Date(e.updatedAt)-new Date(t.updatedAt)})),S(L(n))})).catch((function(e){console.log("error",e)}))},fetchClientList:F,searchResult:w,searchClient:function(e,t){s(!0),Object(m.l)(e,t).then((function(e){var t;s(!1),"UnauthorizedError"===(null===e||void 0===e||null===(t=e.error)||void 0===t?void 0:t.name)&&(T(!0),P("Your session has expired. You will be logged out."));var n=[],a=u()().startOf("hour");e.data.map((function(e){u()(u()(e.attributes.scheduled_at).format("x"),"x").isAfter(a)&&n.push(e)})),n.sort((function(e,t){return new Date(e.updatedAt)-new Date(t.updatedAt)})),S(L(n))})).catch((function(e){console.log("error",e)}))},page:R}),C&&Object(g.jsx)(f.a,{role:e.role.name,data:C,loading:s,fetchData:F,user:e}),r&&Object(g.jsx)(O.a,{}),Object(g.jsx)(x.a,{open:_,text:G,onConfirmDialogClose:function(){P(""),T(!1)},onYesClick:function(){P(""),T(!1)}})]})}}}]);
//# sourceMappingURL=32.82b6c146.chunk.js.map