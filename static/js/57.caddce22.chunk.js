(this["webpackJsonpmatx-react"]=this["webpackJsonpmatx-react"]||[]).push([[57],{643:function(e,t,n){"use strict";n(2);var a=n(332),r=n(50),i=n(331),c=n(334),s=n(205),o=n(25),l=n(1),u={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:400,bgcolor:"background.paper",border:"2px solid #fff",boxShadow:24,p:4};Object(r.a)(a.a)((function(){return{display:"block",color:"#fff",marginTop:"20px",width:"86px",backgroundColor:"#e15260","&:hover":{backgroundColor:"#cc2333",color:"#fff"}}}));t.a=function(e){var t=e.open,n=e.onConfirmDialogClose,r=e.text,d=(e.onYesClick,Object(o.f)()),b=function(){n(),localStorage.removeItem("accessToken"),d("/session/signin")};return Object(l.jsx)("div",{children:Object(l.jsx)(i.a,{keepMounted:!0,open:t,onClose:function(){return b()},"aria-labelledby":"keep-mounted-modal-title","aria-describedby":"keep-mounted-modal-description",children:Object(l.jsxs)(s.a,{sx:u,children:[Object(l.jsx)(c.a,{id:"keep-mounted-modal-title",variant:"h6",component:"h2",sx:{color:"#333"},children:r}),Object(l.jsx)("div",{style:{display:"flex",justifyContent:"flex-end",alignItems:"center",gap:"1rem"},children:Object(l.jsx)(s.a,{position:"relative",sx:{display:"block",marginTop:"20px"},children:Object(l.jsx)(a.a,{color:"primary",variant:"contained",onClick:function(){return b()},children:"Ok"})})})]})})})}},740:function(e,t,n){},900:function(e,t,n){"use strict";n.r(t);var a=n(6),r=n(45),i=n(13),c=n(33),s=n.n(c),o=n(207),l=n(332),u=n(330),d=n(560),b=n(561),v=n(551),j=n(636),f=n(633),p=n(660),x=n(309),O=n(25),h=n(213),m=n.n(h),g=n(2),k=(n(740),n(94)),C=n(672),w=n(662),y=n(795),S=(n(212),n(645),n(135)),A=n(95),D=n(646),Y=n(796),E=n(643),N=n(1);t.default=function(){var e=Object(A.a)().user,t=Object(O.f)(),n=Object(g.useState)([]),c=Object(i.a)(n,2),h=c[0],P=c[1],z=Object(g.useState)(!1),I=Object(i.a)(z,2),T=I[0],_=I[1],F=Object(g.useState)({}),H=Object(i.a)(F,2),U=H[0],J=H[1],R=Object(g.useState)(!1),W=Object(i.a)(R,2),B=W[0],L=W[1],M=Object(g.useState)(!1),q=Object(i.a)(M,2),G=q[0],K=q[1],Q=Object(g.useState)(""),V=Object(i.a)(Q,2),X=V[0],Z=V[1],$=Object(g.useState)("All"),ee=Object(i.a)($,2),te=ee[0],ne=ee[1],ae=Object(g.useState)(!1),re=Object(i.a)(ae,2),ie=re[0],ce=re[1],se=Object(g.useState)(null),oe=Object(i.a)(se,2),le=oe[0],ue=oe[1],de=Object(g.useState)(null),be=Object(i.a)(de,2),ve=be[0],je=be[1],fe=Object(g.useState)(!1),pe=Object(i.a)(fe,2),xe=pe[0],Oe=pe[1],he=Object(g.useState)({status:"success",message:""}),me=Object(i.a)(he,2),ge=me[0],ke=me[1],Ce=Object(g.useState)("Disable"),we=Object(i.a)(Ce,2),ye=we[0],Se=we[1],Ae=Object(g.useState)(!1),De=Object(i.a)(Ae,2),Ye=De[0],Ee=De[1],Ne=Object(g.useState)(""),Pe=Object(i.a)(Ne,2),ze=Pe[0],Ie=Pe[1];function Te(t){var n,a=[],r={counsellorId:"Center ID",name:"State",firstName:"Name",lastName:"Phone",traumaCodes:"Email",clients:"Clients",sessions:"Providers",sessionsHours:"Devices",type:"Type"};return"admin"===(null===e||void 0===e||null===(n=e.role)||void 0===n?void 0:n.type)&&(r.disable_center="Disable Center"),Array.isArray(t)?(t.forEach((function(e){a.push(_e(e))})),a.meta=r):a.push(_e(t)),a}function _e(t){var n,a,r,i,c,s,o,l={id:t&&t.attributes&&t.attributes.user&&t.attributes.user.data&&t.attributes.user.data.attributes&&t.attributes.user.data.attributes.username||"",centerId:t&&t.id||"",state:null!==(n=t.attributes.state)&&void 0!==n&&n.data?t.attributes.state.data.attributes.name:"",name:t.attributes.name,phoneNumber:t.attributes.phone_number,email:t.attributes.email,clients:t.attributes.clients.data.length||0,counsellors:t.attributes.counsellors.data.length||0,devices:(null===(a=t.attributes.devices)||void 0===a?void 0:a.data.length)||0,type:t.attributes.center_type.data?t.attributes.center_type.data.attributes.name:""};"admin"===(null===e||void 0===e||null===(r=e.role)||void 0===r?void 0:r.type)&&(l.disable_center={center_id:null===t||void 0===t?void 0:t.id,disabled:(null===t||void 0===t||null===(i=t.attributes)||void 0===i||null===(c=i.user)||void 0===c||null===(s=c.data)||void 0===s||null===(o=s.attributes)||void 0===o?void 0:o.blocked)||!1});return l}Object(g.useEffect)((function(){Fe(1)}),[1]);var Fe=function(e){_(!0),Object(w.a)(e).then((function(e){var t;_(!1),"UnauthorizedError"===(null===e||void 0===e||null===(t=e.error)||void 0===t?void 0:t.name)?(Ee(!0),Ie("Your session has expired. You will be logged out.")):(P(Te(e.data)),J(Object(C.c)(e.meta)))})).catch((function(e){console.log("error",e)}))};function He(e,t,n){_(!0),Object(w.b)(e,t,n).then((function(e){var t;_(!1),"UnauthorizedError"===(null===e||void 0===e||null===(t=e.error)||void 0===t?void 0:t.name)?(Ee(!0),Ie("Your session has expired. You will be logged out.")):(P(Te(e.data)),J(Object(C.c)(e.meta)))})).catch((function(e){console.log("error",e)}))}var Ue=function(){var e=Object(r.a)(s.a.mark((function e(){var t,n,a,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=!1,e.prev=1,n=null===ve||void 0===ve?void 0:ve.clients,a=0;case 4:if(!(a<n.length)){e.next=12;break}if(!(r=n[a]).license){e.next=9;break}return e.next=9,Object(y.e)(r.license);case 9:a++,e.next=4;break;case 12:t=!0,e.next=18;break;case 15:e.prev=15,e.t0=e.catch(1),t=!1;case 18:return e.abrupt("return",t);case 19:case"end":return e.stop()}}),e,null,[[1,15]])})));return function(){return e.apply(this,arguments)}}(),Je=function(){var e=Object(r.a)(s.a.mark((function e(){var t,n,a,r,i;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=!1,n=null===ve||void 0===ve?void 0:ve.sessions,a=null===ve||void 0===ve?void 0:ve.counsellors,e.prev=3,!a.length){e.next=15;break}r=s.a.mark((function e(t){var r,i,c,o,l;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=a[t],1!==(i=r.centers).length){e.next=9;break}if(i[0].id!==(null===ve||void 0===ve?void 0:ve.id)){e.next=7;break}return c=n.filter((function(e){var t,n;return(null===e||void 0===e||null===(t=e.center)||void 0===t?void 0:t.id)===i[0].id&&(null===e||void 0===e||null===(n=e.counsellor)||void 0===n?void 0:n.id)===r.id})),e.next=7,Object(y.b)(c);case 7:e.next=13;break;case 9:return o=i.find((function(e){return(null===e||void 0===e?void 0:e.id)===(null===ve||void 0===ve?void 0:ve.id)})),l=n.filter((function(e){var t,n;return(null===e||void 0===e||null===(t=e.center)||void 0===t?void 0:t.id)===o.id&&(null===e||void 0===e||null===(n=e.counsellor)||void 0===n?void 0:n.id)===r.id})),e.next=13,Object(y.b)(l);case 13:case"end":return e.stop()}}),e)})),i=0;case 7:if(!(i<a.length)){e.next=12;break}return e.delegateYield(r(i),"t0",9);case 9:i++,e.next=7;break;case 12:t=!0,e.next=16;break;case 15:t=!0;case 16:e.next=21;break;case 18:e.prev=18,e.t1=e.catch(3),t=!1;case 21:return e.abrupt("return",t);case 22:case"end":return e.stop()}}),e,null,[[3,18]])})));return function(){return e.apply(this,arguments)}}(),Re=function(){var e=Object(r.a)(s.a.mark((function e(t){var n,a,r,i,c,o,l,u,d,b;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=!1,e.prev=1,a={},1!==(i=(r=t).centers).length){e.next=13;break}if(i[0].id!==ve.id){e.next=11;break}return a={user:{data:{id:null===r||void 0===r||null===(c=r.user)||void 0===c?void 0:c.id,blocked:!0}}},e.next=10,Object(y.c)(t.id,a);case 10:n=!0;case 11:e.next=29;break;case 13:return o=i.map((function(e){if(e.id!==ve.id)return e.id})),a={counsellor:{data:{id:t.id,centers:o}}},e.next=17,Object(y.c)(t.id,a);case 17:l=(l=null===ve||void 0===ve?void 0:ve.clients).filter((function(e){var n;return(null===e||void 0===e||null===(n=e.counsellor)||void 0===n?void 0:n.id)===(null===t||void 0===t?void 0:t.id)})),u=0;case 20:if(!(u<l.length)){e.next=28;break}return d=l[u],b={data:{counsellor:null}},e.next=25,Object(y.f)(d.id,b);case 25:u++,e.next=20;break;case 28:n=!0;case 29:e.next=34;break;case 31:e.prev=31,e.t0=e.catch(1),n=!1;case 34:return e.abrupt("return",n);case 35:case"end":return e.stop()}}),e,null,[[1,31]])})));return function(t){return e.apply(this,arguments)}}(),We=function(){var e=Object(r.a)(s.a.mark((function e(){var t,n,a,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=!1,e.prev=1,!(n=null===ve||void 0===ve?void 0:ve.counsellors).length){e.next=15;break}a=0;case 5:if(!(a<n.length)){e.next=13;break}return r=n[a],e.next=9,Re(r);case 9:t=e.sent;case 10:a++,e.next=5;break;case 13:e.next=16;break;case 15:0===n.length&&(t=!0);case 16:e.next=21;break;case 18:e.prev=18,e.t0=e.catch(1),t=!1;case 21:return e.abrupt("return",t);case 22:case"end":return e.stop()}}),e,null,[[1,18]])})));return function(){return e.apply(this,arguments)}}(),Be=function(){var e=Object(r.a)(s.a.mark((function e(t){var n,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Se("Disable"),ue(t),e.next=4,Object(w.d)(t);case 4:"UnauthorizedError"===(null===(a=e.sent)||void 0===a||null===(n=a.error)||void 0===n?void 0:n.name)?(Ee(!0),Ie("Your session has expired. You will be logged out.")):(je(a),ce(!0));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Le=function(){var e=Object(r.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(ce(!1),!le){e.next=37;break}return _(!0),e.next=5,Ue();case 5:if(!e.sent){e.next=34;break}return e.next=9,Je();case 9:if(!e.sent){e.next=29;break}return e.next=13,We();case 13:if(!e.sent){e.next=24;break}return e.next=17,Object(y.a)(le);case 17:e.sent,_(!1),Oe(!0),ke(Object(a.a)(Object(a.a)({},ge),{},{status:"success",message:"Center Disabled Successfully"})),Fe(1),e.next=27;break;case 24:_(!1),Oe(!0),ke(Object(a.a)(Object(a.a)({},ge),{},{status:"error",message:"Provider Disabling Failed"}));case 27:e.next=32;break;case 29:_(!1),Oe(!0),ke(Object(a.a)(Object(a.a)({},ge),{},{status:"error",message:"Cancelling Appointments Failed"}));case 32:e.next=37;break;case 34:_(!1),Oe(!0),ke(Object(a.a)(Object(a.a)({},ge),{},{status:"error",message:"Revoking License and Passphrase Failed"}));case 37:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Me=function(){var e=Object(r.a)(s.a.mark((function e(t){var n,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Se("Enable"),ue(t),e.next=4,Object(w.d)(t);case 4:"UnauthorizedError"===(null===(a=e.sent)||void 0===a||null===(n=a.error)||void 0===n?void 0:n.name)?(Ee(!0),Ie("Your session has expired. You will be logged out.")):(je(a),ce(!0));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),qe=function(){var e=Object(r.a)(s.a.mark((function e(){var t,n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(ce(!1),!le){e.next=8;break}return _(!0),n={user:{data:{id:null===ve||void 0===ve||null===(t=ve.user)||void 0===t?void 0:t.id,blocked:!1}}},e.next=6,Object(y.d)(null===ve||void 0===ve?void 0:ve.id,n);case 6:e.sent?(_(!1),Oe(!0),ke(Object(a.a)(Object(a.a)({},ge),{},{status:"success",message:"Center Enabled Successfully"})),Fe(1)):(_(!1),Oe(!0),ke(Object(a.a)(Object(a.a)({},ge),{},{status:"error",message:"Enabling Center Failed"})));case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(N.jsxs)(o.a,{container:!0,className:"user-container",children:[Object(N.jsx)(o.a,{className:"user-breadcrumb",children:Object(N.jsx)(k.b,{routeSegments:[{name:"All Centers"}]})}),Object(N.jsx)(l.a,{variant:"contained",className:"add-button",size:"small",onClick:function(){return t("/centers/add")},children:"Add center"}),Object(N.jsxs)(o.a,{sx:{padding:"14px"},container:!0,rowSpacing:3,columnSpacing:6,children:[Object(N.jsx)(o.a,{item:!0,lg:6,md:6,sm:12,xs:12,children:Object(N.jsx)(x.a,{label:"Search Center",variant:"outlined",fullWidth:!0,onChange:function(e){var t=e.target.value;Z(t),t&&t.length>2?(L(!0),He(t,te,1)):""===t&&("All"!==te?(K(!0),He("",te,1)):(L(!1),Fe(1)))},value:X,placeholder:"Search center",type:"text",InputProps:{startAdornment:Object(N.jsx)(m.a,{})}})}),Object(N.jsx)(o.a,{item:!0,lg:6,md:6,sm:12,xs:12,children:Object(N.jsx)(u.a,{className:"select-role",children:Object(N.jsxs)(d.a,{fullWidth:!0,children:[Object(N.jsx)(b.a,{children:"Type"}),Object(N.jsxs)(v.a,{id:"demo-simple-select",value:te,label:"Age",onChange:function(e){var t=e.target.value;ne(t),"All"===t?X?(L(!0),He(X,"All",1)):(K(!1),Fe(1)):(K(!0),He(X,t,1))},children:[Object(N.jsx)(j.a,{value:"All",children:"All"}),Object(N.jsx)(j.a,{value:"CAC",children:"CAC"}),Object(N.jsx)(j.a,{value:"Hospital",children:"Hospital"}),Object(N.jsx)(j.a,{value:"Private",children:"Private"}),Object(N.jsx)(j.a,{value:"Clinic",children:"Clinic"})]})]})})}),Object(N.jsx)(d.a,{sx:{marginBottom:"15px",marginTop:"20px",display:"flex",width:"100%"},children:Object(N.jsx)(l.a,{color:"primary",variant:"contained",onClick:function(){Z(""),ne("All"),L(!1),K(!1),Fe(1)},sx:{alignSelf:"flex-end"},children:"Reset"})})]}),T&&Object(N.jsx)(S.a,{}),!T&&h.meta&&Object(N.jsx)(D.a,{onClick:function(e){t("/center/details/".concat(e),{id:e})},page:1,pageDetails:U,handlePageChange:function(e,t){B||G?He(X,te,Number(t)+1):Fe(Number(t)+1)},rows:h,view:"center",handleDisable:function(e){return Be(e)},handleEnable:function(e){return Me(e)}}),Object(N.jsx)(Y.a,{open:ie,onConfirmDialogClose:function(){ue(null),je(null),ce(!1)},text:"Do you want to ".concat("Disable"===ye?"disable":"enable"," Center?"),onYesClick:function(){return"Disable"===ye?Le():qe()}}),Object(N.jsx)(f.a,{open:xe,anchorOrigin:{vertical:"top",horizontal:"center"},autoHideDuration:3e3,onClose:function(){Oe(!1)},children:Object(N.jsx)(p.a,{onClose:function(){Oe(!1)},variant:"filled",severity:ge.status,sx:{width:"100%"},children:ge.message})}),Object(N.jsx)(E.a,{open:Ye,text:ze,onConfirmDialogClose:function(){Ie(""),Ee(!1)},onYesClick:function(){Ie(""),Ee(!1)}})]})}}}]);
//# sourceMappingURL=57.caddce22.chunk.js.map