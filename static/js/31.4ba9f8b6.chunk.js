(this["webpackJsonpmatx-react"]=this["webpackJsonpmatx-react"]||[]).push([[31],{643:function(e,t,n){"use strict";n(2);var a=n(332),c=n(50),r=n(331),i=n(334),o=n(205),s=n(25),l=n(1),u={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:400,bgcolor:"background.paper",border:"2px solid #fff",boxShadow:24,p:4};Object(c.a)(a.a)((function(){return{display:"block",color:"#fff",marginTop:"20px",width:"86px",backgroundColor:"#e15260","&:hover":{backgroundColor:"#cc2333",color:"#fff"}}}));t.a=function(e){var t=e.open,n=e.onConfirmDialogClose,c=e.text,d=(e.onYesClick,Object(s.f)()),b=function(){n(),localStorage.removeItem("accessToken"),d("/session/signin")};return Object(l.jsx)("div",{children:Object(l.jsx)(r.a,{keepMounted:!0,open:t,onClose:function(){return b()},"aria-labelledby":"keep-mounted-modal-title","aria-describedby":"keep-mounted-modal-description",children:Object(l.jsxs)(o.a,{sx:u,children:[Object(l.jsx)(i.a,{id:"keep-mounted-modal-title",variant:"h6",component:"h2",sx:{color:"#333"},children:c}),Object(l.jsx)("div",{style:{display:"flex",justifyContent:"flex-end",alignItems:"center",gap:"1rem"},children:Object(l.jsx)(o.a,{position:"relative",sx:{display:"block",marginTop:"20px"},children:Object(l.jsx)(a.a,{color:"primary",variant:"contained",onClick:function(){return b()},children:"Ok"})})})]})})})}},645:function(e,t,n){"use strict";n.d(t,"c",(function(){return c})),n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return i})),n.d(t,"e",(function(){return o})),n.d(t,"h",(function(){return s})),n.d(t,"l",(function(){return l})),n.d(t,"n",(function(){return u})),n.d(t,"j",(function(){return d})),n.d(t,"m",(function(){return b})),n.d(t,"d",(function(){return j})),n.d(t,"g",(function(){return h})),n.d(t,"i",(function(){return f})),n.d(t,"f",(function(){return O})),n.d(t,"k",(function(){return p}));var a=n(26),c=function(e,t){var n="/api/clients?pagination[page]=".concat(e,"&counsellor=").concat(t);return Object(a.b)("GET",n).then((function(e){return e})).then((function(e){return e}))},r=function(e,t){var n="/api/centers?pagination[page]=".concat(e,"&counsellor=").concat(t);return Object(a.b)("GET",n).then((function(e){return e})).then((function(e){return e}))},i=function(e){var t="/api/counsellors?pagination[page]=".concat(e);return Object(a.b)("GET",t).then((function(e){return e})).catch((function(e){return e}))},o=function(e,t){var n="/api/sessions?pagination[page]=".concat(e,"&counsellor=").concat(t);return Object(a.b)("GET",n).then((function(e){return e})).then((function(e){return e}))},s=function(e,t,n,c){console.log(c);var r="/api/sessions?filter=".concat(e,"&counsellor=").concat(n,"&filterType=").concat(c);return console.log(e),Object(a.b)("GET",r).then((function(e){return e})).catch((function(e){return e}))},l=function(e,t){var n="/api/sessions?find=".concat(e);return Object(a.b)("GET",n).then((function(e){return e})).catch((function(e){return e}))},u=function(e,t){var n="/api/sessions/".concat(e);return Object(a.b)("PUT",n,t).then((function(e){return e})).then((function(e){return e}))},d=function(e,t){var n="/api/clients?find=".concat(e);return Object(a.b)("GET",n).then((function(e){return e})).catch((function(e){return e}))},b=function(e,t){var n="/api/counsellors?pagination[page]=".concat(t,"&search=").concat(e);return Object(a.b)("GET",n).then((function(e){return e})).catch((function(e){return e}))},j=function(e){var t="/api/counsellors/".concat(e);return Object(a.b)("GET",t).then((function(e){return e})).catch((function(e){return e}))},h=function(e,t,n,c){console.log(c);var r="/api/clients?filter=".concat(e,"&counsellor=").concat(n,"&filterType=").concat(c);return console.log(e),Object(a.b)("GET",r).then((function(e){return e})).catch((function(e){return e}))},f=function(e,t,n){var c="/api/centers?search=".concat(e,"&counsellor=").concat(n);return console.log(e),Object(a.b)("GET",c).then((function(e){return e})).catch((function(e){return e}))},O=function(e,t,n){var c="/api/centers?filter=".concat(e,"&counsellor=").concat(n);return console.log(e),Object(a.b)("GET",c).then((function(e){return e})).catch((function(e){return e}))},p=function(e){var t=e&&e.search||"",n=e&&e.page||1,c=e&&e.centerName,r="/api/counsellors?search=".concat(t,"&pagination[page]=").concat(n);return c&&(r+="&centerName=".concat(c)),Object(a.b)("GET",r).then((function(e){return e})).catch((function(e){return e}))}},667:function(e,t,n){"use strict";var a=n(13),c=n(2),r=n.n(c),i=n(332),o=n(627),s=n(628),l=n(637),u=n(638),d=n(330),b=n(560),j=n(561),h=n(551),f=n(636),O=n(207),p=n(309),m=n(639),x=n(50),g=n(51),v=n.n(g),y=n(656),C=n.n(y),S=n(1);Object(x.a)(i.a)((function(){return{display:"block",color:"#fff",width:"86px",backgroundColor:"#e15260","&:hover":{backgroundColor:"#cc2333",color:"#fff"}}}));t.a=function(e){var t=Object(c.useState)(""),n=Object(a.a)(t,2),x=n[0],g=n[1],y=C()([]),k=Object(a.a)(y,3),w=k[0],A=k[1],E=k[2],D=Object(c.useState)(""),R=Object(a.a)(D,2),I=R[0],V=R[1],_=Object(c.useState)([]),G=Object(a.a)(_,2),T=G[0],Y=G[1],N=Object(c.useState)(""),M=Object(a.a)(N,2),P=(M[0],M[1]),F=function(){V(""),A([]),Y([]),e.handleClose()};Object(c.useEffect)((function(){e.data&&(g(e.data.clientId),P(e.data.sessionId),e.multipleSession&&e.data.notes&&Y(e.data.notes),e.multipleSession||(e.data.notes&&e.data.notes.sort((function(e,t){return new Date(t.updatedAt)-new Date(e.updatedAt)})),A(e.data.notes)))}),[e]);return Object(S.jsx)(r.a.Fragment,{children:Object(S.jsxs)(o.a,{fullWidth:!0,maxWidth:"sm",open:e.open,onClose:F,children:[Object(S.jsx)(s.a,{children:"Notes"}),Object(S.jsxs)(l.a,{children:[Object(S.jsxs)(u.a,{children:["Client : ",x]}),e.multipleSession&&Object(S.jsx)(d.a,{noValidate:!0,component:"form",lg:12,md:6,sm:12,xs:12,sx:{display:"flex",flexDirection:"column",justifyContent:"center",width:"50%"},children:Object(S.jsxs)(b.a,{sx:{mt:2,minWidth:120},children:[Object(S.jsx)(j.a,{htmlFor:"max-width",children:"Select Session"}),Object(S.jsx)(h.a,{autoFocus:!0,value:I,onChange:function(e){V(e.target.value);var t=T.filter((function(t){return t.attributes.session_id==e.target.value}));t&&(t[0].attributes.notes.data.sort((function(e,t){return new Date(t.updatedAt)-new Date(e.updatedAt)})),A(function(e){var t=[];return e&&e.map((function(e){t.push(e.attributes)})),t}(t[0].attributes.notes.data))),console.log(E.current)},label:"Select Session",inputProps:{name:"max-width",id:"max-width"},children:T&&T.map((function(e,t){return Object(S.jsx)(f.a,{value:e.attributes.session_id,children:"".concat(e.attributes.session_id," - ").concat(v()(e.attributes.scheduled_at).format("DD MMMM, YYYY"))},t)}))})]})}),Object(S.jsxs)(u.a,{children:[E.current&&E.current.map((function(e,t){return Object(S.jsxs)(O.a,{item:!0,lg:12,md:6,sm:12,xs:12,sx:{mt:2},children:[Object(S.jsx)(p.a,{fullWidth:!0,multiline:!0,rows:3,inputProps:{readOnly:!0},defaultValue:e.details},"".concat(t)),Object(S.jsxs)(O.a,{container:!0,style:{display:"flex",justifyContent:"space-between"},children:[Object(S.jsx)(O.a,{children:e.added_by}),Object(S.jsx)(O.a,{children:v()(e.updatedAt).format("DD/MM/YYYY hh:mm A")})]})]})})),!w&&T&&Object(S.jsx)(O.a,{mt:2,children:"No Record Found"})]})]}),Object(S.jsx)(m.a,{children:Object(S.jsx)(i.a,{variant:"contained",type:"submit",onClick:F,children:"Close"})})]})})}},669:function(e,t,n){"use strict";var a=n(13),c=(n(2),n(636)),r=n(207),i=n(330),o=n(560),s=n(561),l=n(551),u=n(332),d=n(309),b=n(213),j=n.n(b),h=(n(341),n(1));t.a=function(e){var t=function(t){return"Gender"==t?e.genderValue.map((function(e,t){return Object(h.jsx)(c.a,{value:e,children:e},t)})):e.filterValue.map((function(e,t){return Object(h.jsx)(c.a,{value:e,children:e},t)}))};return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsxs)(r.a,{sx:{marginTop:"0px",marginBottom:"20px"},container:!0,rowSpacing:3,columnSpacing:6,children:[Object(h.jsx)(r.a,{item:!0,lg:6,md:6,sm:12,xs:12,children:Object(h.jsx)(d.a,{sx:{width:"100%"},label:e.searchLabel,variant:"outlined",onChange:e.handleSearch,placeholder:e.searchLabel,type:"text",value:e.searchValue,autoFocus:!0,InputProps:{startAdornment:Object(h.jsx)(j.a,{})}})}),e.multiFilter?Object.entries(e.type).map((function(n,c){var u=Object(a.a)(n,2),d=u[0];return u[1],Object(h.jsx)(r.a,{item:!0,lg:6,md:6,sm:12,xs:12,children:Object(h.jsx)(i.a,{children:Object(h.jsxs)(o.a,{fullWidth:!0,children:[Object(h.jsx)(s.a,{sx:{backgroundColor:"#fafafa",padding:"0.25rem"},children:d}),Object(h.jsx)(l.a,{id:"demo-simple-select",value:"Gender"==d?e.genderSelectValue:e.selectValue,label:"Age",onChange:function(t){return e.handleChange(t,d)},placeholder:"Search Center",children:t(d)})]})})},"".concat(c))})):Object(h.jsx)(r.a,{item:!0,lg:6,md:6,sm:12,xs:12,children:Object(h.jsx)(i.a,{children:Object(h.jsxs)(o.a,{fullWidth:!0,children:[Object(h.jsx)(s.a,{sx:{backgroundColor:"#fafafa",padding:"0.25rem"},children:e.label}),Object(h.jsx)(l.a,{id:"demo-simple-select",value:e.selectValue,label:"Age",onChange:function(t){return e.handleChange(t)},placeholder:"Search Center",children:e.filterValue&&e.filterValue.map((function(e,t){return Object(h.jsx)(c.a,{value:e,children:e},t)}))})]})})})]}),Object(h.jsx)(o.a,{sx:{marginBottom:"20px",display:"flex",width:"100%"},children:Object(h.jsx)(u.a,{color:"primary",variant:"contained",onClick:e.handleReset,sx:{alignSelf:"flex-end"},children:"Reset"})})]})}},680:function(e,t,n){"use strict";var a=n(13),c=n(2),r=n.n(c),i=n(557),o=n(692),s=n(332),l=n(711),u=n(640),d=n(207),b=n(571),j=n.n(b),h=n(573),f=n.n(h),O=n(219),p=n(667),m=n(558),x=n(331),g=n(330),v=n(334),y=n(309),C=n(50),S=n(112),k=n(1),w=Object(C.a)(m.a)((function(){return{position:"absolute",bottom:"38px",right:"60px"}})),A={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",bgcolor:"background.paper",border:"2px solid #fff",boxShadow:24,p:4,borderRadius:"15px"},E=function(e){var t=Object(c.useState)(""),n=Object(a.a)(t,2),r=n[0],i=n[1],o=Object(c.useState)(""),l=Object(a.a)(o,2),u=l[0],b=l[1],j=Object(c.useState)(""),h=Object(a.a)(j,2),f=h[0],O=h[1],p=Object(c.useState)(),m=Object(a.a)(p,2),C=m[0],E=m[1];return Object(c.useEffect)((function(){return S.ValidatorForm.addValidationRule("REQUIRED",(function(e){return 0!==e.length})),e.data&&(console.log(e.data),i(e.data.sessionId),O(e.data.center),b(e.data.clientId),E(e.data)),function(){S.ValidatorForm.removeValidationRule("REQUIRED")}}),[e]),Object(k.jsx)("div",{children:Object(k.jsx)(x.a,{keepMounted:!0,open:e.open,onClose:e.handleClose,"aria-labelledby":"keep-mounted-modal-title","aria-describedby":"keep-mounted-modal-description",children:Object(k.jsx)(g.a,{sx:A,children:Object(k.jsxs)(S.ValidatorForm,{onSubmit:function(t){return function(t,n){e.handleSubmit(t,n)}(t,e)},onError:function(){return null},children:[Object(k.jsx)(v.a,{id:"keep-mounted-modal-title",variant:"h6",component:"h2",children:"Confirm this appointment"}),Object(k.jsxs)(v.a,{id:"keep-mounted-modal-title",variant:"body2",component:"h6",children:["Appointment ID : ",r]}),Object(k.jsxs)(v.a,{id:"keep-mounted-modal-title",variant:"body2",component:"h6",children:["Client ID : ",u]}),Object(k.jsxs)(v.a,{id:"keep-mounted-modal-title",variant:"body2",component:"h6",children:["Center : ",f]}),Object(k.jsx)(g.a,{sx:{minWidth:500,mb:2},children:C&&Object(k.jsx)(d.a,{container:!0,spacing:3,children:Object(k.jsx)(d.a,{item:!0,lg:12,md:6,sm:12,xs:12,sx:{mt:2},children:Object(k.jsx)(y.a,{fullWidth:!0,label:"Scheduled At",inputProps:{readOnly:!0},value:C.scheduledAt})})})}),Object(k.jsxs)(g.a,{sx:{display:"table",marginLeft:"auto",marginRight:"0px"},children:[Object(k.jsx)(s.a,{color:"error",variant:"contained",onClick:function(){e.handleClose()},children:"Cancel"}),Object(k.jsx)(s.a,{disabled:e.loading,sx:{ml:2},type:"submit",variant:"contained",children:"Accept"}),e.loading&&Object(k.jsx)(w,{size:24,className:"buttonProgress"})]})]})})})})},D=(n(51),Object(C.a)(m.a)((function(){return{position:"absolute",bottom:"38px",right:"60px"}}))),R={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",bgcolor:"background.paper",border:"2px solid #fff",boxShadow:24,p:4,borderRadius:"15px"},I=function(e){var t=Object(c.useState)(""),n=Object(a.a)(t,2),r=n[0],i=n[1],o=Object(c.useState)(""),l=Object(a.a)(o,2),u=l[0],b=l[1],j=Object(c.useState)(""),h=Object(a.a)(j,2),f=h[0],O=h[1],p=Object(c.useState)(!1),m=Object(a.a)(p,2),C=(m[0],m[1],Object(c.useState)()),w=Object(a.a)(C,2),A=w[0],E=w[1],I=Object(c.useState)(""),V=Object(a.a)(I,2),_=V[0],G=V[1],T=Object(c.useState)(!1),Y=Object(a.a)(T,2),N=Y[0],M=Y[1];return Object(c.useEffect)((function(){return S.ValidatorForm.addValidationRule("REQUIRED",(function(e){return 0!==e.length})),e.data&&(console.log(e.data),i(e.data.sessionId),O(e.data.center),b(e.data.clientId),E(e.data),e.data&&e.data.disabled&&G("Appointment cancelled, time slot not available.")),function(){S.ValidatorForm.removeValidationRule("REQUIRED")}}),[e]),Object(k.jsx)("div",{children:Object(k.jsx)(x.a,{keepMounted:!0,open:e.open,onClose:e.handleClose,"aria-labelledby":"keep-mounted-modal-title","aria-describedby":"keep-mounted-modal-description",children:Object(k.jsx)(g.a,{sx:R,children:Object(k.jsxs)(S.ValidatorForm,{onSubmit:function(t){return function(t,n){console.log(_),0!==_.length?(M(!1),e.handleSubmit(n,_)):M(!0)}(0,e)},onError:function(){return null},children:[Object(k.jsx)(v.a,{id:"keep-mounted-modal-title",variant:"h6",component:"h2",children:"Reject this appointment"}),Object(k.jsxs)(v.a,{id:"keep-mounted-modal-title",variant:"body2",component:"h6",children:["Appointment ID : ",r]}),Object(k.jsxs)(v.a,{id:"keep-mounted-modal-title",variant:"body2",component:"h6",children:["Client ID : ",u]}),Object(k.jsxs)(v.a,{id:"keep-mounted-modal-title",variant:"body2",component:"h6",children:["Center : ",f]}),Object(k.jsx)(g.a,{sx:{minWidth:500,mb:2},children:A&&Object(k.jsxs)(d.a,{container:!0,spacing:3,children:[Object(k.jsx)(d.a,{item:!0,lg:12,md:6,sm:12,xs:12,sx:{mt:2},children:Object(k.jsx)(y.a,{fullWidth:!0,label:"Scheduled At",inputProps:{readOnly:!0},value:A.scheduledAt})}),Object(k.jsx)(d.a,{item:!0,lg:12,md:6,sm:12,xs:12,children:Object(k.jsx)(y.a,{fullWidth:!0,label:"Reason",multiline:!0,rows:4,inputProps:{readOnly:A.disabled},value:_,onChange:function(e){return G(e.target.value)},validators:["REQUIRED"],errorMessages:["This field is required"]})}),N&&Object(k.jsx)("span",{style:{marginLeft:20,color:"red"},children:"Error: Please add the reason of cancellation"})]})}),Object(k.jsxs)(g.a,{sx:{display:"table",marginLeft:"auto",marginRight:"0px"},children:[Object(k.jsx)(s.a,{color:"error",variant:"contained",onClick:function(){G(""),M(""),e.handleClose()},children:"Cancel"}),Object(k.jsx)(s.a,{disabled:e.loading,sx:{ml:2},type:"submit",variant:"contained",children:"Reject"}),e.loading&&Object(k.jsx)(D,{size:24,className:"buttonProgress"})]})]})})})})},V=n(645),_=n(572),G=n.n(_);t.a=function(e){var t=Object(c.useState)([]),n=Object(a.a)(t,2),b=n[0],h=n[1],m=Object(c.useState)(),x=Object(a.a)(m,2),g=x[0],v=x[1],y=Object(c.useState)(),C=Object(a.a)(y,2),S=C[0],w=C[1],A=Object(c.useState)(!1),D=Object(a.a)(A,2),R=D[0],_=D[1],T=Object(c.useState)(!1),Y=Object(a.a)(T,2),N=Y[0],M=Y[1],P=Object(c.useState)(!1),F=Object(a.a)(P,2),L=F[0],W=F[1],U=Object(c.useState)(!1),z=Object(a.a)(U,2),B=z[0],H=z[1],Q=r.a.useState(10),J=Object(a.a)(Q,2),q=J[0],K=J[1],X=Object(c.useState)(0),Z=Object(a.a)(X,2),$=Z[0],ee=Z[1],te=function(e,t){h(e),_(t)},ne=function(e,t){v(e),M(t)},ae=function(e,t){w(e),W(t)},ce=function(t,n){var a=null;switch(t){case"view_notes":a=function(t){return Object(k.jsxs)("div",{style:{display:"flex",flexDirection:"row",justifyContent:"center"},children:[Object(k.jsx)(i.a,{"aria-label":"view",color:"primary",onClick:function(){return te(t,!0)},children:Object(k.jsx)(o.a,{badgeContent:t.notes?t.notes.length:0,color:"secondary",children:Object(k.jsx)(j.a,{})})}),e.addNotes&&Object(k.jsx)(i.a,{"aria-label":"view",color:"primary",onClick:function(){return e.handleOpenNewNotes(t,!0)},children:Object(k.jsx)(G.a,{})})]})}(n);break;case"scheduledAt":a=function(t){return"scheduled"===t.status?Object(k.jsxs)("div",{style:{marginLeft:"1rem"},children:[t.scheduledAt,Object(k.jsx)(i.a,{"aria-label":"view",color:"primary",children:"counsellor"===e.user.role.type&&Object(k.jsx)(f.a,{})})]}):"pending"===t.status?Object(k.jsxs)("div",{children:[Object(k.jsx)("div",{style:{marginBottom:10},children:"".concat(t.scheduledAt)}),Object(k.jsxs)("div",{style:{display:"flex",flexDirection:"row",justifyContent:"center"},children:[Object(k.jsx)(s.a,{disabled:t.disabled,variant:"contained",color:"success",style:{marginRight:5},onClick:function(){return ne(t,!0)},children:Object(k.jsx)("div",{style:{fontSize:".8rem"},children:"Accept"})}),Object(k.jsx)(s.a,{variant:"contained",color:"error",onClick:function(e){return ae(t,!0)},children:Object(k.jsx)("div",{style:{fontSize:".8rem"},children:"Reject"})})]})]}):"cancelled"===t.status?Object(k.jsxs)("div",{style:{marginLeft:"1rem"},children:["".concat(t.scheduledAt),Object(k.jsx)(l.a,{label:"Cancelled",size:"small",variant:"outlined",color:"error"})]}):"missed"===t.status?Object(k.jsxs)("div",{style:{marginLeft:"1rem"},children:["".concat(t.scheduledAt),Object(k.jsx)(l.a,{label:"Missed",size:"small",variant:"outlined",color:"error"})]}):Object(k.jsxs)("div",{style:{marginLeft:"1rem"},children:[t.scheduledAt,Object(k.jsx)(l.a,{label:"completed"===t.status?"Completed":t.status,size:"small",variant:"outlined",color:"success"})]})}(n);break;default:a=n}return a};return Object(k.jsx)(k.Fragment,{children:Object(k.jsxs)(d.a,{children:["Provider"===e.role?Object(k.jsx)(d.a,{children:Object(k.jsx)(O.a,{page:$,handleChangePage:function(e,t){ee(t)},rowsPerPage:q,handleChangeRowsPerPage:function(e){K(+e.target.value),ee(0)},rows:e.data,CustomHeadCell:function(e){for(var t=e.meta,n=[],c=Object.entries(t),r=0,i=Object.entries(c);r<i.length;r++){var o=Object(a.a)(i[r],2),s=o[0],l=Object(a.a)(o[1],2),d=l[0],b=l[1];"id"!==d&&n.push(Object(k.jsx)(u.a,{width:"scheduledAt"===d?140:60,align:"center",className:"text-style",children:b},s))}return n},CustomBodyCell:function(e){for(var t=e.row,n=[],c=Object.entries(t),r=0,i=Object.entries(c);r<i.length;r++){var o=Object(a.a)(i[r],2),s=o[0],l=Object(a.a)(o[1],2),d=l[0],b=l[1];"id"!==d&&n.push(Object(k.jsx)(u.a,{className:"text-style",component:"th",scope:"row",align:"center",children:ce(d,b)},s))}return n}})}):Object(k.jsx)(d.a,{}),Object(k.jsx)(p.a,{open:R,data:b,multipleSession:!1,handleClose:function(){te(null,!1)}}),Object(k.jsx)(E,{open:N,data:g,handleClose:function(){return ne(null,!1)},handleSubmit:function(t,n){H(!0);Object(V.n)(n.data.id,{data:{status:"scheduled"}}).then((function(t){H(!1),M(!1),e.fetchData($,e.user.counsellor.id)})).catch((function(e){return console.log(e)}))},loading:B}),Object(k.jsx)(I,{open:L,data:S,handleClose:function(){return ae(null,!1)},handleSubmit:function(t,n){H(!0);var a={data:{status:"cancelled",cancell_reason:n}};Object(V.n)(t.data.id,a).then((function(t){t&&(W(!1),e.fetchData($,e.user.counsellor.id)),H(!1)})).catch((function(e){return console.log(e)}))},loading:B})]})})}},700:function(e,t,n){"use strict";n.d(t,"a",(function(){return h}));var a=n(45),c=n(6),r=n(13),i=n(33),o=n.n(i),s=n(2),l=n(656),u=n.n(l),d=n(669),b=n(95),j=n(1),h=function(e){var t=e.searchClient,n=e.filterClient,i=e.fetchClientList,l=e.searchResult,h=e.page,f=Object(b.a)().user,O=Object(s.useState)({Gender:"All",Ethnicity:"All"}),p=Object(r.a)(O,2),m=p[0],x=p[1],g=u()({search:"",ethnicity:"All",gender:"All"}),v=Object(r.a)(g,3),y=v[0],C=v[1],S=v[2],k=Object(s.useState)(["All","American Indian","Alaska Native","Asian","Black or African American","Hispanic or Latino","Native Hawaiian","Pacific Islander","White","Unknown"]),w=Object(r.a)(k,2),A=w[0],E=(w[1],Object(s.useState)(["All","Male","Female","Other"])),D=Object(r.a)(E,2),R=D[0],I=(D[1],function(){var e=Object(a.a)(o.a.mark((function e(n){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=n.target.value,C(Object(c.a)(Object(c.a)({},y),{},{search:a})),a&&a.length>2?(t(a,m,h),l(!0)):""===a&&(i(h,f.counsellor.id),l(!1));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());return Object(j.jsx)(d.a,{handleSearch:I,handleChange:function(e,t){var a=e.target.value;"Gender"==t?C(Object(c.a)(Object(c.a)({},y),{},{gender:a})):"Ethnicity"==t&&C(Object(c.a)(Object(c.a)({},y),{},{ethnicity:a})),"All"!==a?(l(!0),n(a,h,t)):(l(!1),i(h,f.counsellor.id))},filterValue:A,genderValue:R,multiFilter:!0,selectValue:S.current.ethnicity,genderSelectValue:S.current.gender,searchValue:S.current.search,label:"Ethnicity",searchLabel:"Search Client",type:m,handleReset:function(){x({Gender:"All",Ethnicity:"All"}),C({search:"",ethnicity:"All",gender:"All"}),i(h,f.counsellor.id)}})}},701:function(e,t,n){},911:function(e,t,n){"use strict";n.r(t);var a=n(45),c=n(13),r=n(33),i=n.n(r),o=n(2),s=n(207),l=n(51),u=n.n(l),d=n(95),b=n(25),j=n(94),h=n(700),f=n(135),O=n(645),p=n(73),m=n(643),x=n(680),g=(n(701),n(1));t.default=function(){Object(b.f)();var e=Object(d.a)().user,t=Object(o.useState)(!1),n=Object(c.a)(t,2),r=n[0],l=n[1],v=Object(o.useState)(),y=Object(c.a)(v,2),C=y[0],S=y[1],k=Object(o.useState)(!1),w=Object(c.a)(k,2),A=(w[0],w[1]),E=Object(o.useState)(0),D=Object(c.a)(E,2),R=D[0],I=(D[1],Object(o.useState)(!1)),V=Object(c.a)(I,2),_=V[0],G=V[1],T=Object(o.useState)(""),Y=Object(c.a)(T,2),N=Y[0],M=Y[1],P=function(){var e=Object(a.a)(i.a.mark((function e(t,n){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:l(!0),Object(O.e)(t,n).then((function(e){if(e){var t;l(!1),"UnauthorizedError"===(null===e||void 0===e||null===(t=e.error)||void 0===t?void 0:t.name)&&(G(!0),M("Your session has expired. You will be logged out."));var n=[],a=u()().startOf("hour");e.data.map((function(e){u()(u()(e.attributes.scheduled_at).format("x"),"x").isBefore(a)&&n.push(e)})),n.sort((function(e,t){return new Date(e.updatedAt)-new Date(t.updatedAt)})),S(L(n))}})).catch((function(e){return console.log(e)}));case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),F=function(e,t,n){var a=e.attributes?e.attributes:null;return{id:e.id,status:"scheduled"===a.status||"pending"===a.status?"missed":a.status,scheduledAt:"".concat(u()(a.scheduled_at).format("DD MMMM, YYYY hh:mm A")),sessionId:a.session_id,clientId:t,center:n}},L=function(e){var t=[];return console.log(e),e.forEach((function(e){var n,a,c,r=null!==(n=e.attributes.client)&&void 0!==n&&n.data?null===(a=e.attributes.client)||void 0===a?void 0:a.data.attributes:null,i=null!==(c=e.attributes.center)&&void 0!==c&&c.data?e.attributes.center.data.attributes:null,o=e.attributes?e.attributes:null,s=e.attributes.notes?e.attributes.notes:null,l=r.traumas?function(e){return e.map((function(e){return e.attributes.trauma_code})).join(", ")}(r.traumas.data):"",u={id:e.id,clientId:r.client_id,center:i?i.name:"",gender:r.gender_bio,idGender:r.gender_identified,traumas:l,ethnicity:r.ethnicity?r.ethnicity:"",sessionHours:o.duration?Object(p.e)(o.duration):"0",scheduledAt:F(e,r.client_id,i.name),status:"pending"==o.status?"Missed":"scheduled"==o.status?"Not Completed":"cancelled"==o.status?"Cancelled":"Completed",view_notes:{clientId:r.client_id,clientName:r.name,sessionId:o.session_id?o.session_id:"-",center_id:i?i.center_id:"-",notes:(null===s||void 0===s?void 0:s.length)>0?s[s.length-1]:""}};t.push(u)})),t.meta={id:"ID",clientId:"Client ID",center:"Center",gender:"Birth Gender",idGender:"ID Gender",traumas:"Trauma",ethnicity:"Ethnicity",sessionHours:"Duration",scheduledAt:"Scheduled",status:"Status",view_notes:"Notes"},t};return Object(o.useEffect)((function(){P(R,e.counsellor.id)}),[]),Object(g.jsxs)(s.a,{className:"client-container",children:[Object(g.jsx)(s.a,{className:"client-breadcrumb",children:Object(g.jsx)(j.b,{routeSegments:[{name:"Upcoming Appointments"}]})}),Object(g.jsx)(h.a,{filterClient:function(t,n,a){l(!0),Object(O.h)(t,n,e.counsellor.id,a).then((function(e){var t;l(!1),"UnauthorizedError"===(null===e||void 0===e||null===(t=e.error)||void 0===t?void 0:t.name)&&(G(!0),M("Your session has expired. You will be logged out."));var n=[],a=u()().startOf("minute");e.data.map((function(e){u()(u()(e.attributes.scheduled_at).format("x"),"x").isBefore(a)&&n.push(e)})),n.sort((function(e,t){return new Date(e.updatedAt)-new Date(t.updatedAt)})),S(L(n))})).catch((function(e){console.log("error",e)}))},fetchClientList:P,searchResult:A,searchClient:function(e,t){l(!0),Object(O.l)(e,t).then((function(e){var t;l(!1),"UnauthorizedError"===(null===e||void 0===e||null===(t=e.error)||void 0===t?void 0:t.name)&&(G(!0),M("Your session has expired. You will be logged out."));var n=[],a=u()().startOf("hour");e.data.map((function(e){u()(u()(e.attributes.scheduled_at).format("x"),"x").isBefore(a)&&n.push(e)})),n.sort((function(e,t){return new Date(e.updatedAt)-new Date(t.updatedAt)})),S(L(n))})).catch((function(e){console.log("error",e)}))},page:R}),C&&Object(g.jsx)(x.a,{role:e.role.name,data:C,loading:r,fetchData:P,user:e}),r&&Object(g.jsx)(f.a,{}),Object(g.jsx)(m.a,{open:_,text:N,onConfirmDialogClose:function(){M(""),G(!1)},onYesClick:function(){M(""),G(!1)}})]})}}}]);
//# sourceMappingURL=31.4ba9f8b6.chunk.js.map