(this["webpackJsonpmatx-react"]=this["webpackJsonpmatx-react"]||[]).push([[24],{646:function(e,n,t){"use strict";var a=t(13),r=(t(2),t(566)),i=t(568),c=t(640),l=t(565),s=t(567),o=t(336),d=t(208),u=t(25),h=(t(650),t(557)),b=t(692),m=t(552),f=t(571),j=t.n(f),p=t(572),v=t.n(p),O=t(573),g=t.n(O),x=t(95),C=t(332),A=t(1),y={new:"New",inProcess:"In Process",successful:"Successful",unsuccessful:"Unsuccessful",pending:"Pending",scheduled:"Scheduled",rescheduled:"Rescheduled",cancelled:"Cancelled",completed:"Completed"};n.a=function(e){var n=Object(u.f)(),t=Object(x.a)().user,f=function(e){var n=e.meta,t=[];if(n)for(var r=Object.entries(n),i=0,l=Object.entries(r);i<l.length;i++){var s=Object(a.a)(l[i],2),o=s[0],d=Object(a.a)(s[1],2),u=d[0],h=d[1];"deviceId"!==u&&"counsellor_user_id"!==u&&t.push(Object(A.jsx)(c.a,{width:"scheduledAt"===u?140:60,variant:"head",align:"center",className:"text-style",children:h},o))}return t},p=function(n,t){return Object(A.jsx)(C.a,{variant:"contained",color:"primary",onClick:function(a){a.stopPropagation(),n.disabled?e.handleEnable("center"===t?n.center_id:n.provider_id):e.handleDisable("center"===t?n.center_id:n.provider_id)},children:n.disabled?"Enable":"Disable"})},O=function(a,r,i){var c=null;switch(a){case"edit_action":c=Object(A.jsx)(C.a,{variant:"contained",color:"primary",onClick:function(){return n(r)},children:"Edit"});break;case"return":c=Object(A.jsx)(C.a,{variant:"contained",color:"primary",onClick:function(n){n.stopPropagation(),e.handleReturn(i)},disabled:!r,children:"Return"});break;case"expire":c=Object(A.jsx)(C.a,{variant:"contained",color:"primary",onClick:function(n){n.stopPropagation(),e.handleExpire(i)},disabled:!r,children:"Expire"});break;case"device_action":c=function(n){return n.isAssigned?Object(A.jsx)("div",{style:{marginLeft:"1rem"},children:n.center_name}):t&&t.role&&"admin"===t.role.type&&"bmc"===n.owned_by?Object(A.jsx)(C.a,{variant:"contained",color:"primary",onClick:function(){return e.handleOpen(n.deviceID,!0)},children:"Assign"}):null}(r);break;case"view_notes":c=function(n){return Object(A.jsxs)("div",{style:{display:"flex",flexDirection:"row",justifyContent:"center"},children:[Object(A.jsx)(h.a,{"aria-label":"view",color:"primary",onClick:function(){return e.handleOpen(n,!0)},children:Object(A.jsx)(b.a,{badgeContent:n.notes?n.notes.length:0,color:"secondary",children:Object(A.jsx)(j.a,{})})}),Object(A.jsx)(h.a,{"aria-label":"view",color:"primary",onClick:function(){return e.handleOpenNewNotes(n,!0)},children:Object(A.jsx)(v.a,{})})]})}(r);break;case"clinician_status":c=function(n,a){return"Not Assigned"!==n?Object(A.jsx)("div",{children:n}):t&&t.role&&"admin"===t.role.type?Object(A.jsx)("div",{children:"Not Assigned"}):t&&t.role&&"center"===t.role.type?Object(A.jsx)(C.a,{variant:"contained",color:"primary",onClick:function(n){n.stopPropagation(),e.assignClinician(a)},children:"Assign"}):void 0}(r,i);break;case"device_status":c=function(n,a){return"Not Assigned"!==n?Object(A.jsx)("div",{children:n}):t&&t.role&&"admin"===t.role.type?Object(A.jsx)("div",{children:"Not Assigned"}):t&&t.role&&"center"===t.role.type?Object(A.jsx)(C.a,{variant:"contained",color:"primary",onClick:function(n){n.stopPropagation(),e.issueDevices(a)},disabled:"Not Issued"===a.license,children:"Assign"}):void 0}(r,i);break;case"license":c=function(n,a){return"Issued"===n?Object(A.jsx)("div",{children:"Issued"}):t&&t.role&&"admin"===t.role.type?Object(A.jsx)("div",{children:"Not Issued"}):t&&t.role&&"center"===t.role.type?Object(A.jsx)(C.a,{variant:"contained",color:"primary",onClick:function(n){n.stopPropagation(),e.issueLisence(a)},children:"Issue"}):void 0}(r,i);break;case"scheduledAt":c=function(n){return"scheduled"==n.status?Object(A.jsxs)("div",{style:{marginLeft:"1rem"},children:[n.scheduledAt,Object(A.jsx)(h.a,{"aria-label":"view",color:"primary",children:"counsellor"===t.role.type&&Object(A.jsx)(g.a,{})})]}):"pending"==n.status?Object(A.jsxs)("div",{style:{display:"flex",flexDirection:"row",justifyContent:"center"},children:[Object(A.jsx)(C.a,{variant:"contained",color:"success",style:{marginRight:5},onClick:function(){return e.handleAcceptModal(n,!0)},children:Object(A.jsx)("div",{style:{fontSize:".8rem"},children:"Accept"})}),Object(A.jsx)(C.a,{variant:"contained",color:"error",onClick:function(){return e.handleRejectModal(n,!0)},children:Object(A.jsx)("div",{style:{fontSize:".8rem"},children:"Reject"})})]}):"cancelled"==n.status?Object(A.jsx)("div",{style:{marginLeft:"1rem"},children:"".concat(n.scheduledAt," - Cancelled")}):Object(A.jsxs)("div",{style:{marginLeft:"1rem"},children:[n,Object(A.jsx)(h.a,{"aria-label":"view",color:"primary",children:"counsellor"===t.role.type&&Object(A.jsx)(g.a,{})})]})}(r);break;case"appointment":c=function(n,a){return"Scheduled"===n?Object(A.jsx)("div",{children:"Scheduled"}):t&&t.role&&"admin"===t.role.type?Object(A.jsx)("div",{children:"Not Scheduled"}):t&&t.role&&"center"===t.role.type?Object(A.jsx)(C.a,{variant:"contained",color:"primary",onClick:function(n){n.stopPropagation(),e.scheduleSession(a)},children:"Schedule"}):void 0}(r,i);break;case"status":c=y[r]||r;break;case"disable_center":c=p(r,"center");break;case"disable_provider":c=p(r,"provider");break;default:c=r}return c},P=function(e){for(var n=e.row,t=[],r=Object.entries(n),i=0,l=Object.entries(r);i<l.length;i++){var s=Object(a.a)(l[i],2),o=s[0],d=Object(a.a)(s[1],2),u=d[0],h=d[1];"centerId"!==u&&"clientID"!==u&&"clinicId"!==u&&"deviceId"!==u&&"counsellor_user_id"!==u&&t.push(Object(A.jsx)(c.a,{className:"text-style",component:"th",scope:"row",align:"center",children:O(u,h,n)},o))}return t};return Object(A.jsx)(A.Fragment,{children:Object(A.jsxs)(d.a,{sx:{width:"100%",overflow:"hidden"},children:[Object(A.jsx)(l.a,{className:"main-table",children:Object(A.jsxs)(r.a,{sx:{minWidth:650},size:"small","aria-label":"simple table",className:"user-table",children:[Object(A.jsx)(s.a,{children:Object(A.jsx)(o.a,{children:Object(A.jsx)(f,{meta:e.rows.meta})})}),e.rows&&e.rows.length>0?Object(A.jsx)(i.a,{children:(e.rowsPerPage>0?e.rows.slice(e.page*e.rowsPerPage,e.page*e.rowsPerPage+e.rowsPerPage):e.rows).map((function(n,t){return Object(A.jsx)(o.a,{sx:{"&:last-child td, &:last-child th":{border:0}},onClick:function(){e.onClick&&e.onClick("device"===e.view?n.deviceId:"center"===e.view?n.centerId:"client"===e.view||"counselor"===e.view?n.clientID:"counsellor"===e.view?n.counsellor_user_id:"clinician"===e.view?n.clinicId:n.id)},children:Object(A.jsx)(P,{row:n})},t)}))}):Object(A.jsx)(A.Fragment,{children:Object(A.jsx)("caption",{children:"No records found"})})]})}),!e.view||"center"!==e.view&&"device"!==e.view&&"client"!==e.view&&"counsellor"!==e.view&&"clinician"!==e.view?Object(A.jsx)(m.a,{rowsPerPageOptions:[],component:"div",count:e.rows.length,rowsPerPage:e.rowsPerPage||10,page:e.page||0,onPageChange:e.handleChangePage,onRowsPerPageChange:e.handleChangeRowsPerPage,className:"table-page"}):Object(A.jsx)(m.a,{rowsPerPageOptions:[],component:"div",count:e.pageDetails.total||0,rowsPerPage:10,page:e.pageDetails.page-1||0,onPageChange:e.handlePageChange,onRowsPerPageChange:e.handleChangeRowsPerPage,className:"table-page"})]})})}},647:function(e,n,t){"use strict";t.d(n,"b",(function(){return a})),t.d(n,"a",(function(){return r}));var a={admin:[{id:1,name:"Details"},{id:2,name:"Centers"},{id:3,name:"Providers"},{id:4,name:"Clients"}],center:[{id:1,name:"Details"},{id:3,name:"Providers"},{id:4,name:"Clients"}],counsellor:[{id:1,name:"Details"},{id:2,name:"Centers"},{id:4,name:"Clients"}],clinician:[{id:1,name:"Details"},{id:2,name:"Clients"},{id:3,name:"Appointments"}],client:[{id:1,name:"Details"},{id:2,name:"Providers"},{id:3,name:"Appointments"}],device:{admin:[{id:1,name:"Managed"},{id:2,name:"Unmanaged"}],center:[{id:1,name:"Managed"},{id:2,name:"Unmanaged"}]},deviceDetail:[{id:1,name:"Details"},{id:2,name:"Usage"}],deviceUsageFilters:[{id:1,type:"search",label:"Search Device Usage",placeholder:"Search Device Usage"},{id:2,type:"filter",label:"Status",name:"status",items:[{id:1,name:"All",value:"All"},{id:2,name:"Active",value:"Active"},{id:3,name:"Inactive",value:"Inactive"}]}],usersListing:[{id:1,type:"search",label:"Search User",placeholder:"Search User"},{id:2,type:"filter",label:"Role",name:"role",items:[{id:1,name:"All",value:"All"},{id:2,name:"Center",value:"Center"},{id:3,name:"Counsellor",value:"Counsellor"},{id:4,name:"Client",value:"Client"}]}],counsellorListing:[{id:1,type:"search",label:"Search Provider",placeholder:"Search Provider"},{id:2,type:"searchAutoComplete",label:"Search Center",name:"Search Center"}],deviceListing:{admin:{managed:[{id:1,type:"search",label:"Search Device",placeholder:"Search Device"},{id:2,type:"filter",label:"Status",name:"status",items:[{id:1,name:"All",value:"All"},{id:2,name:"Available",value:"Available"},{id:3,name:"Assigned",value:"Assigned"},{id:4,name:"Repair",value:"Repair"}]},{id:3,type:"filter",label:"Device Type",name:"device_type",items:[{id:1,name:"All",value:"All"},{id:2,name:"iPad",value:"iPad"},{id:3,name:"iPhone",value:"iPhone"},{id:4,name:"Android Phone",value:"Android Phone"},{id:5,name:"Android Tablet",value:"Android Tablet"},{id:6,name:"Other",value:"Other"}]},{id:4,type:"searchAutoComplete",label:"Search Center",name:"Search Center"}],unmanaged:[{id:1,type:"search",label:"Search Device",placeholder:"Search Device"},{id:2,type:"filter",label:"Status",name:"status",items:[{id:1,name:"All",value:"All"},{id:2,name:"Active",value:"active"},{id:3,name:"Inactive",value:"inactive"}]}]},center:{bmc:[{id:1,type:"search",label:"Search Device",placeholder:"Search Device"},{id:2,type:"filter",label:"Status",name:"status",items:[{id:1,name:"All",value:"All"},{id:2,name:"Available",value:"Available"},{id:3,name:"Assigned",value:"Assigned"},{id:4,name:"Repair",value:"Repair"}]},{id:3,type:"filter",label:"Device Type",name:"device_type",items:[{id:1,name:"All",value:"All"},{id:2,name:"iPad",value:"iPad"},{id:3,name:"iPhone",value:"iPhone"},{id:4,name:"Android Phone",value:"Android Phone"},{id:5,name:"Android Tablet",value:"Android Tablet"},{id:6,name:"Other",value:"Other"}]}],centerOrClient:[{id:1,type:"search",label:"Search Device",placeholder:"Search Device"},{id:2,type:"filter",label:"Status",name:"status",items:[{id:1,name:"All",value:"All"},{id:2,name:"Active",value:"active"},{id:3,name:"Inactive",value:"inactive"}]}]}},adminProfile:{profileInfo:{username:"",email:"",created_at:"",logo:null,logo_image:"",domain:""},fields:[]},centerProfile:{profileInfo:{center_id:"",name:"",email:"",phone_number:"",address:"",logo:null,logo_image:"",domain:""},fields:[{id:"center_id",type:"text",name:"center_id",label:"Center ID",disabled:!0},{id:"name",type:"text",name:"name",label:"Name",disabled:!1,validators:["REQUIRED"],errorMessages:["This field is required!"]},{id:"email",type:"email",name:"email",label:"Email",disabled:!1,validators:["REQUIRED","isEmail"],errorMessages:["This field is required!","email is not valid"]},{id:"phone_number",type:"text",name:"phone_number",label:"Phone Number",disabled:!1,validators:["REQUIRED","MAX_PHONE_LENGTH"],errorMessages:["This field is required!","Phone number must be of 7 digits"]},{id:"address",type:"text",name:"address",label:"Address",disabled:!1,validators:["REQUIRED"],errorMessages:["This field is required!"]}],validationRules:{REQUIRED:function(e){return 0!==e.length},MAX_PHONE_LENGTH:function(e){return!e||7===e.length}}},counsellorProfile:{profileInfo:{first_name:"",last_name:"",email:"",phone:{area_code:"",phone_number:""},logo:null,logo_image:"",domain:""},fields:[{id:"first_name",type:"text",name:"first_name",label:"First Name",disabled:!1,validators:["REQUIRED"],errorMessages:["This field is required!"]},{id:"last_name",type:"text",name:"last_name",label:"Last Name",disabled:!1,validators:["REQUIRED"],errorMessages:["This field is required!"]},{id:"email",type:"email",name:"email",label:"Email",disabled:!1,validators:["REQUIRED","isEmail"],errorMessages:["This field is required!","email is not valid"]},{type:"phone",area_code:{id:"area_code",type:"text",name:"area_code",label:"Area Code",disabled:!1,validators:["REQUIRED","VALID_INPUT","MAX_CODE_LENGTH"],errorMessages:["This field is required","Invalid area code","Area code should have 3 digits"]},phone_number:{id:"phone_number",type:"text",name:"phone_number",label:"Phone Number",disabled:!1,validators:["REQUIRED","MAX_PHONE_LENGTH"],errorMessages:["This field is required!","Phone number must be of 7 digits"]}}],validationRules:{REQUIRED:function(e){return 0!==e.length},MAX_CODE_LENGTH:function(e){return!e||3===e.length},VALID_INPUT:function(e){return!e||!isNaN(e)},MAX_PHONE_LENGTH:function(e){return!e||7===e.length}}},centerSearchFilters:[{id:1,type:"search",name:"search",label:"Search Center",placeholder:"Search Center"},{id:2,type:"filter",label:"Center Type",name:"center_type",items:[{id:1,name:"All",value:"All"},{id:2,name:"CAC",value:"CAC"},{id:3,name:"Clinic",value:"Clinic"},{id:4,name:"Hospital",value:"Hospital"},{id:5,name:"Private",value:"Private"}]}],appointmentsListing:[{id:1,type:"search",name:"search",label:"Search Appointment",placeholder:"Search Appointment"},{id:2,type:"filter",label:"Status",name:"status",items:[{id:1,name:"All",value:"All"},{id:2,name:"Pending",value:"pending"},{id:3,name:"Scheduled",value:"scheduled"},{id:4,name:"Rescheduled",value:"rescheduled"},{id:5,name:"Cancelled",value:"cancelled"},{id:6,name:"Completed",value:"completed"}]}]},r={client:[{id:1,name:"Details"},{id:5,name:"Appointments"}],center:[{id:1,name:"Details"},{id:4,name:"Clients"},{id:5,name:"Appointments"}]}},648:function(e,n,t){"use strict";t.d(n,"g",(function(){return r})),t.d(n,"i",(function(){return i})),t.d(n,"f",(function(){return c})),t.d(n,"c",(function(){return l})),t.d(n,"h",(function(){return s})),t.d(n,"d",(function(){return o})),t.d(n,"r",(function(){return d})),t.d(n,"o",(function(){return u})),t.d(n,"q",(function(){return h})),t.d(n,"a",(function(){return b})),t.d(n,"m",(function(){return m})),t.d(n,"n",(function(){return f})),t.d(n,"j",(function(){return j})),t.d(n,"l",(function(){return p})),t.d(n,"k",(function(){return v})),t.d(n,"s",(function(){return O})),t.d(n,"e",(function(){return g})),t.d(n,"b",(function(){return x})),t.d(n,"p",(function(){return C}));var a=t(26),r=function(e){var n="/api/centers/".concat(e);return Object(a.b)("GET",n).then((function(e){return e})).then((function(e){return e}))},i=function(e){var n="/api/clients?pagination[page]=".concat(e);return Object(a.b)("GET",n).then((function(e){return e})).then((function(e){return e}))},c=function(e){return Object(a.b)("GET","/api/barriers").then((function(e){return e})).then((function(e){return e}))},l=function(e){return Object(a.b)("POST","/api/clients",e).then((function(e){return e})).then((function(e){return e}))},s=function(e){var n="/api/clients/".concat(e);return Object(a.b)("GET",n).then((function(e){return e})).then((function(e){return e}))},o=function(e){return Object(a.b)("POST","/api/licenses",e).then((function(e){return e})).then((function(e){return e}))},d=function(e,n){var t="/api/licenses/".concat(e);return Object(a.b)("PUT",t,n).then((function(e){return e})).then((function(e){return e}))},u=function(e){var n="/api/clients/".concat(e);return Object(a.b)("GET",n).then((function(e){return e})).then((function(e){return e}))},h=function(e,n){var t="/api/clients/".concat(e);return Object(a.b)("PUT",t,n).then((function(e){return e})).then((function(e){return e}))},b=function(e){return Object(a.b)("POST","/api/notes",e).then((function(e){return e})).catch((function(e){return e}))},m=function(){return Object(a.b)("GET","/api/passphrases").then((function(e){return e})).catch((function(e){return e}))},f=function(e,n,t){var r="/api/clients?search=".concat(e,"&filter[clinician]=").concat(n.clinician,"&filter[device]=").concat(n.device,"&pagination[page]=").concat(t);return Object(a.b)("GET",r).then((function(e){return e})).catch((function(e){return e}))},j=function(){return Object(a.b)("GET","/api/initial-diagnoses").then((function(e){return e})).catch((function(e){return e}))},p=function(){return Object(a.b)("GET","/api/treatments").then((function(e){return e})).catch((function(e){return e}))},v=function(){return Object(a.b)("GET","/api/treatment-locations").then((function(e){return e})).catch((function(e){return e}))},O=function(e,n){var t="/api/notes/".concat(e);return Object(a.b)("PUT",t,n).then((function(e){return e})).catch((function(e){return e}))},g=function(e){return Object(a.b)("POST","/api/sessions",e).then((function(e){return e})).catch((function(e){return e}))},x=function(e){var n="/api/clients?check=".concat(e);return Object(a.b)("GET",n).then((function(e){return e})).catch((function(e){return e}))},C=function(e,n){var t="/api/clients/".concat(e);return Object(a.b)("PUT",t,n).then((function(e){return e})).then((function(e){return e}))}},650:function(e,n,t){},659:function(e,n,t){},662:function(e,n,t){"use strict";t.d(n,"a",(function(){return r})),t.d(n,"c",(function(){return i})),t.d(n,"d",(function(){return c})),t.d(n,"b",(function(){return l}));var a=t(26),r=function(e){var n="/api/centers";return e&&(n+="?pagination[page]=".concat(e)),Object(a.b)("GET",n).then((function(e){return e})).then((function(e){return e}))},i=function(){return Object(a.b)("GET","/api/centers?all=-1").then((function(e){return e})).then((function(e){return e}))},c=function(e){var n="/api/centers/".concat(e);return Object(a.b)("GET",n).then((function(e){return e})).then((function(e){return e}))},l=function(e,n,t){var r="/api/centers?search=".concat(e,"&filter=").concat(n,"&pagination[page]=").concat(t);return Object(a.b)("GET",r).then((function(e){return e})).catch((function(e){return e}))}},668:function(e,n,t){"use strict";t.d(n,"a",(function(){return c})),t.d(n,"c",(function(){return l})),t.d(n,"b",(function(){return s})),t.d(n,"e",(function(){return o})),t.d(n,"d",(function(){return d}));var a=t(51),r=t.n(a),i=t(73);function c(e){var n=[];return Array.isArray(e)?e.forEach((function(e){n.push(u(e))})):n.push(u(e)),n.meta={centerId:"Center ID",name:"Full Name",email:"Email",phoneNumber:"Phone Number",state:"State",centerType:"Center Type",dateCreated:"Date Created"},n}function l(e){var n=[];if(Array.isArray(e))e.forEach((function(e){var t={id:e&&e.user&&e.user.username,name:e.name,email:e.email,phoneNumber:e.phone_number.toString(),createdAt:r()(e.createdAt).format("DD MMMM, YYYY")};n.push(t)}));else{var t={id:e&&e.user&&e.user.username,name:e.name,email:e.email,phoneNumber:e.phone_number,createdAt:r()(e.createdAt).format("DD MMMM, YYYY")};n.push(t)}return n.meta={counsellorId:"Provider ID",name:"Full Name",email:"Email ID",phoneNumber:"Phone Number",dateCreated:"Date Created"},n}function s(e){var n=[];if(Array.isArray(e))e.forEach((function(e){var t={id:e.client_id,name:e.name,age:e.age,gender_bio:e.gender_bio,gender_id:e.gender_identified,ethnicity:e.ethnicity,status:e.status,createdAt:r()(e.createdAt).format("DD MMMM, YYYY")};n.push(t)}));else{var t={id:e.id,name:e.name,age:e.age,gender_bio:e.gender_bio,gender_id:e.gender_identified,status:e.status,createdAt:r()(e.createdAt).format("DD MMMM, YYYY")};n.push(t)}return n.meta={clientId:"Client ID",name:"Record Name",age:"Age",gender_bio:"Gender",gender_id:"Gender ID",ethnicity:"Ethnicity",status:"Status",dateCreated:"Date Created"},n}function o(e){var n,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=[];return t&&"provider"!==t?(n={counsellor_name:"Provider Name",caseId:"Case ID",sessionId:"Session ID",scheduledAt:"Scheduled At",duration:"Duration",status:"Status"},e.forEach((function(e){var n={counsellor_name:e&&e.counsellor&&e.counsellor.name,caseId:e.case_id,sessionId:e.session_id,scheduledAt:r()(e.scheduled_at).format("LLL"),duration:Object(i.e)(e.duration),status:e.status};a.push(n)}))):(n={caseId:"Case ID",sessionId:"Session ID",scheduledAt:"Scheduled At",duration:"Duration",status:"Status"},e.forEach((function(e){var n={caseId:e.case_id,sessionId:e.session_id,scheduledAt:r()(e.scheduled_at).format("LLL"),duration:Object(i.e)(e.duration),status:e.status};a.push(n)}))),a.meta=n,a}function d(e){var n="http://localhost:1337"+e[e.role.name.toLowerCase()].logo_image;return{UserID:e.username,name:h(e),phoneNumber:e[e.role.name.toLowerCase()].phone_number,email:e.email,verified:e.confirmed,logo:n,date_created:r()(e.createdAt).format("DD MMMM, YYYY"),role:e.role.name}}function u(e){var n,t,a,i;return console.log(null===(n=e.user)||void 0===n?void 0:n.username),{centerId:e.id,id:null===(t=e.user)||void 0===t?void 0:t.username,name:e.name,email:e.email,phoneNumber:e.phone_number,state:null===(a=e.state)||void 0===a?void 0:a.name,centerType:null===(i=e.center_type)||void 0===i?void 0:i.name,createdAt:r()(e.createdAt).format("DD MMMM, YYYY")}}function h(e){var n="";switch(e.role.name){case"Center":n=e.center&&e.center.name?e.center.name:"";break;case"Counsellor":n=e.counsellor&&e.counsellor.name?e.counsellor.name:"";break;case"Client":n=e.client&&e.client.name?e.client.name:"";break;case"Admin":n=e.profile&&e.profile.first_name?e.profile.first_name+e.profile.last_name:"";break;default:n="NIL"}return n}},669:function(e,n,t){"use strict";var a=t(13),r=(t(2),t(636)),i=t(207),c=t(330),l=t(560),s=t(561),o=t(551),d=t(332),u=t(309),h=t(213),b=t.n(h),m=(t(341),t(1));n.a=function(e){var n=function(n){return"Gender"==n?e.genderValue.map((function(e,n){return Object(m.jsx)(r.a,{value:e,children:e},n)})):e.filterValue.map((function(e,n){return Object(m.jsx)(r.a,{value:e,children:e},n)}))};return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsxs)(i.a,{sx:{marginTop:"0px",marginBottom:"20px"},container:!0,rowSpacing:3,columnSpacing:6,children:[Object(m.jsx)(i.a,{item:!0,lg:6,md:6,sm:12,xs:12,children:Object(m.jsx)(u.a,{sx:{width:"100%"},label:e.searchLabel,variant:"outlined",onChange:e.handleSearch,placeholder:e.searchLabel,type:"text",value:e.searchValue,autoFocus:!0,InputProps:{startAdornment:Object(m.jsx)(b.a,{})}})}),e.multiFilter?Object.entries(e.type).map((function(t,r){var d=Object(a.a)(t,2),u=d[0];return d[1],Object(m.jsx)(i.a,{item:!0,lg:6,md:6,sm:12,xs:12,children:Object(m.jsx)(c.a,{children:Object(m.jsxs)(l.a,{fullWidth:!0,children:[Object(m.jsx)(s.a,{sx:{backgroundColor:"#fafafa",padding:"0.25rem"},children:u}),Object(m.jsx)(o.a,{id:"demo-simple-select",value:"Gender"==u?e.genderSelectValue:e.selectValue,label:"Age",onChange:function(n){return e.handleChange(n,u)},placeholder:"Search Center",children:n(u)})]})})},"".concat(r))})):Object(m.jsx)(i.a,{item:!0,lg:6,md:6,sm:12,xs:12,children:Object(m.jsx)(c.a,{children:Object(m.jsxs)(l.a,{fullWidth:!0,children:[Object(m.jsx)(s.a,{sx:{backgroundColor:"#fafafa",padding:"0.25rem"},children:e.label}),Object(m.jsx)(o.a,{id:"demo-simple-select",value:e.selectValue,label:"Age",onChange:function(n){return e.handleChange(n)},placeholder:"Search Center",children:e.filterValue&&e.filterValue.map((function(e,n){return Object(m.jsx)(r.a,{value:e,children:e},n)}))})]})})})]}),Object(m.jsx)(l.a,{sx:{marginBottom:"20px",display:"flex",width:"100%"},children:Object(m.jsx)(d.a,{color:"primary",variant:"contained",onClick:e.handleReset,sx:{alignSelf:"flex-end"},children:"Reset"})})]})}},763:function(e,n,t){"use strict";t.d(n,"a",(function(){return r}));var a=t(26),r=function(e,n){var t="/api/sessions/"+e;return Object(a.b)("PUT",t,n).then((function(e){return e})).catch((function(e){return e}))}},835:function(e,n,t){},952:function(e,n,t){"use strict";t.r(n);var a=t(45),r=t(6),i=t(13),c=t(834),l=t(8),s=t(33),o=t.n(s),d=t(2),u=t.n(d),h=t(633),b=t(660),m=t(25),f=(t(835),t(51)),j=t.n(f),p=t(330),v=t(945),O=t(698),g=t(699),x=t(712),C=t(646),A=t(94),y=t(212),P=t(647),S=t(669),_=t(668),w=t(50),D=t(560),E=t(558),I=t(331),k=t(334),T=t(561),N=t(551),R=t(559),M=t(636),L=t(207),U=t(632),G=t(799),Y=t(790),V=t(332),H=t(112),F=t(763),q=t(648),Q=t(656),B=t.n(Q),W=t(662),z=t(1),X=Object(w.a)(E.a)((function(){return{position:"absolute",bottom:"38px",right:"60px"}})),J=Object(w.a)("div")((function(e){return{backgroundColor:e.theme.palette.background.paper,marginBottom:5}})),K={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",bgcolor:"background.paper",border:"2px solid #fff",boxShadow:24,p:4,borderRadius:"15px"},Z=function(e){var n=B()({id:"",centers:e.centerIds||[]}),t=Object(i.a)(n,3),c=t[0],l=t[1],s=t[2],u=Object(d.useState)(),h=Object(i.a)(u,2),b=h[0],m=h[1],f=Object(d.useState)(!1),v=Object(i.a)(f,2),O=v[0],g=v[1],x=Object(d.useState)(!0),C=Object(i.a)(x,2),A=C[0],P=C[1],S=Object(d.useRef)();function _(){return _=Object(a.a)(o.a.mark((function n(t){var a,r,i,l;return o.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:g(!0),a=c.id,r=c.centers,i={counsellor:{data:{id:a,centers:r,publishedAt:j()().format().split("T")[0]+" "+j()().format().split("T")[1].slice(0,8)}}},l=[],s.current.centers.length<=0&&(l=e.centerIds),e&&e.centerIds.map((function(e){s.current.centers.map((function(n){e!==n&&l.push(e)}))})),!A&&l&&l.length>0&&l.map((function(e){Z(e,a)}));try{w(i)}catch(t){console.log(t)}case 8:case"end":return n.stop()}}),n)}))),_.apply(this,arguments)}function w(n){console.log(n),Object(y.f)(n).then((function(n){n&&"success"===n.status?setTimeout((function(){g(!1),e.handleAssignCenterStatus({status:"success",message:"Center Assigned Successfully"}),e.handleClose()}),3e3):n&&"fail"===n.status?(g(!1),e.handleAssignCenterStatus({status:"error",message:"Center Assigned Unsuccessfull"})):g(!1)})).catch((function(n){e.handleAssignCenterStatus({status:"error",message:"Center Assigned Unsuccessfull"})}))}var E=function(){var e=Object(a.a)(o.a.mark((function e(n){var t,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=0;case 1:if(!(t<n.length)){e.next=8;break}return a={data:{counsellor:null}},e.next=5,Object(q.p)(n[t],a);case 5:t++,e.next=1;break;case 8:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();function Q(){return(Q=Object(a.a)(o.a.mark((function e(n){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t={data:{status:"cancelled"}},n&&n.map((function(e){Object(F.a)(e,t)}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Z(e,n){var t={clients:[],sessions:[]};console.log(e),Object(W.d)(e).then((function(e){e&&(e.clients&&e.clients.map((function(e){e.counsellor&&e.counsellor.id===Number(n)&&t.clients.push(e.id)})),console.log(t.clients),E(t.clients),e.sessions&&e.sessions.map((function(e){e.counsellor.id!==Number(n)||"scheduled"!==e.status&&"pending"!==e.status&&"rescheduled"!==e.status||!j()(j()(e.scheduled_at).format("x"),"x").isAfter(j()().startOf("minute"))||t.sessions.push(e.id)})),console.log(t),function(e){Q.apply(this,arguments)}(t.sessions))})).catch((function(e){console.log("error",e)}))}Object(d.useEffect)((function(){Object(a.a)(o.a.mark((function n(){var t,a;return o.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,e.centerIds&&console.log(e),n.next=4,Object(y.g)();case 4:(t=n.sent)&&t.data&&(a=[],t.data.map((function(e){var n,t,r,i;if(!1===(null===e||void 0===e||null===(n=e.attributes)||void 0===n||null===(t=n.user)||void 0===t||null===(r=t.data)||void 0===r||null===(i=r.attributes)||void 0===i?void 0:i.blocked)){var c={id:e.id,name:e.attributes.name};a.push(c)}})),console.log(t),m(a),l(Object(r.a)(Object(r.a)({},c),{},{id:e.id}))),n.next=11;break;case 8:n.prev=8,n.t0=n.catch(0),console.log("err",n.t0);case 11:case"end":return n.stop()}}),n,null,[[0,8]])})))()}),[]);var $=c.centers;return Object(z.jsx)("div",{children:Object(z.jsx)(I.a,{keepMounted:!0,open:e.open,onClose:e.handleClose,"aria-labelledby":"keep-mounted-modal-title","aria-describedby":"keep-mounted-modal-description",children:Object(z.jsx)(p.a,{sx:K,children:Object(z.jsxs)(H.ValidatorForm,{ref:S,onSubmit:function(e){return _.apply(this,arguments)},onError:function(){return null},children:[Object(z.jsx)(k.a,{id:"keep-mounted-modal-title",variant:"h6",component:"h2",children:"Assign Centers"}),Object(z.jsx)(k.a,{id:"keep-mounted-modal-title",variant:"h8",component:"h6",children:"Note: Multiple Center can be selected"}),Object(z.jsx)(p.a,{sx:{minWidth:300,mb:2},children:Object(z.jsxs)(D.a,{sx:{mt:2,minWidth:400},children:[Object(z.jsx)(T.a,{id:"open-select-label",children:"Centers"}),Object(z.jsxs)(N.a,{labelId:"open-select-label",margin:"dense",id:"center_type",name:"centers",multiple:!0,value:$,input:Object(z.jsx)(R.a,{label:"Center"}),onChange:function(e){e.preventDefault(),l(Object(r.a)(Object(r.a)({},c),{},{centers:e.target.value}))},fullWidth:!0,validators:["required"],onClose:function(){var n=e&&e.centerIds.every((function(e){return s.current.centers.includes(e)}));P(n)},children:[Object(z.jsx)(M.a,{disabled:!0,value:"",children:Object(z.jsx)("em",{children:"Select Center"})}),b&&b.map((function(e,n){return Object(z.jsx)(M.a,{value:e.id,children:e.name},n)}))]})]})}),!A&&Object(z.jsx)(L.a,{container:!0,spacing:2,children:Object(z.jsxs)(L.a,{item:!0,xs:12,md:12,children:[Object(z.jsx)(k.a,{sx:{mt:2},variant:"h7",component:"div",color:"error",children:"Note : Disassociate center will have following actions -"}),Object(z.jsx)(J,{children:Object(z.jsxs)(U.a,{dense:!0,children:[Object(z.jsxs)(G.a,{children:[Object(z.jsx)(k.a,{sx:{mr:2},variant:"h7",component:"div",children:"--"}),Object(z.jsx)(Y.a,{secondary:"Provider will no longer have access to the clients belongs to the center",secondaryTypographyProps:{noWrap:!0,fontSize:12,lineHeight:"12px",color:"rgba(0,0,0,.5)"}})]}),Object(z.jsxs)(G.a,{children:[Object(z.jsx)(k.a,{sx:{mr:2},variant:"h7",component:"div",children:"--"}),Object(z.jsx)(Y.a,{secondary:"Scheduled appointments will get cancelled",secondaryTypographyProps:{noWrap:!0,fontSize:12,lineHeight:"12px",color:"rgba(0,0,0,.5)"}})]})]})})]})}),Object(z.jsxs)(p.a,{sx:{display:"table",marginLeft:"auto",marginRight:"0px"},children:[Object(z.jsx)(V.a,{color:"error",variant:"contained",onClick:function(){e.handleClose()},children:"Cancel"}),Object(z.jsx)(V.a,{disabled:O,sx:{ml:2},type:"submit",variant:"contained",children:"Assign"}),O&&Object(z.jsx)(X,{size:24,className:"buttonProgress"})]})]})})})})},$=(t(659),t(95)),ee=Object(w.a)("div")((function(e){var n,t=e.theme;return n={margin:"30px"},Object(l.a)(n,t.breakpoints.down("sm"),{margin:"16px"}),Object(l.a)(n,"& .breadcrumb",Object(l.a)({marginBottom:"30px"},t.breakpoints.down("sm"),{marginBottom:"16px"})),n}));n.default=function(){var e=Object(d.useState)(!1),n=Object(i.a)(e,2),t=n[0],s=n[1],f=Object(d.useState)("1"),w=Object(i.a)(f,2),D=w[0],E=w[1],I=Object(d.useState)([]),k=Object(i.a)(I,2),T=k[0],N=k[1],R=Object(d.useState)(""),M=Object(i.a)(R,2),L=M[0],U=M[1],G=Object(d.useState)(""),Y=Object(i.a)(G,2),V=Y[0],H=Y[1],F=Object(d.useState)(""),q=Object(i.a)(F,2),Q=q[0],W=q[1],X=Object(d.useState)(""),J=Object(i.a)(X,2),K=J[0],ne=J[1],te=u.a.useState(5),ae=Object(i.a)(te,2),re=ae[0],ie=ae[1],ce=u.a.useState(0),le=Object(i.a)(ce,2),se=le[0],oe=le[1],de=Object(d.useState)(!1),ue=Object(i.a)(de,2),he=ue[0],be=ue[1],me=Object(d.useState)(""),fe=Object(i.a)(me,2),je=fe[0],pe=fe[1],ve=Object(d.useState)(!1),Oe=Object(i.a)(ve,2),ge=Oe[0],xe=Oe[1],Ce=Object(d.useState)({center:[],counsellor:[],client:[],appointment:[]}),Ae=Object(i.a)(Ce,2),ye=Ae[0],Pe=Ae[1],Se=Object(d.useState)({center:"",counsellor:"",client:"",appointment:""}),_e=Object(i.a)(Se,2),we=_e[0],De=(_e[1],Object(d.useState)({status:"success",message:""})),Ee=Object(i.a)(De,2),Ie=Ee[0],ke=Ee[1],Te=Object(d.useState)(!1),Ne=Object(i.a)(Te,2),Re=Ne[0],Me=Ne[1],Le=Object(d.useState)(!1),Ue=Object(i.a)(Le,2),Ge=Ue[0],Ye=Ue[1],Ve=Object(m.f)(),He=window.location.href.split("/").pop(),Fe=Object($.a)().user,qe=Object(d.useState)(null),Qe=Object(i.a)(qe,2),Be=Qe[0],We=Qe[1],ze=Boolean(Be),Xe=Object(d.useState)([]),Je=Object(i.a)(Xe,2),Ke=Je[0],Ze=Je[1],$e=Object(d.useState)({Gender:"All",Ethnicity:"All"}),en=Object(i.a)($e,2),nn=en[0],tn=en[1],an=B()({search:"",filter:"All"}),rn=Object(i.a)(an,3),cn=rn[0],ln=rn[1],sn=rn[2],on=B()({search:"",ethnicity:"All",gender:"All"}),dn=Object(i.a)(on,3),un=dn[0],hn=dn[1],bn=dn[2],mn=B()(["All","CAC","Clinic","Hospital","Private"]),fn=Object(i.a)(mn,3),jn=fn[0],pn=(fn[1],fn[2],Object(d.useState)(["All","American Indian","Alaska Native","Asian","Black or African American","Hispanic or Latino","Native Hawaiian","Pacific Islander","White","Unknown"])),vn=Object(i.a)(pn,2),On=vn[0],gn=(vn[1],Object(d.useState)(["All","Male","Female","Other"])),xn=Object(i.a)(gn,2),Cn=xn[0];xn[1];function An(e){We(e.currentTarget)}function yn(){We(null)}var Pn=function(e,n){oe(n)},Sn=function(e){ie(+e.target.value),oe(0)};function _n(){console.log(L.id),Ve("/counsellors/edit?id=".concat(L.id)),We(null)}function wn(){xe(!0),We(null)}var Dn=function(){ln({search:"",filter:"All"}),tn({Gender:"All",Ethnicity:"All"}),hn({search:"",ethnicity:"All",gender:"All"})},En=function(e,n){var t,a=e.target.value;(ln(Object(r.a)(Object(r.a)({},cn),{},{filter:a})),"All"!==a)?((t=V.filter((function(e){return e.centerType.includes(a)}))).meta=V.meta,be(!0),Pe(Object(r.a)(Object(r.a)({},ye),{},{center:t}))):be(!1)},In=function(e,n){var t,a=e.target.value;("Gender"==n?hn(Object(r.a)(Object(r.a)({},un),{},{gender:a})):"Ethnicity"==n&&hn(Object(r.a)(Object(r.a)({},un),{},{ethnicity:a})),"All"!==a)?((t=Q.filter((function(e){return e.gender_bio.includes(a)||e.ethnicity.includes(a)}))).meta=Q.meta,Pe(Object(r.a)(Object(r.a)({},ye),{},{client:t})),be(!0)):be(!1)},kn=function(e){return function(n){var t=n.target.value;if(0===t.length&&be(!1),e&&"client"==e)hn(Object(r.a)(Object(r.a)({},un),{},{search:t})),t&&t.length>2&&(Q.filter((function(e){return e.name.toLowerCase().includes(t)||e.status.toLowerCase().includes(t)||e.gender_bio.toLowerCase().includes(t)})),Object(c.a)("searchData"),cn.meta=Q.meta,be(!0),Pe(Object(r.a)(Object(r.a)({},ye),{},Object(l.a)({},e,cn))));else if(e&&"center"==e){var a;if(ln(Object(r.a)(Object(r.a)({},cn),{},{search:t})),t&&t.length>2)(a=V.filter((function(e){var n,a;return e.name.toLowerCase().includes(t)||(null===(n=e.email)||void 0===n?void 0:n.toLowerCase().includes(t))||(null===(a=e.phoneNumber)||void 0===a?void 0:a.toString().toLowerCase().includes(t))}))).meta=V.meta,be(!0),Pe(Object(r.a)(Object(r.a)({},ye),{},Object(l.a)({},e,a)))}}},Tn=function(){var e=Object(a.a)(o.a.mark((function e(n){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(y.u)(n);case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();Object(d.useEffect)((function(){s(!0),Tn(He).then((function(e){if(e){var n;Me(null===e||void 0===e||null===(n=e.user)||void 0===n?void 0:n.blocked);var t=null===e||void 0===e?void 0:e.centers.filter((function(e){var n;return!1===(null===e||void 0===e||null===(n=e.user)||void 0===n?void 0:n.blocked)}));H(Object(_.a)(t)),W(Object(_.b)(e.clients)),ne(Object(_.e)(e.sessions))}if(U(function(e){var n;return{id:e.id,name:e.name,email:e.email,firstName:e.first_name,lastName:e.last_name,phoneNumber:null!=e.area_code?e.area_code+"-"+e.phone_number:e.phone_number,username:null===(n=e.user)||void 0===n?void 0:n.username,date_created:j()(e.createdAt).format("DD MMMM, YYYY")}}(e)),e.logo_image){var a="http://localhost:1337"+e.logo_image;pe(a)}s(!1)})).catch(console.error)}),[ge]),Object(d.useEffect)((function(){if(V){var e=V.map((function(e){return e.centerId}));Ze(e)}N(P.b.counsellor)}),[L,V,T]);var Nn=function(){return Object(z.jsxs)(z.Fragment,{children:[Object(z.jsx)(S.a,{handleSearch:kn("center"),handleChange:En,filterValue:jn,searchValue:cn.search,selectValue:sn.current.filter,label:"Center Type",searchLabel:"Search Center",handleReset:Dn}),Object(z.jsx)(C.a,{role:"Center",rowsPerPage:re,page:se,handleChangeRowsPerPage:Sn,handleChangePage:Pn,rows:!he||""===cn.search&&"All"===cn.filter?V:ye.center})]})},Rn=function(){return Object(z.jsxs)(z.Fragment,{children:[Object(z.jsx)(S.a,{handleSearch:kn("client"),handleChange:In,filterValue:On,genderValue:Cn,multiFilter:!0,selectValue:bn.current.ethnicity,genderSelectValue:bn.current.gender,searchValue:bn.current.search,label:"Ethnicity",searchLabel:"Search Client",type:nn,handleReset:Dn}),Object(z.jsx)(C.a,{role:"Client",rowsPerPage:re,page:se,handleChangeRowsPerPage:Sn,handleChangePage:Pn,rows:!he||""===un.search&&"All"===un.ethnicity&&"All"===un.gender?Q:ye.client})]})},Mn=function(){return Object(z.jsxs)(z.Fragment,{children:[Object(z.jsx)(A.m,{placeholder:"Search Appointment",value:we.appointment,handleBlur:kn("appointment")}),Object(z.jsx)(C.a,{role:"Session",rowsPerPage:re,page:se,handleChangeRowsPerPage:Sn,handleChangePage:Pn,rows:he&&""!==we.appointment?ye.appointment:K})]})};return Object(z.jsxs)(ee,{children:[Object(z.jsx)(A.b,{routeSegments:[{name:"All Providers",path:"/counsellors"},{name:"Provider Details"}]}),!t&&""!==L&&Object(z.jsxs)(O.a,{value:D,children:[Object(z.jsx)(p.a,{sx:{borderBottom:1,borderColor:"divider"},children:Object(z.jsx)(g.a,{onChange:function(e,n){E(n)},"aria-label":"Provider Details Segement",children:T.map((function(e,n){return Object(z.jsx)(v.a,{label:e.name,value:e.id.toString()},n)}))})}),T&&T.map((function(e,n){return Object(z.jsx)(x.a,{value:e.id.toString(),children:1===e.id?Object(z.jsx)(A.l,{title:L.name,subtitle:"Provider",icon:je,anchorEl:Be,open:ze,action:!0,isBlocked:Re,userRole:Fe.role.type,handleClick:An,handleClose:yn,navigateTo:_n,assignCenter:wn,children:Object(z.jsx)(A.o,{data:L})}):2===e.id?Object(z.jsx)(Nn,{}):4===e.id?Object(z.jsx)(Rn,{}):Object(z.jsx)(Mn,{})},n)}))]}),ge&&Object(z.jsx)(Z,{handleAssignCenterStatus:function(e){console.log(e),Ye(!0),ke(Object(r.a)(Object(r.a)({},Ie),{},{status:e&&"success"===e.status?"success":"error",message:null===e||void 0===e?void 0:e.message}))},handleClose:function(){xe(!1)},centerIds:Ke,open:ge,id:He}),Object(z.jsx)(h.a,{open:Ge,anchorOrigin:{vertical:"top",horizontal:"center"},autoHideDuration:3e3,onClose:function(){Ye(!1)},children:Object(z.jsx)(b.a,{onClose:function(){Ye(!1)},variant:"filled",severity:Ie.status,sx:{width:"100%"},children:Ie.message})})]})}}}]);
//# sourceMappingURL=24.3ac4b16e.chunk.js.map